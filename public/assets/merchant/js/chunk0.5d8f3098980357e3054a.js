webpackJsonp([0],{"+uI+":function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e){return t.fire("insertCustomChar",{chr:e})},n=function(t,n){var r=e(t,n).chr;t.execCommand("mceInsertContent",!1,r)},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(t){return t.settings.charmap},o=function(t){return t.settings.charmap_append},a=r.isArray,s=function(t){return a(t)?[].concat((e=t,r.grep(e,function(t){return a(t)&&2===t.length}))):"function"==typeof t?t():[];var e},u=function(t){return function(t,e){var n=i(t);n&&(e=s(n));var r=o(t);return r?[].concat(e).concat(s(r)):e}(t,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},l=function(t){return{getCharMap:function(){return u(t)},insertChar:function(e){n(t,e)}}},c=function(t){var e,n,r,i=Math.min(t.length,25),o=Math.ceil(t.length/i);for(e='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<o;r++){for(e+="<tr>",n=0;n<i;n++){var a=r*i+n;if(a<t.length){var s=t[a],u=parseInt(s[0],10),l=s?String.fromCharCode(u):"&nbsp;";e+='<td title="'+s[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button" data-chr="'+u+'">'+l+"</div></td>"}else e+="<td />"}e+="</tr>"}return e+="</tbody></table>"},f=function(t){for(;t;){if("TD"===t.nodeName)return t;t=t.parentNode}},d=function(t){var e,r={type:"container",html:c(u(t)),onclick:function(r){var i=r.target;if(/^(TD|DIV)$/.test(i.nodeName)){var o=f(i).firstChild;if(o&&o.hasAttribute("data-chr")){var a=o.getAttribute("data-chr"),s=parseInt(a,10);isNaN(s)||n(t,String.fromCharCode(s)),r.ctrlKey||e.close()}}},onmouseover:function(t){var n=f(t.target);n&&n.firstChild?(e.find("#preview").text(n.firstChild.firstChild.data),e.find("#previewTitle").text(n.title)):(e.find("#preview").text(" "),e.find("#previewTitle").text(" "))}};e=t.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){e.close()}}]})},h=function(t){t.addCommand("mceShowCharmap",function(){d(t)})},m=function(t){t.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),t.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};t.add("charmap",function(t){return h(t),m(t),l(t)})}()},BzBW:function(t,e){!function(){"use strict";var t,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,arguments))}},i=function(t){return function(){return t}},o=function(t){return t},a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return t.apply(null,a)}},s=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,arguments)}},u=function(t){return t()},l=i(!1),c=i(!0),f=l,d=c,h=function(){return m},m=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:f,isSome:f,isNone:d,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:e,map:h,ap:h,each:function(){},bind:h,flatten:h,exists:f,forall:d,filter:h,equals:t,equals_:t,toArray:function(){return[]},toString:i("none()")};return Object.freeze&&Object.freeze(r),r}(),g=function(t){var e=function(){return t},n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:d,isNone:f,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return g(e(t))},ap:function(e){return e.fold(h,function(e){return g(e(t))})},each:function(e){e(t)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(t)?i:m},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(f,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},p={some:g,none:h,from:function(t){return null===t||void 0===t?m:g(t)}},v=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(e)===t}},b=v("string"),y=v("array"),w=v("boolean"),x=v("function"),C=v("number"),R=void 0===(t=Array.prototype.indexOf)?function(t,e){return M(t,e)}:function(e,n){return t.call(e,n)},S=function(t,e){return R(t,e)>-1},T=function(t,e){return A(t,e).isSome()},_=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i,t)}return r},k=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},E=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r,t)&&n.push(o)}return n},N=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n,t)}(t,function(t){n=e(n,t)}),n},D=function(t,e,n){return k(t,function(t){n=e(n,t)}),n},O=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n,t))return p.some(i)}return p.none()},A=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n,t))return p.some(n);return p.none()},M=function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},P=Array.prototype.push,B=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);P.apply(e,t[n])}return e},H=function(t,e){var n=_(t,e);return B(n)},I=function(t,e){for(var n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n,t))return!1;return!0},W=Array.prototype.slice,L=function(t){var e=W.call(t,0);return e.reverse(),e},z=(x(Array.from)&&Array.from,Object.keys),F=function(t,e){for(var n=z(t),r=0,i=n.length;r<i;r++){var o=n[r];e(t[o],o,t)}},U=function(t,e){return q(t,function(t,n,r){return{k:n,v:e(t,n,r)}})},q=function(t,e){var n={};return F(t,function(r,i){var o=e(r,i,t);n[o.k]=o.v}),n},V=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return k(t,function(t,n){r[t]=i(e[n])}),r}},j=function(t){return t.slice(0).sort()},Y=function(t,e){throw new Error("All required keys ("+j(t).join(", ")+") were not specified. Specified keys were: "+j(e).join(", ")+".")},$=function(t){throw new Error("Unsupported keys for object: "+j(t).join(", "))},X=function(t,e){if(!y(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");k(e,function(e){if(!b(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},G=function(t){var e=j(t);O(e,function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},J=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return X("required",t),X("optional",e),G(n),function(r){var o=z(r);I(t,function(t){return S(o,t)})||Y(t,o);var a=E(o,function(t){return!S(n,t)});a.length>0&&$(a);var s={};return k(t,function(t){s[t]=i(r[t])}),k(e,function(t){s[t]=i(Object.prototype.hasOwnProperty.call(r,t)?p.some(r[t]):p.none())}),s}},K=V("width","height"),Z=V("rows","columns"),Q=V("row","column"),tt=V("x","y"),et=V("element","rowspan","colspan"),nt=V("element","rowspan","colspan","isNew"),rt={dimensions:K,grid:Z,address:Q,coords:tt,extended:V("element","rowspan","colspan","row","column"),detail:et,detailnew:nt,rowdata:V("element","cells","section"),elementnew:V("element","isNew"),rowdatanew:V("element","cells","section","isNew"),rowcells:V("cells","section"),rowdetails:V("details","section"),bounds:V("startRow","startCol","finishRow","finishCol")},it=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:i(t)}},ot={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return it(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return it(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return it(n)},fromDom:it,fromPoint:function(t,e,n){var r=t.dom();return p.from(r.elementFromPoint(e,n)).map(it)}},at={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},st=at.ELEMENT,ut=at.DOCUMENT,lt=function(t){return t.nodeType!==st&&t.nodeType!==ut||0===t.childElementCount},ct={all:function(t,e){var n=void 0===e?document:e.dom();return lt(n)?[]:_(n.querySelectorAll(t),ot.fromDom)},is:function(t,e){var n=t.dom();if(n.nodeType!==st)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},one:function(t,e){var n=void 0===e?document:e.dom();return lt(n)?p.none():p.from(n.querySelector(t)).map(ot.fromDom)}},ft=function(t,e){var n=[],r=function(t){return n.push(t),e(t)},i=e(t);do{i=i.bind(r)}while(i.isSome());return n},dt="undefined"!=typeof window?window:Function("return this;")(),ht=function(t,e){return function(t,e){for(var n=void 0!==e&&null!==e?e:dt,r=0;r<t.length&&void 0!==n&&null!==n;++r)n=n[t[r]];return n}(t.split("."),e)},mt=function(t,e){var n=function(t,e){return ht(t,e)}(t,e);if(void 0===n||null===n)throw t+" not available on this browser";return n},gt=function(){return mt("Node")},pt=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},vt=function(t,e){return pt(t,e,gt().DOCUMENT_POSITION_CONTAINED_BY)},bt=function(t){var e,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,e=t.apply(null,r)),e}},yt=function(){return wt(0,0)},wt=function(t,e){return{major:t,minor:e}},xt={nu:wt,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?yt():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return wt(r(1),r(2))}(t,n)},unknown:yt},Ct=function(t,e){return function(){return e===t}},Rt=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Ct("Edge",e),isChrome:Ct("Chrome",e),isIE:Ct("IE",e),isOpera:Ct("Opera",e),isFirefox:Ct("Firefox",e),isSafari:Ct("Safari",e)}},St={unknown:function(){return Rt({current:void 0,version:xt.unknown()})},nu:Rt,edge:i("Edge"),chrome:i("Chrome"),ie:i("IE"),opera:i("Opera"),firefox:i("Firefox"),safari:i("Safari")},Tt=function(t,e){return function(){return e===t}},_t=function(t){var e=t.current;return{current:e,version:t.version,isWindows:Tt("Windows",e),isiOS:Tt("iOS",e),isAndroid:Tt("Android",e),isOSX:Tt("OSX",e),isLinux:Tt("Linux",e),isSolaris:Tt("Solaris",e),isFreeBSD:Tt("FreeBSD",e)}},kt={unknown:function(){return _t({current:void 0,version:xt.unknown()})},nu:_t,windows:i("Windows"),ios:i("iOS"),android:i("Android"),linux:i("Linux"),osx:i("OSX"),solaris:i("Solaris"),freebsd:i("FreeBSD")},Et=function(t,e){var n=String(e).toLowerCase();return O(t,function(t){return t.search(n)})},Nt=function(t,e){return Et(t,e).map(function(t){var n=xt.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Dt=function(t,e){return Et(t,e).map(function(t){var n=xt.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Ot=function(t,e){return-1!==t.indexOf(e)},At=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mt=function(t){return function(e){return Ot(e,t)}},Pt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Ot(t,"edge/")&&Ot(t,"chrome")&&Ot(t,"safari")&&Ot(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,At],search:function(t){return Ot(t,"chrome")&&!Ot(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Ot(t,"msie")||Ot(t,"trident")}},{name:"Opera",versionRegexes:[At,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mt("firefox")},{name:"Safari",versionRegexes:[At,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Ot(t,"safari")||Ot(t,"mobile/"))&&Ot(t,"applewebkit")}}],Bt=[{name:"Windows",search:Mt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Ot(t,"iphone")||Ot(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Mt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mt("linux"),versionRegexes:[]},{name:"Solaris",search:Mt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mt("freebsd"),versionRegexes:[]}],Ht={browsers:i(Pt),oses:i(Bt)},It=function(t){var e=Ht.browsers(),n=Ht.oses(),r=Nt(e,t).fold(St.unknown,St.nu),o=Dt(n,t).fold(kt.unknown,kt.nu);return{browser:r,os:o,deviceType:function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,u=r||a||s&&!0===/mobile/i.test(n),l=t.isiOS()||t.isAndroid(),c=l&&!u,f=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:i(r),isiPhone:i(o),isTablet:i(u),isPhone:i(c),isTouch:i(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:i(f)}}(o,r,t)}},Wt={detect:bt(function(){var t=navigator.userAgent;return It(t)})},Lt=function(t,e){return t.dom()===e.dom()},zt=Wt.detect().browser.isIE()?function(t,e){return vt(t.dom(),e.dom())}:function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},Ft={eq:Lt,isEqualNode:function(t,e){return t.dom().isEqualNode(e.dom())},member:function(t,e){return T(e,a(Lt,t))},contains:zt,is:ct.is},Ut=function(t){var e=t.dom();return p.from(e.parentNode).map(ot.fromDom)},qt=function(t){var e=t.dom();return p.from(e.previousSibling).map(ot.fromDom)},Vt=function(t){var e=t.dom();return p.from(e.nextSibling).map(ot.fromDom)},jt=function(t){var e=t.dom();return _(e.childNodes,ot.fromDom)},Yt=function(t,e){var n=t.dom().childNodes;return p.from(n[e]).map(ot.fromDom)},$t=V("element","offset"),Xt={owner:function(t){return ot.fromDom(t.dom().ownerDocument)},defaultView:function(t){var e=t.dom().ownerDocument.defaultView;return ot.fromDom(e)},documentElement:function(t){return ot.fromDom(t.dom().ownerDocument.documentElement)},parent:Ut,findIndex:function(t){return Ut(t).bind(function(e){var n=jt(e);return A(n,function(e){return Ft.eq(t,e)})})},parents:function(t,e){for(var n=x(e)?e:i(!1),r=t.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var a=r.parentNode,s=ot.fromDom(a);if(o.push(s),!0===n(s))break;r=a}return o},siblings:function(t){return Ut(t).map(jt).map(function(e){return E(e,function(e){return!Ft.eq(t,e)})}).getOr([])},prevSibling:qt,offsetParent:function(t){var e=t.dom();return p.from(e.offsetParent).map(ot.fromDom)},prevSiblings:function(t){return L(ft(t,qt))},nextSibling:Vt,nextSiblings:function(t){return ft(t,Vt)},children:jt,child:Yt,firstChild:function(t){return Yt(t,0)},lastChild:function(t){return Yt(t,t.dom().childNodes.length-1)},childNodesCount:function(t){return t.dom().childNodes.length},hasChildNodes:function(t){return t.dom().hasChildNodes()},leaf:function(t,e){var n=jt(t);return n.length>0&&e<n.length?$t(n[e],0):$t(t,e)}},Gt=function(t,e,n){return H(Xt.children(t),function(t){return ct.is(t,e)?n(t)?[t]:[]:Gt(t,e,n)})},Jt={firstLayer:function(t,e){return Gt(t,e,i(!0))},filterFirstLayer:Gt},Kt=function(t){return t.dom().nodeName.toLowerCase()},Zt=function(t){return t.dom().nodeType},Qt=function(t){return function(e){return Zt(e)===t}},te=Qt(at.ELEMENT),ee=Qt(at.TEXT),ne=Qt(at.DOCUMENT),re={name:Kt,type:Zt,value:function(t){return t.dom().nodeValue},isElement:te,isText:ee,isDocument:ne,isComment:function(t){return Zt(t)===at.COMMENT||"#comment"===Kt(t)}},ie=function(t,e,n){if(!(b(n)||w(n)||C(n)))throw console.error("Invalid call to Attr.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},oe=function(t,e,n){ie(t.dom(),e,n)},ae=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},se=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ue={clone:function(t){return D(t.dom().attributes,function(t,e){return t[e.name]=e.value,t},{})},set:oe,setAll:function(t,e){var n=t.dom();F(e,function(t,e){ie(n,e,t)})},get:ae,has:se,remove:function(t,e){t.dom().removeAttribute(e)},hasNone:function(t){var e=t.dom().attributes;return void 0===e||null===e||0===e.length},transfer:function(t,e,n){re.isElement(t)&&re.isElement(e)&&k(n,function(n){!function(t,e,n){se(t,n)&&!se(e,n)&&oe(e,n,ae(t,n))}(t,e,n)})}},le=bt(function(){return ce(ot.fromDom(document))}),ce=function(t){var e=t.dom().body;if(null===e||void 0===e)throw"Body is not available yet";return ot.fromDom(e)},fe={body:le,getBody:ce,inBody:function(t){var e=re.isText(t)?t.dom().parentNode:t.dom();return void 0!==e&&null!==e&&e.ownerDocument.body.contains(e)}},de=function(t,e){var n=[];return k(Xt.children(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(de(t,e))}),n},he={all:function(t){return de(fe.body(),t)},ancestors:function(t,e,n){return E(Xt.parents(t,n),e)},siblings:function(t,e){return E(Xt.siblings(t),e)},children:function(t,e){return E(Xt.children(t),e)},descendants:de},me={all:function(t){return ct.all(t)},ancestors:function(t,e,n){return he.ancestors(t,function(t){return ct.is(t,e)},n)},siblings:function(t,e){return he.siblings(t,function(t){return ct.is(t,e)})},children:function(t,e){return he.children(t,function(t){return ct.is(t,e)})},descendants:function(t,e){return ct.all(e,t)}};function ge(t,e,n,r,i){return t(n,r)?p.some(n):x(i)&&i(n)?p.none():e(n,r,i)}var pe=function(t,e,n){for(var r=t.dom(),o=x(n)?n:i(!1);r.parentNode;){r=r.parentNode;var a=ot.fromDom(r);if(e(a))return p.some(a);if(o(a))break}return p.none()},ve=function(t,e){return O(t.dom().childNodes,r(e,ot.fromDom)).map(ot.fromDom)},be=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){if(e(ot.fromDom(t.childNodes[r])))return p.some(ot.fromDom(t.childNodes[r]));var i=n(t.childNodes[r]);if(i.isSome())return i}return p.none()};return n(t.dom())},ye={first:function(t){return be(fe.body(),t)},ancestor:pe,closest:function(t,e,n){return ge(function(t){return e(t)},pe,t,e,n)},sibling:function(t,e){var n=t.dom();return n.parentNode?ve(ot.fromDom(n.parentNode),function(n){return!Ft.eq(t,n)&&e(n)}):p.none()},child:ve,descendant:be},we=function(t,e,n){return ye.ancestor(t,function(t){return ct.is(t,e)},n)},xe={first:function(t){return ct.one(t)},ancestor:we,sibling:function(t,e){return ye.sibling(t,function(t){return ct.is(t,e)})},child:function(t,e){return ye.child(t,function(t){return ct.is(t,e)})},descendant:function(t,e){return ct.one(e,t)},closest:function(t,e,n){return ge(ct.is,we,t,e,n)}},Ce=function(t,e,n){var r=void 0!==n?n:i(!1);return r(e)?p.none():S(t,re.name(e))?p.some(e):xe.ancestor(e,t.join(","),function(t){return ct.is(t,"table")||r(t)})},Re=function(t,e){return Xt.parent(e).map(function(e){return me.children(e,t)})},Se=function(t,e){return parseInt(ue.get(t,e),10)},Te={cell:function(t,e){return Ce(["td","th"],t,e)},firstCell:function(t){return xe.descendant(t,"th,td")},cells:function(t){return Jt.firstLayer(t,"th,td")},neighbourCells:a(Re,"th,td"),table:function(t,e){return xe.closest(t,"table",e)},row:function(t,e){return Ce(["tr"],t,e)},rows:function(t){return Jt.firstLayer(t,"tr")},notCell:function(t,e){return Ce(["caption","tr","tbody","tfoot","thead"],t,e)},neighbourRows:a(Re,"tr"),attr:Se,grid:function(t,e,n){var r=Se(t,e),i=Se(t,n);return rt.grid(r,i)}},_e=function(t){var e=Te.rows(t);return _(e,function(t){var e=t,n=Xt.parent(e).map(function(t){var e=re.name(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}).getOr("tbody"),r=_(Te.cells(t),function(t){var e=ue.has(t,"rowspan")?parseInt(ue.get(t,"rowspan"),10):1,n=ue.has(t,"colspan")?parseInt(ue.get(t,"colspan"),10):1;return rt.detail(t,e,n)});return rt.rowdata(e,r,n)})},ke=function(t,e){return _(t,function(t){var n=_(Te.cells(t),function(t){var e=ue.has(t,"rowspan")?parseInt(ue.get(t,"rowspan"),10):1,n=ue.has(t,"colspan")?parseInt(ue.get(t,"colspan"),10):1;return rt.detail(t,e,n)});return rt.rowdata(t,n,e.section())})},Ee=function(t,e){return t+","+e},Ne=function(t,e){var n=H(t.all(),function(t){return t.cells()});return E(n,e)},De={generate:function(t){var e={},n=[],r=t.length,o=0;k(t,function(t,r){var i=[];k(t.cells(),function(t,n){for(var a=0;void 0!==e[Ee(r,a)];)a++;for(var s=rt.extended(t.element(),t.rowspan(),t.colspan(),r,a),u=0;u<t.colspan();u++)for(var l=0;l<t.rowspan();l++){var c=a+u,f=Ee(r+l,c);e[f]=s,o=Math.max(o,c+1)}i.push(s)}),n.push(rt.rowdata(t.element(),i,t.section()))});var a=rt.grid(r,o);return{grid:i(a),access:i(e),all:i(n)}},getAt:function(t,e,n){var r=t.access()[Ee(e,n)];return void 0!==r?p.some(r):p.none()},findItem:function(t,e,n){var r=Ne(t,function(t){return n(e,t.element())});return r.length>0?p.some(r[0]):p.none()},filterItems:Ne,justCells:function(t){var e=_(t.all(),function(t){return t.cells()});return B(e)}},Oe={isSupported:function(t){return void 0!==t.style}},Ae=function(t,e,n){if(!b(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Oe.isSupported(t)&&t.style.setProperty(e,n)},Me=function(t,e){Oe.isSupported(t)&&t.style.removeProperty(e)},Pe=function(t,e,n){var r=t.dom();Ae(r,e,n)},Be=function(t,e){return Oe.isSupported(t)?t.style.getPropertyValue(e):""},He=function(t,e){var n=t.dom(),r=Be(n,e);return p.from(r).filter(function(t){return t.length>0})},Ie={copy:function(t,e){var n=t.dom(),r=e.dom();Oe.isSupported(n)&&Oe.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:Pe,preserve:function(t,e){var n=ue.get(t,"style"),r=e(t);return(void 0===n?ue.remove:ue.set)(t,"style",n),r},setAll:function(t,e){var n=t.dom();F(e,function(t,e){Ae(n,e,t)})},setOptions:function(t,e){var n=t.dom();F(e,function(t,e){t.fold(function(){Me(n,e)},function(t){Ae(n,e,t)})})},remove:function(t,e){var n=t.dom();Me(n,e),ue.has(t,"style")&&""===ue.get(t,"style").replace(/^\s+|\s+$/g,"")&&ue.remove(t,"style")},get:function(t,e){var n=t.dom(),r=window.getComputedStyle(n).getPropertyValue(e),i=""!==r||fe.inBody(t)?r:Be(n,e);return null===i?void 0:i},getRaw:He,getAllRaw:function(t){var e={},n=t.dom();if(Oe.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);e[i]=n.style[i]}return e},isValidValue:function(t,e,n){var r=ot.fromTag(t);return Pe(r,e,n),He(r,e).isSome()},reflow:function(t){return t.dom().offsetWidth},transfer:function(t,e,n){re.isElement(t)&&re.isElement(e)&&k(n,function(n){!function(t,e,n){He(t,n).each(function(t){He(e,n).isNone()&&Pe(e,n,t)})}(t,e,n)})}},We=function(t,e){Xt.parent(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})},Le=function(t,e){t.dom().appendChild(e.dom())},ze={before:We,after:function(t,e){Xt.nextSibling(t).fold(function(){Xt.parent(t).each(function(t){Le(t,e)})},function(t){We(t,e)})},prepend:function(t,e){Xt.firstChild(t).fold(function(){Le(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},append:Le,appendAt:function(t,e,n){Xt.child(t,n).fold(function(){Le(t,e)},function(t){We(t,e)})},wrap:function(t,e){We(t,e),Le(e,t)}},Fe={before:function(t,e){k(e,function(e){ze.before(t,e)})},after:function(t,e){k(e,function(n,r){var i=0===r?t:e[r-1];ze.after(i,n)})},prepend:function(t,e){k(e.slice().reverse(),function(e){ze.prepend(t,e)})},append:function(t,e){k(e,function(e){ze.append(t,e)})}},Ue=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},qe={empty:function(t){t.dom().textContent="",k(Xt.children(t),function(t){Ue(t)})},remove:Ue,unwrap:function(t){var e=Xt.children(t);e.length>0&&Fe.before(t,e),Ue(t)}},Ve=V("minRow","minCol","maxRow","maxCol"),je=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),i=n,o=0,a=0;return F(t.access(),function(t){if(e(t)){var n=t.row(),s=n+t.rowspan()-1,u=t.column(),l=u+t.colspan()-1;n<r?r=n:s>o&&(o=s),u<i?i=u:l>a&&(a=l)}}),Ve(r,i,o,a)},Ye=function(t,e,n){var r=t[n].element(),i=ot.fromTag("td");ze.append(i,ot.fromTag("br")),(e?ze.append:ze.prepend)(r,i)},$e=function(t,e){var n=function(t){return ct.is(t.element(),e)},r=_e(t),i=De.generate(r),o=je(i,n),a="th:not("+e+"),td:not("+e+")",s=Jt.filterFirstLayer(t,"th,td",function(t){return ct.is(t,a)});return k(s,qe.remove),function(t,e,n,r){for(var i=e.grid().columns(),o=e.grid().rows(),a=0;a<o;a++)for(var s=!1,u=0;u<i;u++)a<n.minRow()||a>n.maxRow()||u<n.minCol()||u>n.maxCol()||(De.getAt(e,a,u).filter(r).isNone()?Ye(t,s,a):s=!0)}(r,i,o,n),function(t,e){var n=E(Jt.firstLayer(t,"tr"),function(t){return 0===t.dom().childElementCount});k(n,qe.remove),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||k(Jt.firstLayer(t,"th,td"),function(t){ue.remove(t,"rowspan"),ue.remove(t,"colspan")}),ue.remove(t,"width"),ue.remove(t,"height"),Ie.remove(t,"width"),Ie.remove(t,"height")}(t,o),t},Xe=function(t,e){return ot.fromDom(t.dom().cloneNode(e))},Ge=function(t){return Xe(t,!0)},Je=function(t,e){var n=ot.fromTag(e),r=ue.clone(t);return ue.setAll(n,r),n},Ke=function(t){return Xe(t,!1)},Ze=Ge,Qe=function(t,e){var n=Je(t,e),r=Xt.children(Ge(t));return Fe.append(n,r),n},tn=function(t,e){var n=function(e){return t(e)?p.from(e.dom().nodeValue):p.none()},r=Wt.detect().browser,i=r.isIE()&&10===r.version.major?function(t){try{return n(t)}catch(t){return p.none()}}:n;return{get:function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return i(n).getOr("")},getOption:i,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(re.isText,"text"),en={get:function(t){return tn.get(t)},getOption:function(t){return tn.getOption(t)},set:function(t,e){tn.set(t,e)}},nn=function(t){return"img"===re.name(t)?1:en.getOption(t).fold(function(){return Xt.children(t).length},function(t){return t.length})},rn=["img","br"],on=nn,an=function(t){var e;return e=t,en.getOption(e).filter(function(t){return 0!==t.trim().length||t.indexOf(" ")>-1}).isSome()||S(rn,re.name(t))},sn=function(t,e){var n=function(t){for(var r=Xt.children(t),i=r.length-1;i>=0;i--){var o=r[i];if(e(o))return p.some(o);var a=n(o);if(a.isSome())return a}return p.none()};return n(t)},un={first:function(t){return ye.descendant(t,an)},last:function(t){return sn(t,an)}},ln=function(){var t=ot.fromTag("td");return ze.append(t,ot.fromTag("br")),t},cn=function(t,e,n){var r=Qe(t,e);return F(n,function(t,e){null===t?ue.remove(r,e):ue.set(r,e,t)}),r},fn=function(t){return t},dn=function(t){return function(){return ot.fromTag("tr",t.dom())}},hn=function(t,e,n){return{row:dn(e),cell:function(e){var r=Xt.owner(e.element()),i=ot.fromTag(re.name(e.element()),r.dom()),o=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=o.length>0?function(t,e,n){return un.first(t).map(function(r){var i=n.join(","),o=me.ancestors(r,i,function(e){return Ft.eq(e,t)});return N(o,function(t,e){var n=Ke(e);return ue.remove(n,"contenteditable"),ze.append(t,n),n},e)}).getOr(e)}(e.element(),i,o):i;return ze.append(a,ot.fromTag("br")),Ie.copy(e.element(),i),Ie.remove(i,"height"),1!==e.colspan()&&Ie.remove(e.element(),"width"),t(e.element(),i),i},replace:cn,gap:ln}},mn=function(t){return{row:dn(t),cell:ln,replace:fn,gap:ln}},gn=function(t,e){var n=(e||document).createElement("div");return n.innerHTML=t,Xt.children(ot.fromDom(n))},pn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function vn(){return{up:i({selector:xe.ancestor,closest:xe.closest,predicate:ye.ancestor,all:Xt.parents}),down:i({selector:me.descendants,predicate:he.descendants}),styles:i({get:Ie.get,getRaw:Ie.getRaw,set:Ie.set,remove:Ie.remove}),attrs:i({get:ue.get,set:ue.set,remove:ue.remove,copyTo:function(t,e){var n=ue.clone(t);ue.setAll(e,n)}}),insert:i({before:ze.before,after:ze.after,afterAll:Fe.after,append:ze.append,appendAll:Fe.append,prepend:ze.prepend,wrap:ze.wrap}),remove:i({unwrap:qe.unwrap,remove:qe.remove}),create:i({nu:ot.fromTag,clone:function(t){return ot.fromDom(t.dom().cloneNode(!1))},text:ot.fromText}),query:i({comparePosition:function(t,e){return t.dom().compareDocumentPosition(e.dom())},prevSibling:Xt.prevSibling,nextSibling:Xt.nextSibling}),property:i({children:Xt.children,name:re.name,parent:Xt.parent,isText:re.isText,isComment:re.isComment,isElement:re.isElement,getText:en.get,setText:en.set,isBoundary:function(t){return!!re.isElement(t)&&("body"===re.name(t)||S(pn,re.name(t)))},isEmptyTag:function(t){return!!re.isElement(t)&&S(["br","img","hr","input"],re.name(t))}}),eq:Ft.eq,is:Ft.is}}var bn=V("left","right"),yn=function(t,e,n){var r=t.property().children(e);return A(r,a(t.eq,n)).map(function(t){return{before:i(r.slice(0,t)),after:i(r.slice(t+1))}})},wn=function(t,e,n){return yn(t,e,n).map(function(r){var i=t.create().clone(e);return t.insert().appendAll(i,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,i),bn(i,e)})},xn=function(t,e,n){return yn(t,e,n).map(function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),bn(e,r)})},Cn=function(t,e,n,r){var i=V("first","second","splits"),o=function(e,a,s){var u=i(e,p.none(),s);return n(e)?i(e,a,s):t.property().parent(e).bind(function(i){return r(t,i,e).map(function(t){var e=[{first:t.left,second:t.right}],r=n(i)?i:t.left();return o(r,p.some(t.right()),s.concat(e))}).getOr(u)})};return o(e,p.none(),[])},Rn=function(t,e,n,r){var i=e(t,n);return N(r,function(n,r){var i=e(t,r);return Sn(t,n,i)},i)},Sn=function(t,e,n){return e.bind(function(e){return n.filter(a(t.eq,e))})},Tn=function(t,e,n){return n.length>0?function(t,e,n,r){return r(t,e,n[0],n.slice(1))}(t,e,n,Rn):p.none()},_n=function(t,e){return a(t.eq,e)},kn=function(t,e,n,r){var o=void 0!==r?r:i(!1),a=[e].concat(t.up().all(e)),s=[n].concat(t.up().all(n)),u=function(t){return A(t,o).fold(function(){return t},function(e){return t.slice(0,e+1)})},l=u(a),c=u(s),f=O(l,function(e){return T(c,_n(t,e))});return{firstpath:i(l),secondpath:i(c),shared:i(f)}},En=function(t,e,n){var r=kn(t,e,n);return r.shared().bind(function(e){return function(t,e,n,r){var i=t.property().children(e);if(t.eq(e,n[0]))return p.some([n[0]]);if(t.eq(e,r[0]))return p.some([r[0]]);var o=function(n){var r=L(n),o=A(r,_n(t,e)).getOr(-1),a=o<r.length-1?r[o+1]:r[o];return A(i,_n(t,a))},a=o(n),s=o(r);return a.bind(function(t){return s.map(function(e){var n=Math.min(t,e),r=Math.max(t,e);return i.slice(n,r+1)})})}(t,e,r.firstpath(),r.secondpath())})},Nn=kn,Dn=function(t,e,n){return Tn(t,e,n)},On=function(t,e,n){return En(t,e,n)},An=function(t,e,n,r){return Nn(t,e,n,r)},Mn=function(t,e,n){return wn(t,e,n)},Pn=function(t,e,n){return xn(t,e,n)},Bn=function(t,e,n,r){return Cn(t,e,n,r)},Hn=vn(),In={sharedOne:function(t,e){return Dn(Hn,function(e,n){return t(n)},e)},subset:function(t,e){return On(Hn,t,e)},ancestors:function(t,e,n){return An(Hn,t,e,n)},breakToLeft:function(t,e){return Mn(Hn,t,e)},breakToRight:function(t,e){return Pn(Hn,t,e)},breakPath:function(t,e,n){return Bn(Hn,t,e,function(t,e,r){return n(e,r)})}},Wn=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},Ln=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,i=e.row(),o=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&i<=t.finishRow()&&o>=t.startRow()},zn=function(t,e){for(var n=!0,r=a(Wn,e),i=e.startRow();i<=e.finishRow();i++)for(var o=e.startCol();o<=e.finishCol();o++)n=n&&De.getAt(t,i,o).exists(r);return n?p.some(e):p.none()},Fn=function(t,e,n){var r=De.findItem(t,e,Ft.eq),i=De.findItem(t,n,Ft.eq);return r.bind(function(t){return i.map(function(e){return n=t,r=e,rt.bounds(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r})})},Un=Fn,qn=function(t,e,n){return Fn(t,e,n).bind(function(e){return zn(t,e)})},Vn=function(t,e,n,r){return De.findItem(t,e,Ft.eq).bind(function(e){var i=n>0?e.row()+e.rowspan()-1:e.row(),o=r>0?e.column()+e.colspan()-1:e.column();return De.getAt(t,i+n,o+r).map(function(t){return t.element()})})},jn=function(t,e,n){return Un(t,e,n).map(function(e){var n=De.filterItems(t,a(Ln,e));return _(n,function(t){return t.element()})})},Yn=function(t,e){return De.findItem(t,e,function(t,e){return Ft.contains(e,t)}).bind(function(t){return t.element()})},$n=function(t){var e=_e(t);return De.generate(e)},Xn=function(t,e,n){return Te.table(t).bind(function(r){var i=$n(r);return Vn(i,t,e,n)})},Gn=function(t,e,n){var r=$n(t);return jn(r,e,n)},Jn=function(t,e,n,r,i){var o=$n(t),a=Ft.eq(t,n)?e:Yn(o,e),s=Ft.eq(t,i)?r:Yn(o,r);return jn(o,a,s)},Kn=function(t,e,n){var r=$n(t);return qn(r,e,n)},Zn=function(t,e){return xe.ancestor(t,"table")},Qn=J(["boxes","start","finish"],[]),tr=function(t,e,n){var r=function(t){return function(e){return n(e)||Ft.eq(e,t)}};return Ft.eq(t,e)?p.some(Qn({boxes:p.some([t]),start:t,finish:e})):Zn(t).bind(function(i){return Zn(e).bind(function(o){if(Ft.eq(i,o))return p.some(Qn({boxes:Gn(i,t,e),start:t,finish:e}));if(Ft.contains(i,o)){var a=(s=me.ancestors(e,"td,th",r(i))).length>0?s[s.length-1]:e;return p.some(Qn({boxes:Jn(i,t,i,e,o),start:t,finish:a}))}if(Ft.contains(o,i)){var s,u=(s=me.ancestors(t,"td,th",r(o))).length>0?s[s.length-1]:t;return p.some(Qn({boxes:Jn(o,t,i,e,o),start:t,finish:u}))}return In.ancestors(t,e).shared().bind(function(a){return xe.closest(a,"table",n).bind(function(n){var a=me.ancestors(e,"td,th",r(n)),s=a.length>0?a[a.length-1]:e,u=me.ancestors(t,"td,th",r(n)),l=u.length>0?u[u.length-1]:t;return p.some(Qn({boxes:Jn(n,t,i,e,o),start:l,finish:s}))})})})})},er={identify:tr,retrieve:function(t,e){var n=me.descendants(t,e);return n.length>0?p.some(n):p.none()},shiftSelection:function(t,e,n,r,o){return function(t,e){return O(t,function(t){return ct.is(t,e)})}(t,o).bind(function(t){return Xn(t,e,n).bind(function(t){return function(t,e){return xe.ancestor(t,"table").bind(function(n){return xe.descendant(n,e).bind(function(e){return tr(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:i(e),start:i(t.start()),finish:i(t.finish())}})})})})}(t,r)})})},getEdges:function(t,e,n){return xe.descendant(t,e).bind(function(e){return xe.descendant(t,n).bind(function(t){return In.sharedOne(Zn,[e,t]).map(function(n){return{first:i(e),last:i(t),table:i(n)}})})})}},nr=function(t,e){return er.retrieve(t,e)},rr=function(t,e,n){return er.getEdges(t,e,n).bind(function(e){var n=function(e){return Ft.eq(t,e)},r=xe.ancestor(e.first(),"thead,tfoot,tbody,table",n),i=xe.ancestor(e.last(),"thead,tfoot,tbody,table",n);return r.bind(function(t){return i.bind(function(n){return Ft.eq(t,n)?Kn(e.table(),e.first(),e.last()):p.none()})})})},ir="data-mce-selected",or={selected:i(ir),selectedSelector:i("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:i("[data-mce-selected]"),firstSelected:i("data-mce-first-selected"),firstSelectedSelector:i("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:i("data-mce-last-selected"),lastSelectedSelector:i("td[data-mce-last-selected],th[data-mce-last-selected]")},ar=function(t){if(!y(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return k(t,function(r,i){var o=z(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!y(s))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(t){var n=z(t);if(e.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+n.join(","));if(!I(e,function(t){return S(n,t)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,r)},log:function(t){console.log(t,{constructors:e,constructor:a,params:r})}}}}),n},sr=ar([{none:[]},{multiple:["elements"]},{single:["selection"]}]),ur={cata:function(t,e,n,r){return t.fold(e,n,r)},none:sr.none,multiple:sr.multiple,single:sr.single},lr=function(t,e){return ur.cata(e.get(),i([]),o,i([t]))},cr=function(t,e){return ur.cata(e.get(),p.none,function(e,n){return 0===e.length?p.none():rr(t,or.firstSelectedSelector(),or.lastSelectedSelector()).bind(function(t){return e.length>1?p.some({bounds:i(t),cells:i(e)}):p.none()})},p.none)},fr=function(t,e){var n=lr(t,e);return n.length>0&&I(n,function(t){return ue.has(t,"rowspan")&&parseInt(ue.get(t,"rowspan"),10)>1||ue.has(t,"colspan")&&parseInt(ue.get(t,"colspan"),10)>1})?p.some(n):p.none()},dr=lr,hr=function(t){return{element:i(t),mergable:p.none,unmergable:p.none,selection:i([t])}},mr=V("element","clipboard","generators"),gr={noMenu:hr,forMenu:function(t,e,n){return{element:i(n),mergable:i(cr(e,t)),unmergable:i(fr(n,t)),selection:i(dr(n,t))}},notCell:function(t){return hr(t)},paste:mr,pasteRows:function(t,e,n,r,o){return{element:i(n),mergable:p.none,unmergable:p.none,selection:i(dr(n,t)),clipboard:i(r),generators:i(o)}}},pr={registerEvents:function(t,e,r,i){t.on("BeforeGetContent",function(r){!0===r.selection&&ur.cata(e.get(),n,function(e){r.preventDefault(),function(t){return Te.table(t[0]).map(Ze).map(function(t){return[$e(t,or.attributeSelector())]})}(e).each(function(e){r.content=_(e,function(e){return function(t,e){return t.selection.serializer.serialize(e.dom(),{})}(t,e)}).join("")})},n)}),t.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&p.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(n){var o=ot.fromDom(n);Te.table(o).bind(function(n){var a=E(gn(e.content),function(t){return"meta"!==re.name(t)});if(1===a.length&&"table"===re.name(a[0])){e.preventDefault();var s=ot.fromDom(t.getDoc()),u=mn(s),l=gr.paste(o,a[0],u);r.pasteCells(n,l).each(function(e){t.selection.setRng(e),t.focus(),i.clear(n)})}})})})}};function vr(t,e){var n=function(n){var r=e(n);if(r<=0||null===r){var i=Ie.get(n,t);return parseFloat(i)||0}return r},r=function(t,e){return D(e,function(e,n){var r=Ie.get(t,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?e:e+i},0)};return{set:function(e,n){if(!C(n)&&!n.match(/^[0-9]+$/))throw t+".set accepts only positive integer values. Value was "+n;var r=e.dom();Oe.isSupported(r)&&(r.style[t]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(t,e,n){var i=r(t,n);return e>i?e-i:0}}}var br=vr("height",function(t){var e=t.dom();return fe.inBody(t)?e.getBoundingClientRect().height:e.offsetHeight}),yr=function(t){return br.get(t)},wr=function(t){return br.getOuter(t)},xr=vr("width",function(t){return t.dom().offsetWidth}),Cr=function(t){return xr.get(t)},Rr=function(t){return xr.getOuter(t)},Sr=Wt.detect(),Tr=function(t,e,n){return function(t,e){var n=parseFloat(t);return isNaN(n)?e:n}(Ie.get(t,e),n)},_r=function(t){return Sr.browser.isIE()||Sr.browser.isEdge()?function(t){var e=Tr(t,"padding-top",0),n=Tr(t,"padding-bottom",0),r=Tr(t,"border-top-width",0),i=Tr(t,"border-bottom-width",0),o=t.dom().getBoundingClientRect().height;return"border-box"===Ie.get(t,"box-sizing")?o:o-e-n-(r+i)}(t):Tr(t,"height",yr(t))},kr=/(\d+(\.\d+)?)(\w|%)*/,Er=/(\d+(\.\d+)?)%/,Nr=/(\d+(\.\d+)?)px|em/,Dr=function(t,e){Ie.set(t,"height",e+"px")},Or=function(t,e,n,r){var i,o,a=parseInt(t,10);return function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e}(i=t,o="%",i.length-o.length)&&"table"!==re.name(e)?function(t,e,n,r){var i=Te.table(t).map(function(t){var r=n(t);return Math.floor(e/100*r)}).getOr(e);return r(t,i),i}(e,a,n,r):a},Ar=function(t){var e=function(t){return Ie.getRaw(t,"height").getOrThunk(function(){return _r(t)+"px"})}(t);return e?Or(e,t,yr,Dr):yr(t)},Mr=function(t,e){return ue.has(t,e)?parseInt(ue.get(t,e),10):1},Pr=function(t){return Ie.getRaw(t,"width").fold(function(){return p.from(ue.get(t,"width"))},function(t){return p.some(t)})},Br=function(t,e){return t/e.pixelWidth()*100},Hr={percentageBasedSizeRegex:i(Er),pixelBasedSizeRegex:i(Nr),setPixelWidth:function(t,e){Ie.set(t,"width",e+"px")},setPercentageWidth:function(t,e){Ie.set(t,"width",e+"%")},setHeight:Dr,getPixelWidth:function(t,e){return Pr(t).fold(function(){return Cr(t)},function(n){return function(t,e,n){if(Nr.test(e)){var r=Nr.exec(e);return parseInt(r[1],10)}if(Er.test(e)){var i=Er.exec(e);return function(t,e){return t/100*e.pixelWidth()}(parseFloat(i[1]),n)}return Cr(t)}(t,n,e)})},getPercentageWidth:function(t,e){return Pr(t).fold(function(){var n=Cr(t);return Br(n,e)},function(n){return function(t,e,n){if(Er.test(e)){var r=Er.exec(e);return parseFloat(r[1])}var i=Cr(t);return Br(i,n)}(t,n,e)})},getGenericWidth:function(t){return Pr(t).bind(function(t){if(kr.test(t)){var e=kr.exec(t);return p.some({width:i(e[1]),unit:i(e[3])})}return p.none()})},setGenericWidth:function(t,e,n){Ie.set(t,"width",e+n)},getHeight:function(t){return function(t,e,n){return n(t)/Mr(t,e)}(t,"rowspan",Ar)},getRawWidth:Pr},Ir=function(t,e){Hr.getGenericWidth(t).each(function(n){var r=n.width()/2;Hr.setGenericWidth(t,r,n.unit()),Hr.setGenericWidth(e,r,n.unit())})},Wr=function(t,e){var n=e||ot.fromDom(document.documentElement);return ye.ancestor(t,a(Ft.eq,n)).isSome()},Lr=function(t){var e=t.dom();return e===e.window&&t instanceof Window?t:re.isDocument(t)?e.defaultView||e.parentWindow:null},zr=function(t,e){return{left:i(t),top:i(e),translate:function(n,r){return zr(t+n,e+r)}}},Fr=zr,Ur=function(t,e){return void 0!==t?t:void 0!==e?e:0},qr=function(t){var e=t.dom(),n=e.ownerDocument,r=n.body,i=ot.fromDom(n.documentElement);return r===e?Fr(r.offsetLeft,r.offsetTop):Wr(t,i)?function(t){var e=t.getBoundingClientRect();return Fr(e.left,e.top)}(e):Fr(0,0)},Vr=function(t){var e=t.dom().ownerDocument,n=e.body,r=Lr(ot.fromDom(e)),i=e.documentElement,o=Ur(r.pageYOffset,i.scrollTop),a=Ur(r.pageXOffset,i.scrollLeft),s=Ur(i.clientTop,n.clientTop),u=Ur(i.clientLeft,n.clientLeft);return qr(t).translate(a-u,o-s)},jr=V("row","y"),Yr=V("col","x"),$r=function(t){return Vr(t).left()+Rr(t)},Xr=function(t){return Vr(t).left()},Gr=function(t,e){return Yr(t,Xr(e))},Jr=function(t,e){return Yr(t,$r(e))},Kr=function(t){return Vr(t).top()},Zr=function(t,e,n){if(0===n.length)return[];var r=_(n.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),i=n[n.length-1].map(function(t){return e(n.length-1,t)});return r.concat([i])},Qr={delta:o,positions:a(Zr,function(t,e){return jr(t,Kr(e))},function(t,e){return jr(t,Kr(e)+wr(e))}),edge:Kr},ti={delta:o,edge:Xr,positions:a(Zr,Gr,Jr)},ei={height:Qr,rtl:{delta:function(t,e){return-t},edge:$r,positions:a(Zr,Jr,Gr)},ltr:ti},ni={ltr:ei.ltr,rtl:ei.rtl};function ri(t){var e=function(e){return t(e).isRtl()?ni.rtl:ni.ltr};return{delta:function(t,n){return e(n).delta(t,n)},edge:function(t){return e(t).edge(t)},positions:function(t,n){return e(n).positions(t,n)}}}var ii,oi=function(t){var e=_e(t);return De.generate(e).grid()},ai=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return ai(n())}}},si=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return X("required",e),G(e),function(r){var i=z(r);I(e,function(t){return S(i,t)})||Y(e,i),t(e,i);var o=E(e,function(t){return!n.validate(r[t],t)});return o.length>0&&function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+j(t).join(", ")+") were not.")}(o,n.label),r}},ui=function(t,e){var n=E(e,function(e){return!S(t,e)});n.length>0&&$(n)},li=function(t){return function(t,e){return si(t,e,{validate:x,label:"function"})}(ui,t)},ci=function(t){var e=ue.has(t,"colspan")?parseInt(ue.get(t,"colspan"),10):1,n=ue.has(t,"rowspan")?parseInt(ue.get(t,"rowspan"),10):1;return{element:i(t),colspan:i(e),rowspan:i(n)}},fi=li(["cell","row","replace","gap"]),di=function(t,e){fi(t);var n=ai(p.none()),r=void 0!==e?e:ci,i=function(e){return function(e){return t.cell(e)}(r(e))},o=function(t){var e=i(t);return n.get().isNone()&&n.set(p.some(e)),a=p.some({item:t,replacement:e}),e},a=p.none();return{getOrInit:function(t,e){return a.fold(function(){return o(t)},function(n){return e(t,n.item)?n.replacement:o(t)})},cursor:n.get}},hi=function(t,e){return function(n){var r=ai(p.none());fi(n);var i=[],o=function(o){var a=n.replace(o,e,{scope:t});return i.push({item:o,sub:a}),r.get().isNone()&&r.set(p.some(a)),a};return{replaceOrInit:function(t,e){return function(t,e){return O(i,function(n){return e(n.item,t)})}(t,e).fold(function(){return o(t)},function(n){return e(t,n.item)?n.sub:o(t)})},cursor:r.get}}},mi=function(t){fi(t);var e=ai(p.none());return{combine:function(n){return e.get().isNone()&&e.set(p.some(n)),function(){var e=t.cell({element:i(n),colspan:i(1),rowspan:i(1)});return Ie.remove(e,"width"),Ie.remove(n,"width"),e}},cursor:e.get}},gi=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],pi=function(t,e){var n=t.property().name(e);return S(gi,n)},vi=function(t,e){return S(["br","img","hr","input"],t.property().name(e))},bi=pi,yi=function(t,e){var n=t.property().name(e);return S(["ol","ul"],n)},wi=vi,xi=vn(),Ci=function(t){return bi(xi,t)},Ri=function(t){return yi(xi,t)},Si=function(t){return wi(xi,t)},Ti=function(t){var e,n=function(t){return"br"===re.name(t)},r=function(t){return un.last(t).bind(function(e){var r,i=(r=e,Xt.nextSibling(r).map(function(t){return!!Ci(t)||(Si(t)?"img"!==re.name(t):void 0)}).getOr(!1));return Xt.parent(e).map(function(r){return!0===i||(o=r,"li"===re.name(o)||ye.ancestor(o,Ri).isSome())||n(e)||Ci(r)&&!Ft.eq(t,r)?[]:[ot.fromTag("br")];var o})}).getOr([])},i=0===(e=H(t,function(t){var e=Xt.children(t);return function(t){return I(t,function(t){return n(t)||re.isText(t)&&0===en.get(t).trim().length})}(e)?[]:e.concat(r(t))})).length?[ot.fromTag("br")]:e;qe.empty(t[0]),Fe.append(t[0],i)},_i=Object.prototype.hasOwnProperty,ki=(ii=function(t,e){return e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var i=t[r];for(var o in i)_i.call(i,o)&&(n[o]=ii(n[o],i[o]))}return n}),Ei=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},Ni=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return p.none()},Di=function(t,e){return rt.rowcells(e,t.section())},Oi=function(t,e){return t.cells()[e]},Ai={addCell:function(t,e,n){var r=t.cells(),i=r.slice(0,e),o=r.slice(e),a=i.concat([n]).concat(o);return Di(t,a)},setCells:Di,mutateCell:function(t,e,n){t.cells()[e]=n},getCell:Oi,getCellElement:function(t,e){return Oi(t,e).element()},mapCells:function(t,e){var n=t.cells(),r=_(n,e);return rt.rowcells(r,t.section())},cellLength:function(t){return t.cells().length}},Mi=function(t,e){if(0===t.length)return 0;var n=t[0];return A(t,function(t){return!e(n.element(),t.element())}).fold(function(){return t.length},function(t){return t})},Pi=function(t,e,n,r){var o=function(t,e){return t[e]}(t,e).cells().slice(n),a=Mi(o,r),s=function(t,e){return _(t,function(t){return Ai.getCell(t,e)})}(t,n).slice(e),u=Mi(s,r);return{colspan:i(a),rowspan:i(u)}},Bi=function(t,e){var n=_(t,function(t,e){return _(t.cells(),function(t,e){return!1})});return _(t,function(r,i){var o=H(r.cells(),function(r,o){if(!1===n[i][o]){var a=Pi(t,i,o,e);return function(t,e,r,i){for(var o=t;o<t+r;o++)for(var a=e;a<e+i;a++)n[o][a]=!0}(i,o,a.rowspan(),a.colspan()),[rt.detailnew(r.element(),a.rowspan(),a.colspan(),r.isNew())]}return[]});return rt.rowdetails(o,r.section())})},Hi=function(t,e,n){for(var r=[],i=0;i<t.grid().rows();i++){for(var o=[],a=0;a<t.grid().columns();a++){var s=De.getAt(t,i,a).map(function(t){return rt.elementnew(t.element(),n)}).getOrThunk(function(){return rt.elementnew(e.gap(),!0)});o.push(s)}var u=rt.rowcells(o,t.all()[i].section());r.push(u)}return r},Ii=function(t,e,n,r){n===r?ue.remove(t,e):ue.set(t,e,n)},Wi=function(t,e){var n=[],r=[],o=function(e,i){e.length>0?function(e,i){var o=xe.child(t,i).getOrThunk(function(){var e=ot.fromTag(i,Xt.owner(t).dom());return ze.append(t,e),e});qe.empty(o);var a=_(e,function(t){t.isNew()&&n.push(t.element());var e=t.element();return qe.empty(e),k(t.cells(),function(t){t.isNew()&&r.push(t.element()),Ii(t.element(),"colspan",t.colspan(),1),Ii(t.element(),"rowspan",t.rowspan(),1),ze.append(e,t.element())}),e});Fe.append(o,a)}(e,i):function(e){xe.child(t,e).each(qe.remove)}(i)},a=[],s=[],u=[];return k(e,function(t){switch(t.section()){case"thead":a.push(t);break;case"tbody":s.push(t);break;case"tfoot":u.push(t)}}),o(a,"thead"),o(s,"tbody"),o(u,"tfoot"),{newRows:i(n),newCells:i(r)}},Li=function(t){return _(t,function(t){var e=Ke(t.element());return k(t.cells(),function(t){var n=Ze(t.element());Ii(n,"colspan",t.colspan(),1),Ii(n,"rowspan",t.rowspan(),1),ze.append(e,n)}),e})},zi=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},Fi=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},Ui=function(t,e){if(e<0||e>=t.length-1)return p.none();var n=t[e].fold(function(){var n=L(t.slice(0,e));return Ni(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return p.some({value:t,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return Ni(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return p.some({value:t,delta:1})});return n.bind(function(t){return r.map(function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n})})},qi=function(t,e,n){var r=t();return O(r,e).orThunk(function(){return p.from(r[0]).orThunk(n)}).map(function(t){return t.element()})},Vi=function(t){var e=t.grid(),n=Fi(0,e.columns()),r=Fi(0,e.rows());return _(n,function(e){return qi(function(){return H(r,function(n){return De.getAt(t,n,e).filter(function(t){return t.column()===e}).fold(i([]),function(t){return[t]})})},function(t){return 1===t.colspan()},function(){return De.getAt(t,0,e)})})},ji=function(t){var e=t.grid(),n=Fi(0,e.rows()),r=Fi(0,e.columns());return _(n,function(e){return qi(function(){return H(r,function(n){return De.getAt(t,e,n).filter(function(t){return t.row()===e}).fold(i([]),function(t){return[t]})})},function(t){return 1===t.rowspan()},function(){return De.getAt(t,e,0)})})},Yi=function(t,e,n,r,i){var o=ot.fromTag("div");return Ie.setAll(o,{position:"absolute",left:e-r/2+"px",top:n+"px",height:i+"px",width:r+"px"}),ue.setAll(o,{"data-column":t,role:"presentation"}),o},$i=function(t,e,n,r,i){var o=ot.fromTag("div");return Ie.setAll(o,{position:"absolute",left:e+"px",top:n-i/2+"px",height:i+"px",width:r+"px"}),ue.setAll(o,{"data-row":t,role:"presentation"}),o},Xi=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},Gi={resolve:Xi("ephox-snooker").resolve},Ji=function(t,e){var n=ue.get(t,e);return void 0===n||""===n?[]:n.split(" ")},Ki=Ji,Zi=function(t,e,n){var r=Ji(t,e).concat([n]);return ue.set(t,e,r.join(" ")),!0},Qi=function(t,e,n){var r=E(Ji(t,e),function(t){return t!==n});return r.length>0?ue.set(t,e,r.join(" ")):ue.remove(t,e),!1},to=function(t){return Ki(t,"class")},eo=function(t,e){return Zi(t,"class",e)},no=function(t,e){return Qi(t,"class",e)},ro=to,io=eo,oo=no,ao=function(t,e){return S(to(t),e)?no(t,e):eo(t,e)},so=function(t){return void 0!==t.dom().classList},uo=function(t,e){return so(t)&&t.dom().classList.contains(e)},lo={add:function(t,e){so(t)?t.dom().classList.add(e):io(t,e)},remove:function(t,e){so(t)?t.dom().classList.remove(e):oo(t,e),function(t){0===(so(t)?t.dom().classList:ro(t)).length&&ue.remove(t,"class")}(t)},toggle:function(t,e){return so(t)?t.dom().classList.toggle(e):ao(t,e)},toggler:function(t,e){var n=so(t),r=t.dom().classList;return function(t,e,n){var r=n||!1,i=function(){e(),r=!0},o=function(){t(),r=!1};return{on:i,off:o,toggle:function(){(r?o:i)()},isOn:function(){return r}}}(function(){n?r.remove(e):oo(t,e)},function(){n?r.add(e):io(t,e)},uo(t,e))},has:uo},co=Gi.resolve("resizer-bar"),fo=Gi.resolve("resizer-rows"),ho=Gi.resolve("resizer-cols"),mo=function(t){var e=me.descendants(t.parent(),"."+co);k(e,qe.remove)},go=function(t,e,n){var r=t.origin();k(e,function(e,i){e.each(function(e){var i=n(r,e);lo.add(i,co),ze.append(t.parent(),i)})})},po=function(t,e,n,r,i,o){var a=Vr(e);!function(t,e,n,r){go(t,e,function(t,e){var i=$i(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return lo.add(i,fo),i})}(t,n.length>0?i.positions(n,e):[],a,Rr(e)),function(t,e,n,r){go(t,e,function(t,e){var i=Yi(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return lo.add(i,ho),i})}(t,r.length>0?o.positions(r,e):[],a,wr(e))},vo=function(t,e){var n=me.descendants(t.parent(),"."+co);k(n,e)},bo={refresh:function(t,e,n,r){mo(t);var i=_e(e),o=De.generate(i),a=ji(o),s=Vi(o);po(t,e,a,s,n,r)},hide:function(t){vo(t,function(t){Ie.set(t,"display","none")})},show:function(t){vo(t,function(t){Ie.set(t,"display","block")})},destroy:mo,isRowBar:function(t){return lo.has(t,fo)},isColBar:function(t){return lo.has(t,ho)}},yo=function(t,e){return _(t,function(t){var n=function(t){return Ni(t,function(t){return Xt.parent(t.element()).map(function(t){var e=Xt.parent(t).isNone();return rt.elementnew(t,e)})}).getOrThunk(function(){return rt.elementnew(e.row(),!0)})}(t.details());return rt.rowdatanew(n.element(),t.details(),t.section(),n.isNew())})},wo=function(t,e){var n=Bi(t,Ft.eq);return yo(n,e)},xo=function(t,e){var n=B(_(t.all(),function(t){return t.cells()}));return O(n,function(t){return Ft.eq(e,t.element())})},Co=function(t,e,n,r,o){return function(a,s,u,l,c){var f=_e(s),d=De.generate(f);return e(d,u).map(function(e){var n=function(t,e){return Hi(t,e,!1)}(d,l),r=t(n,e,Ft.eq,o(l)),a=wo(r.grid(),l);return{grid:i(a),cursor:r.cursor}}).fold(function(){return p.none()},function(t){var e=Wi(s,t.grid());return n(s,t.grid(),c),r(s),bo.refresh(a,s,ei.height,c),p.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})})}},Ro=wo,So=function(t,e){return Te.cell(e.element()).bind(function(e){return xo(t,e)})},To=function(t,e){var n=_(e.selection(),function(e){return Te.cell(e).bind(function(e){return xo(t,e)})}),r=Ei(n);return r.length>0?p.some(r):p.none()},_o=function(t,e){return Te.cell(e.element()).bind(function(n){return xo(t,n).map(function(t){return ki(t,{generators:e.generators,clipboard:e.clipboard})})})},ko=function(t,e){var n=_(e.selection(),function(e){return Te.cell(e).bind(function(e){return xo(t,e)})}),r=Ei(n);return r.length>0?p.some(ki({cells:r},{generators:e.generators,clipboard:e.clipboard})):p.none()},Eo=function(t,e){return e.mergable()},No=function(t,e){return e.unmergable()},Do=function(t){return{is:function(e){return t===e},isValue:c,isError:l,getOr:i(t),getOrThunk:i(t),getOrDie:i(t),or:function(e){return Do(t)},orThunk:function(e){return Do(t)},fold:function(e,n){return n(t)},map:function(e){return Do(e(t))},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return p.some(t)}}},Oo=function(t){return{is:l,isValue:l,isError:c,getOr:o,getOrThunk:function(t){return t()},getOrDie:function(){return(e=String(t),function(){throw new Error(e)})();var e},or:function(t){return t},orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return Oo(t)},each:n,bind:function(e){return Oo(t)},exists:l,forall:c,toOption:p.none}},Ao={value:Do,error:Oo},Mo=function(t,e){return _(t,function(){return rt.elementnew(e.cell(),!0)})},Po=function(t,e,n){return t.concat(zi(e,function(e){return Ai.setCells(t[t.length-1],Mo(t[t.length-1].cells(),n))}))},Bo=function(t,e,n){return _(t,function(t){return Ai.setCells(t,t.cells().concat(Mo(Fi(0,e),n)))})},Ho=function(t,e,n){if(t.row()>=e.length||t.column()>Ai.cellLength(e[0]))return Ao.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),o=r[0].cells().slice(t.column()),a=Ai.cellLength(n[0]),s=n.length;return Ao.value({rowDelta:i(r.length-s),colDelta:i(o.length-a)})},Io=function(t,e){var n=Ai.cellLength(t[0]),r=Ai.cellLength(e[0]);return{rowDelta:i(0),colDelta:i(n-r)}},Wo=function(t,e,n){var r=e.colDelta()<0?Bo:o;return(e.rowDelta()<0?Po:o)(r(t,Math.abs(e.colDelta()),n),Math.abs(e.rowDelta()),n)},Lo=function(t,e,n,r){if(0===t.length)return t;for(var i=e.startRow();i<=e.finishRow();i++)for(var o=e.startCol();o<=e.finishCol();o++)Ai.mutateCell(t[i],o,rt.elementnew(r(),!1));return t},zo=function(t,e,n,r){for(var i=!0,o=0;o<t.length;o++)for(var a=0;a<Ai.cellLength(t[0]);a++){var s=n(Ai.getCellElement(t[o],a),e);!0===s&&!1===i?Ai.mutateCell(t[o],a,rt.elementnew(r(),!0)):!0===s&&(i=!1)}return t},Fo=function(t,e,n,r){if(e>0&&e<t.length){var i=function(t,e){return D(t,function(t,n){return T(t,function(t){return e(t.element(),n.element())})?t:t.concat([n])},[])}(t[e-1].cells(),n);k(i,function(i){for(var o=p.none(),a=e;a<t.length;a++)for(var s=0;s<Ai.cellLength(t[0]);s++){var u=t[a].cells()[s];n(u.element(),i.element())&&(o.isNone()&&(o=p.some(r())),o.each(function(e){Ai.mutateCell(t[a],s,rt.elementnew(e,!0))}))}})}return t},Uo=function(t,e,n,r){var i=Ai.getCell(t[e],n),o=a(r,i.element()),s=t[e];return t.length>1&&Ai.cellLength(s)>1&&(n>0&&o(Ai.getCellElement(s,n-1))||n<s.length-1&&o(Ai.getCellElement(s,n+1))||e>0&&o(Ai.getCellElement(t[e-1],n))||e<t.length-1&&o(Ai.getCellElement(t[e+1],n)))},qo=function(t,e,n,r,i){return Ho(t,e,n).map(function(o){var a=Wo(e,o,r);return function(t,e,n,r,i){for(var o=t.row(),a=t.column(),s=o+n.length,u=a+Ai.cellLength(n[0]),l=o;l<s;l++)for(var c=a;c<u;c++){Uo(e,l,c,i)&&zo(e,Ai.getCellElement(e[l],c),i,r.cell);var f=Ai.getCellElement(n[l-o],c-a),d=r.replace(f);Ai.mutateCell(e[l],c,rt.elementnew(d,!0))}return e}(t,a,n,r,i)})},Vo=function(t,e,n,r,i){Fo(e,t,i,r.cell);var o=Io(n,e),a=Wo(n,o,r),s=Io(e,a),u=Wo(e,s,r);return u.slice(0,t).concat(a).concat(u.slice(t,u.length))},jo=function(t,e,n,r,i){var o=t.slice(0,e),a=t.slice(e),s=Ai.mapCells(t[n],function(n,o){return e>0&&e<t.length&&r(Ai.getCellElement(t[e-1],o),Ai.getCellElement(t[e],o))?Ai.getCell(t[e],o):rt.elementnew(i(n.element(),r),!0)});return o.concat([s]).concat(a)},Yo=function(t,e,n,r,i){return _(t,function(t){var o=e>0&&e<Ai.cellLength(t)&&r(Ai.getCellElement(t,e-1),Ai.getCellElement(t,e))?Ai.getCell(t,e):rt.elementnew(i(Ai.getCellElement(t,n),r),!0);return Ai.addCell(t,e,o)})},$o=function(t,e,n,r,i){var o=n+1;return _(t,function(t,a){var s=a===e?rt.elementnew(i(Ai.getCellElement(t,n),r),!0):Ai.getCell(t,n);return Ai.addCell(t,o,s)})},Xo=function(t,e,n,r,i){var o=e+1,a=t.slice(0,o),s=t.slice(o),u=Ai.mapCells(t[e],function(t,e){return e===n?rt.elementnew(i(t.element(),r),!0):t});return a.concat([u]).concat(s)},Go=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},Jo=function(t,e,n){var r=_(t,function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return rt.rowcells(r,t.section())});return E(r,function(t){return t.cells().length>0})},Ko=function(t,e,n,r){return _(t,function(t){return Ai.mapCells(t,function(t){return function(t){return T(e,function(e){return n(t.element(),e.element())})}(t)?rt.elementnew(r(t.element(),n),!0):t})})},Zo=function(t,e,n,r){return void 0!==Ai.getCellElement(t[e],n)&&e>0&&r(Ai.getCellElement(t[e-1],n),Ai.getCellElement(t[e],n))},Qo=function(t,e,n){return e>0&&n(Ai.getCellElement(t,e-1),Ai.getCellElement(t,e))},ta=function(t,e,n,r){var i=H(t,function(r,i){return Zo(t,i,e,n)||Qo(r,e,n)?[]:[Ai.getCell(r,e)]});return Ko(t,i,n,r)},ea=function(t,e,n,r){var i=t[e],o=H(i.cells(),function(r,o){return Zo(t,e,o,n)||Qo(i,o,n)?[]:[r]});return Ko(t,o,n,r)},na=function(t){return{fold:t}},ra=function(){return na(function(t,e,n,r,i){return t()})},ia=function(t){return na(function(e,n,r,i,o){return n(t)})},oa=function(t,e){return na(function(n,r,i,o,a){return i(t,e)})},aa=function(t,e,n){return na(function(r,i,o,a,s){return a(t,e,n)})},sa=function(t,e){return na(function(n,r,i,o,a){return a(t,e)})},ua=function(t,e,n,r){var o=t.slice(0),a=function(t,e){return 0===t.length?ra():1===t.length?ia(0):0===e?oa(0,1):e===t.length-1?sa(e-1,e):e>0&&e<t.length-1?aa(e-1,e,e+1):ra()}(t,e),s=function(t){return _(t,i(0))},u=i(s(o)),l=function(t,e){if(n>=0){var i=Math.max(r.minCellWidth(),o[e]-n);return s(o.slice(0,t)).concat([n,i-o[e]]).concat(s(o.slice(e+1)))}var a=Math.max(r.minCellWidth(),o[t]+n),u=o[t]-a;return s(o.slice(0,t)).concat([a-o[t],u]).concat(s(o.slice(e+1)))},c=l;return a.fold(u,function(t){return r.singleColumnWidth(o[t],n)},c,function(t,e,n){return l(e,n)},function(t,e){if(n>=0)return s(o.slice(0,e)).concat([n]);var i=Math.max(r.minCellWidth(),o[e]+n);return s(o.slice(0,e)).concat([i-o[e]])})},la=function(t,e){return ue.has(t,e)&&parseInt(ue.get(t,e),10)>1},ca={hasColspan:function(t){return la(t,"colspan")},hasRowspan:function(t){return la(t,"rowspan")},minWidth:i(10),minHeight:i(10),getInt:function(t,e){return parseInt(Ie.get(t,e),10)}},fa=function(t,e,n){return Ie.getRaw(t,e).fold(function(){return n(t)+"px"},function(t){return t})},da=function(t){return fa(t,"width",Hr.getPixelWidth)},ha=function(t){return fa(t,"height",Hr.getHeight)},ma=function(t,e,n,r,i){var o=Vi(t),a=_(o,function(t){return t.map(e.edge)});return _(o,function(t,e){return t.filter(s(ca.hasColspan)).fold(function(){var t=Ui(a,e);return r(t)},function(t){return n(t,i)})})},ga=function(t){return t.map(function(t){return t+"px"}).getOr("")},pa=function(t,e,n,r){var i=ji(t),o=_(i,function(t){return t.map(e.edge)});return _(i,function(t,e){return t.filter(s(ca.hasRowspan)).fold(function(){var t=Ui(o,e);return r(t)},function(t){return n(t)})})},va={getRawWidths:function(t,e){return ma(t,e,da,ga)},getPixelWidths:function(t,e,n){return ma(t,e,Hr.getPixelWidth,function(t){return t.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(t,e,n){return ma(t,e,Hr.getPercentageWidth,function(t){return t.fold(function(){return n.minCellWidth()},function(t){return t/n.pixelWidth()*100})},n)},getPixelHeights:function(t,e){return pa(t,e,Hr.getHeight,function(t){return t.getOrThunk(ca.minHeight)})},getRawHeights:function(t,e){return pa(t,e,ha,ga)}},ba=function(t,e,n){for(var r=0,i=t;i<e;i++)r+=void 0!==n[i]?n[i]:0;return r},ya=function(t,e){var n=De.justCells(t);return _(n,function(t){var n=ba(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:i(n),colspan:t.colspan}})},wa=function(t,e){var n=De.justCells(t);return _(n,function(t){var n=ba(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:i(n),rowspan:t.rowspan}})},xa=function(t,e){return _(t.all(),function(t,n){return{element:t.element,height:i(e[n])}})},Ca=function(t){var e=parseInt(t,10),n=o;return{width:i(e),pixelWidth:i(e),getWidths:va.getPixelWidths,getCellDelta:n,singleColumnWidth:function(t,e){return[Math.max(ca.minWidth(),t+e)-t]},minCellWidth:ca.minWidth,setElementWidth:Hr.setPixelWidth,setTableWidth:function(t,e,n){var r=N(e,function(t,e){return t+e},0);Hr.setPixelWidth(t,r)}}},Ra=function(t,e){if(Hr.percentageBasedSizeRegex().test(e))return function(t,e){var n=parseFloat(t),r=Cr(e);return{width:i(n),pixelWidth:i(r),getWidths:va.getPercentageWidths,getCellDelta:function(t){return t/r*100},singleColumnWidth:function(t,e){return[100-t]},minCellWidth:function(){return ca.minWidth()/r*100},setElementWidth:Hr.setPercentageWidth,setTableWidth:function(t,e,r){var i=n+r;Hr.setPercentageWidth(t,i)}}}(Hr.percentageBasedSizeRegex().exec(e)[1],t);if(Hr.pixelBasedSizeRegex().test(e)){var n=Hr.pixelBasedSizeRegex().exec(e);return Ca(n[1])}var r=Cr(t);return Ca(r)},Sa=function(t){return Hr.getRawWidth(t).fold(function(){var e=Cr(t);return Ca(e)},function(e){return Ra(t,e)})},Ta=function(t){return De.generate(t)},_a=function(t){var e=_e(t);return Ta(e)},ka={adjustWidth:function(t,e,n,r){var i=Sa(t),o=i.getCellDelta(e),a=_a(t),s=i.getWidths(a,r,i),u=ua(s,n,o,i),l=_(u,function(t,e){return t+s[e]}),c=ya(a,l);k(c,function(t){i.setElementWidth(t.element(),t.width())}),n===a.grid().columns()-1&&i.setTableWidth(t,l,o)},adjustHeight:function(t,e,n,r){var i=_a(t),o=va.getPixelHeights(i,r),a=_(o,function(t,r){return n===r?Math.max(e+t,ca.minHeight()):t}),s=wa(i,a),u=xa(i,a);k(u,function(t){Hr.setHeight(t.element(),t.height())}),k(s,function(t){Hr.setHeight(t.element(),t.height())});var l=N(a,function(t,e){return t+e},0);Hr.setHeight(t,l)},adjustWidthTo:function(t,e,n){var r=Sa(t),i=Ta(e),o=r.getWidths(i,n,r),a=ya(i,o);k(a,function(t){r.setElementWidth(t.element(),t.width())});var s=N(o,function(t,e){return e+t},0);a.length>0&&r.setElementWidth(t,s)}},Ea=function(t){0===Te.cells(t).length&&qe.remove(t)},Na=V("grid","cursor"),Da=function(t,e,n){return Oa(t,e,n).orThunk(function(){return Oa(t,0,0)})},Oa=function(t,e,n){return p.from(t[e]).bind(function(t){return p.from(t.cells()[n]).bind(function(t){return p.from(t.element())})})},Aa=function(t,e,n){return Na(t,Oa(t,e,n))},Ma=function(t){return D(t,function(t,e){return T(t,function(t){return t.row()===e.row()})?t:t.concat([e])},[]).sort(function(t,e){return t.row()-e.row()})},Pa=function(t){return D(t,function(t,e){return T(t,function(t){return t.column()===e.column()})?t:t.concat([e])},[]).sort(function(t,e){return t.column()-e.column()})},Ba=function(t,e,n){var r=ke(t,n),i=De.generate(r);return Hi(i,e,!0)},Ha=ka.adjustWidthTo,Ia={insertRowBefore:Co(function(t,e,n,r){var i=e.row(),o=e.row(),a=jo(t,o,i,n,r.getOrInit);return Aa(a,o,e.column())},So,n,n,di),insertRowsBefore:Co(function(t,e,n,r){var i=e[0].row(),o=e[0].row(),a=Ma(e),s=D(a,function(t,e){return jo(t,o,i,n,r.getOrInit)},t);return Aa(s,o,e[0].column())},To,n,n,di),insertRowAfter:Co(function(t,e,n,r){var i=e.row(),o=e.row()+e.rowspan(),a=jo(t,o,i,n,r.getOrInit);return Aa(a,o,e.column())},So,n,n,di),insertRowsAfter:Co(function(t,e,n,r){var i=Ma(e),o=i[i.length-1].row(),a=i[i.length-1].row()+i[i.length-1].rowspan(),s=D(i,function(t,e){return jo(t,a,o,n,r.getOrInit)},t);return Aa(s,a,e[0].column())},To,n,n,di),insertColumnBefore:Co(function(t,e,n,r){var i=e.column(),o=e.column(),a=Yo(t,o,i,n,r.getOrInit);return Aa(a,e.row(),o)},So,Ha,n,di),insertColumnsBefore:Co(function(t,e,n,r){var i=Pa(e),o=i[0].column(),a=i[0].column(),s=D(i,function(t,e){return Yo(t,a,o,n,r.getOrInit)},t);return Aa(s,e[0].row(),a)},To,Ha,n,di),insertColumnAfter:Co(function(t,e,n,r){var i=e.column(),o=e.column()+e.colspan(),a=Yo(t,o,i,n,r.getOrInit);return Aa(a,e.row(),o)},So,Ha,n,di),insertColumnsAfter:Co(function(t,e,n,r){var i=e[e.length-1].column(),o=e[e.length-1].column()+e[e.length-1].colspan(),a=Pa(e),s=D(a,function(t,e){return Yo(t,o,i,n,r.getOrInit)},t);return Aa(s,e[0].row(),o)},To,Ha,n,di),splitCellIntoColumns:Co(function(t,e,n,r){var i=$o(t,e.row(),e.column(),n,r.getOrInit);return Aa(i,e.row(),e.column())},So,Ha,n,di),splitCellIntoRows:Co(function(t,e,n,r){var i=Xo(t,e.row(),e.column(),n,r.getOrInit);return Aa(i,e.row(),e.column())},So,n,n,di),eraseColumns:Co(function(t,e,n,r){var i=Pa(e),o=Jo(t,i[0].column(),i[i.length-1].column()),a=Da(o,e[0].row(),e[0].column());return Na(o,a)},To,Ha,Ea,di),eraseRows:Co(function(t,e,n,r){var i=Ma(e),o=Go(t,i[0].row(),i[i.length-1].row()),a=Da(o,e[0].row(),e[0].column());return Na(o,a)},To,n,Ea,di),makeColumnHeader:Co(function(t,e,n,r){var i=ta(t,e.column(),n,r.replaceOrInit);return Aa(i,e.row(),e.column())},So,n,n,hi("row","th")),unmakeColumnHeader:Co(function(t,e,n,r){var i=ta(t,e.column(),n,r.replaceOrInit);return Aa(i,e.row(),e.column())},So,n,n,hi(null,"td")),makeRowHeader:Co(function(t,e,n,r){var i=ea(t,e.row(),n,r.replaceOrInit);return Aa(i,e.row(),e.column())},So,n,n,hi("col","th")),unmakeRowHeader:Co(function(t,e,n,r){var i=ea(t,e.row(),n,r.replaceOrInit);return Aa(i,e.row(),e.column())},So,n,n,hi(null,"td")),mergeCells:Co(function(t,e,n,r){var o=e.cells();Ti(o);var a=Lo(t,e.bounds(),n,i(o[0]));return Na(a,p.from(o[0]))},Eo,n,n,mi),unmergeCells:Co(function(t,e,n,r){var i=N(e,function(t,e){return zo(t,e,n,r.combine(e))},t);return Na(i,p.from(e[0]))},No,Ha,n,mi),pasteCells:Co(function(t,e,n,r){var i,o,a,s,u=(i=e.clipboard(),o=e.generators(),a=_e(i),s=De.generate(a),Hi(s,o,!0)),l=rt.address(e.row(),e.column());return qo(l,t,u,e.generators(),n).fold(function(){return Na(t,p.some(e.element()))},function(t){var n=Da(t,e.row(),e.column());return Na(t,n)})},_o,Ha,n,di),pasteRowsBefore:Co(function(t,e,n,r){var i=t[e.cells[0].row()],o=e.cells[0].row(),a=Ba(e.clipboard(),e.generators(),i),s=Vo(o,t,a,e.generators(),n),u=Da(s,e.cells[0].row(),e.cells[0].column());return Na(s,u)},ko,n,n,di),pasteRowsAfter:Co(function(t,e,n,r){var i=t[e.cells[0].row()],o=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),a=Ba(e.clipboard(),e.generators(),i),s=Vo(o,t,a,e.generators(),n),u=Da(s,e.cells[0].row(),e.cells[0].column());return Na(s,u)},ko,n,n,di)},Wa=function(t){return ot.fromDom(t.getBody())},La=function(t){return t.getBoundingClientRect().width},za=function(t){return t.getBoundingClientRect().height},Fa=function(t){return function(e){return Ft.eq(e,Wa(t))}},Ua=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},qa=function(t){var e=me.descendants(t,"td[data-mce-style],th[data-mce-style]");ue.remove(t,"data-mce-style"),k(e,function(t){ue.remove(t,"data-mce-style")})},Va=function(t){return"rtl"===Ie.get(t,"direction")?"rtl":"ltr"},ja={onDirection:function(t,e){return function(n){return"rtl"===Va(n)?e:t}},getDirection:Va},Ya={isRtl:i(!1)},$a={isRtl:i(!0)},Xa={directionAt:function(t){return"rtl"===ja.getDirection(t)?$a:Ya}},Ga=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Ja={"border-collapse":"collapse",width:"100%"},Ka={border:"1"},Za=function(t){return t.getParam("table_default_styles",Ja,"object")},Qa=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},ts=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},es=function(t){return t.getParam("table_row_advtab",!0,"boolean")},ns=function(t){return t.getParam("table_advtab",!0,"boolean")},rs=function(t){return t.getParam("table_style_by_css",!1,"boolean")},is=function(t){return t.getParam("table_cell_class_list",[],"array")},os=function(t){return t.getParam("table_row_class_list",[],"array")},as=function(t){return t.getParam("table_class_list",[],"array")},ss=function(t){return!1===t.getParam("table_responsive_width")},us=function(t,e){return t.fire("newrow",{node:e})},ls=function(t,e){return t.fire("newcell",{node:e})},cs=function(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})},fs=function(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})},ds=function(t,e){var r=function(t){return"table"===re.name(Wa(t))},i=function(t){var e=t.getParam("table_clone_elements");return b(e)?p.some(e.split(/[ ,]/)):Array.isArray(e)?p.some(e):p.none()}(t),o=function(e,n,r,o){return function(a,s){qa(a);var u=o(),l=ot.fromDom(t.getDoc()),c=ri(Xa.directionAt),f=hn(r,l,i);return n(a)?e(u,a,s,f,c).bind(function(e){return k(e.newRows(),function(e){us(t,e.dom())}),k(e.newCells(),function(e){ls(t,e.dom())}),e.cursor().map(function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n})}):p.none()}};return{deleteRow:o(Ia.eraseRows,function(e){var n=oi(e);return!1===r(t)||n.rows()>1},n,e),deleteColumn:o(Ia.eraseColumns,function(e){var n=oi(e);return!1===r(t)||n.columns()>1},n,e),insertRowsBefore:o(Ia.insertRowsBefore,c,n,e),insertRowsAfter:o(Ia.insertRowsAfter,c,n,e),insertColumnsBefore:o(Ia.insertColumnsBefore,c,Ir,e),insertColumnsAfter:o(Ia.insertColumnsAfter,c,Ir,e),mergeCells:o(Ia.mergeCells,c,n,e),unmergeCells:o(Ia.unmergeCells,c,n,e),pasteRowsBefore:o(Ia.pasteRowsBefore,c,n,e),pasteRowsAfter:o(Ia.pasteRowsAfter,c,n,e),pasteCells:o(Ia.pasteCells,c,n,e)}},hs=function(t,e,n){var r=_e(t),i=De.generate(r);return To(i,e).map(function(t){var e=Hi(i,n,!1).slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),r=Ro(e,n);return Li(r)})},ms=tinymce.util.Tools.resolve("tinymce.util.Tools"),gs={applyAlign:function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},applyVAlign:function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},unApplyAlign:function(t,e){ms.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})},unApplyVAlign:function(t,e){ms.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},e)})},getTDTHOverallStyle:function(t,e,n){var r;return r=function(e,r){for(var i=0;i<r.length;i++){var o=t.getStyle(r[i],n);if(void 0===e&&(e=o),e!==o)return""}return e}(r,t.select("td,th",e))}},ps=function(t,e){var n=t.dom,r=e.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);o["border-style"]=i.borderStyle,o["border-color"]=i.borderColor,o["background-color"]=i.backgroundColor,o.width=i.width?Ua(i.width):"",o.height=i.height?Ua(i.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))},vs=function(t,e){var n=t.dom,r=e.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);r.find("#borderStyle").value(o["border-style"]||""),r.find("#borderColor").value(o["border-color"]||""),r.find("#backgroundColor").value(o["background-color"]||""),r.find("#width").value(o.width||""),r.find("#height").value(o.height||"")},bs={createStyleForm:function(t){var e=function(){var e=function(t){return t.getParam("color_picker_callback")}(t);if(e)return function(n){return e.call(t,function(t){n.control.value(t).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:a(ps,t)},items:[{label:"Style",name:"style",type:"textbox",onchange:a(vs,t)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:a(ps,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},buildListItems:function(t,e,n){var r=function(t,n){return n=n||[],ms.each(t,function(t){var i={text:t.text||t.title};t.menu?i.menu=r(t.menu):(i.value=t.value,e&&e(i)),n.push(i)}),n};return r(t,n||[])},updateStyleField:ps,extractAdvancedStyles:function(t,e){var n=t.parseStyle(t.getAttrib(e,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=t.serializeStyle(n),r},updateAdvancedFields:vs,syncAdvancedStyleFields:function(t,e){e.control.rootControl.find("#style")[0].getEl().isEqualNode(document.activeElement)?vs(t,e):ps(t,e)}},ys=function(t,e,n){var r,i=t.dom;function o(t,n,r){(1===e.length||r)&&i.setAttrib(t,n,r)}function a(t,n,r){(1===e.length||r)&&i.setStyle(t,n,r)}ts(t)&&bs.syncAdvancedStyleFields(t,n),r=n.control.rootControl.toJSON(),t.undoManager.transact(function(){ms.each(e,function(n){var s,u;o(n,"scope",r.scope),1===e.length?o(n,"style",r.style):(s=n,u=r.style,delete s.dataset.mceStyle,s.style.cssText+=";"+u),o(n,"class",r.class),a(n,"width",Ua(r.width)),a(n,"height",Ua(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=i.rename(n,r.type)),1===e.length&&(gs.unApplyAlign(t,n),gs.unApplyVAlign(t,n)),r.align&&gs.applyAlign(t,n,r.align),r.valign&&gs.applyVAlign(t,n,r.valign)}),t.focus()})},ws=function(t){var e,n,r,i=[];if(i=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!i.length&&e&&i.push(e),e=e||i[0]){n=i.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:e.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),type:e.nodeName.toLowerCase(),style:"",align:"",valign:""};return ms.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),ms.each("top middle bottom".split(" "),function(n){t.formatter.matchNode(e,"valign"+n)&&(r.valign=n)}),ts(t)&&ms.extend(r,bs.extractAdvancedStyles(n,e)),r}(t,e),is(t).length>0&&(r={name:"class",type:"listbox",label:"Class",values:bs.buildListItems(is(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})});var o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:a(bs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(bs.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};ts(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:o},bs.createStyleForm(t)],onsubmit:a(ys,t,i)}):t.windowManager.open({title:"Cell properties",data:n,body:o,onsubmit:a(ys,t,i)})}},xs=function(t,e,n){var r=t.getParent(e,"table"),i=e.parentNode,o=t.select(n,r)[0];o||(o=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(o,r.firstChild):r.insertBefore(o,r.firstChild):r.appendChild(o)),o.appendChild(e),i.hasChildNodes()||t.remove(i)};function Cs(t,e,n,r){var i=t.dom;function o(t,n,r){(1===e.length||r)&&i.setAttrib(t,n,r)}es(t)&&bs.syncAdvancedStyleFields(t,r);var a=r.control.rootControl.toJSON();t.undoManager.transact(function(){ms.each(e,function(r){var s,u,l;o(r,"scope",a.scope),o(r,"style",a.style),o(r,"class",a.class),s=r,u="height",l=Ua(a.height),(1===e.length||l)&&i.setStyle(s,u,l),a.type!==r.parentNode.nodeName.toLowerCase()&&xs(t.dom,r,a.type),a.align!==n.align&&(gs.unApplyAlign(t,r),gs.applyAlign(t,r,a.align))}),t.focus()})}var Rs=function(t){var e,n,r,i,o,s,u=t.dom,l=[];e=u.getParent(t.selection.getStart(),"table"),n=u.getParent(t.selection.getStart(),"td,th"),ms.each(e.rows,function(t){ms.each(t.cells,function(e){if(u.getAttrib(e,"data-mce-selected")||e===n)return l.push(t),!1})}),(r=l[0])&&(o=l.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),align:"",style:"",type:e.parentNode.nodeName.toLowerCase()};return ms.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),es(t)&&ms.extend(r,bs.extractAdvancedStyles(n,e)),r}(t,r),os(t).length>0&&(i={name:"class",type:"listbox",label:"Class",values:bs.buildListItems(os(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},es(t)?t.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},bs.createStyleForm(t)],onsubmit:a(Cs,t,l,o)}):t.windowManager.open({title:"Row properties",data:o,body:s,onsubmit:a(Cs,t,l,o)}))},Ss=tinymce.util.Tools.resolve("tinymce.Env"),Ts={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},_s=function(t,e,n,r,i){void 0===i&&(i=Ts);var o=ot.fromTag("table");Ie.setAll(o,i.styles),ue.setAll(o,i.attributes);var a=ot.fromTag("tbody");ze.append(o,a);for(var s=[],u=0;u<t;u++){for(var l=ot.fromTag("tr"),c=0;c<e;c++){var f=u<n||c<r?ot.fromTag("th"):ot.fromTag("td");c<r&&ue.set(f,"scope","row"),u<n&&ue.set(f,"scope","col"),ze.append(f,ot.fromTag("br")),i.percentages&&Ie.set(f,"width",100/e+"%"),ze.append(l,f)}s.push(l)}return Fe.append(a,s),o},ks=function(t){return t.dom().innerHTML},Es=function(t){var e=ot.fromTag("div"),n=ot.fromDom(t.dom().cloneNode(!0));return ze.append(e,n),ks(e)},Ns=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},Ds=function(t,e,n){var r,i=Za(t),o={styles:i,attributes:function(t){return t.getParam("table_default_attributes",Ka,"object")}(t),percentages:(r=i.width,b(r)&&-1!==r.indexOf("%")&&!ss(t))},s=_s(n,e,0,0,o);ue.set(s,"data-mce-id","__mce");var u=Es(s);return t.insertContent(u),xe.descendant(Wa(t),'table[data-mce-id="__mce"]').map(function(e){return ss(t)&&Ie.set(e,"width",Ie.get(e,"width")),ue.remove(e,"data-mce-id"),function(t,e){k(me.descendants(e,"tr"),function(e){us(t,e.dom()),k(me.descendants(e,"th,td"),function(e){ls(t,e.dom())})})}(t,e),function(t,e){xe.descendant(e,"td,th").each(a(Ns,t))}(t,e),e.dom()}).getOr(null)};function Os(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)t.setStyle(e,n,r);else if(e.children)for(var i=0;i<e.children.length;i++)Os(t,e.children[i],n,r)}var As=function(t,e,n){var r,i,o=t.dom;ns(t)&&bs.syncAdvancedStyleFields(t,n),!1===(i=n.control.rootControl.toJSON()).class&&delete i.class,t.undoManager.transact(function(){e||(e=Ds(t,i.cols||1,i.rows||1)),function(t,e,n){var r,i=t.dom,o={},a={};if(o.class=n.class,a.height=Ua(n.height),i.getAttrib(e,"width")&&!rs(t)?o.width=(r=n.width)?r.replace(/px$/,""):"":a.width=Ua(n.width),rs(t)?(a["border-width"]=Ua(n.border),a["border-spacing"]=Ua(n.cellspacing),ms.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):ms.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),rs(t)&&e.children)for(var s=0;s<e.children.length;s++)Os(i,e.children[s],{"border-width":Ua(n.border),"border-color":n.borderColor,padding:Ua(n.cellpadding)});n.style?ms.extend(a,i.parseStyle(n.style)):a=ms.extend({},i.parseStyle(i.getAttrib(e,"style")),a),o.style=i.serializeStyle(a),i.setAttribs(e,o)}(t,e,i),(r=o.select("caption",e)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=Ss.ie?" ":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),gs.unApplyAlign(t,e),i.align&&gs.applyAlign(t,e,i.align),t.focus(),t.addVisual()})},Ms=function(t,e){var n,r,i,o,s,u=t.dom,l={};!0===e?(n=u.getParent(t.selection.getStart(),"table"))&&(l=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),cellspacing:n.getStyle(e,"border-spacing")||n.getAttrib(e,"cellspacing"),cellpadding:n.getAttrib(e,"data-mce-cell-padding")||n.getAttrib(e,"cellpadding")||gs.getTDTHOverallStyle(t.dom,e,"padding"),border:n.getAttrib(e,"data-mce-border")||n.getAttrib(e,"border")||gs.getTDTHOverallStyle(t.dom,e,"border"),borderColor:n.getAttrib(e,"data-mce-border-color"),caption:!!n.select("caption",e)[0],class:n.getAttrib(e,"class")};return ms.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),ns(t)&&ms.extend(r,bs.extractAdvancedStyles(n,e)),r}(t,n)):(r={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),as(t).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),o={name:"class",type:"listbox",label:"Class",values:bs.buildListItems(as(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[r,i,{label:"Width",name:"width",onchange:a(bs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(bs.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,i,{label:"Width",name:"width",onchange:a(bs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(bs.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},o]},ns(t)?t.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},bs.createStyleForm(t)],onsubmit:a(As,t,n)}):t.windowManager.open({title:"Table properties",data:l,body:s,onsubmit:a(As,t,n)})},Ps=ms.each,Bs={registerCommands:function(t,e,r,i,o){var u=Fa(t),l=function(){return ot.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"))},c=function(t){return Te.table(t,u)},f=function(t){return{width:La(t.dom()),height:La(t.dom())}},d=function(e){var n=l();c(n).each(function(o){var a=gr.forMenu(i,o,n),s=f(o);e(o,a).each(function(e){!function(t,e,n){var r=f(n);e.width===r.width&&e.height===r.height||(cs(t,n.dom(),e.width,e.height),fs(t,n.dom(),r.width,r.height))}(t,s,o),t.selection.setRng(e),t.focus(),r.clear(o),qa(o)})})},h=function(e){var r=l();return c(r).bind(function(e){var o=ot.fromDom(t.getDoc()),a=gr.forMenu(i,e,r),s=hn(n,o,p.none());return hs(e,a,s)})},m=function(e){o.get().each(function(n){var o=_(n,function(t){return Ze(t)}),a=l();c(a).bind(function(n){var s=ot.fromDom(t.getDoc()),u=mn(s),l=gr.pasteRows(i,n,a,o,u);e(n,l).each(function(e){t.selection.setRng(e),t.focus(),r.clear(n)})})})};Ps({mceTableSplitCells:function(){d(e.unmergeCells)},mceTableMergeCells:function(){d(e.mergeCells)},mceTableInsertRowBefore:function(){d(e.insertRowsBefore)},mceTableInsertRowAfter:function(){d(e.insertRowsAfter)},mceTableInsertColBefore:function(){d(e.insertColumnsBefore)},mceTableInsertColAfter:function(){d(e.insertColumnsAfter)},mceTableDeleteCol:function(){d(e.deleteColumn)},mceTableDeleteRow:function(){d(e.deleteRow)},mceTableCutRow:function(t){o.set(h()),d(e.deleteRow)},mceTableCopyRow:function(t){o.set(h())},mceTablePasteRowBefore:function(t){m(e.pasteRowsBefore)},mceTablePasteRowAfter:function(t){m(e.pasteRowsAfter)},mceTableDelete:function(){var e=ot.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"));Te.table(e,u).filter(s(u)).each(function(e){var n=ot.fromText("");ze.after(e,n),qe.remove(e);var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r)})}},function(e,n){t.addCommand(n,e)}),Ps({mceInsertTable:a(Ms,t),mceTableProps:a(Ms,t,!0),mceTableRowProps:a(Rs,t),mceTableCellProps:a(ws,t)},function(e,n){t.addCommand(n,function(t,n){e(n)})})}},Hs=function(t){var e=p.from(t.dom().documentElement).map(ot.fromDom).getOr(t);return{parent:i(e),view:i(t),origin:i(Fr(0,0))}},Is=function(t,e){return{parent:i(e),view:i(t),origin:i(Fr(0,0))}};function Ws(t){var e=V.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw"Event bind error: undefined handler";n.push(t)},unbind:function(t){n=E(n,function(e){return e!==t})},trigger:function(){var t=e.apply(null,arguments);k(n,function(e){e(t)})}}}var Ls={create:function(t){return{registry:U(t,function(t){return{bind:t.bind,unbind:t.unbind}}),trigger:U(t,function(t){return t.trigger})}}},zs={mode:li(["compare","extract","mutate","sink"]),sink:li(["element","start","stop","destroy"]),api:li(["forceDrop","drop","move","delayDrop"])},Fs={resolve:Xi("ephox-dragster").resolve},Us=function(t,e){return function(n){if(t(n)){var o=ot.fromDom(n.target),a=function(){n.stopPropagation()},s=function(){n.preventDefault()},u=r(s,a),l=function(t,e,n,r,o,a,s){return{target:i(t),x:i(e),y:i(n),stop:r,prevent:o,kill:a,raw:i(s)}}(o,n.clientX,n.clientY,a,s,u,n);e(l)}}},qs=function(t,e,n,r,i){var o=Us(n,r);return t.dom().addEventListener(e,o,i),{unbind:a(Vs,t,e,o,i)}},Vs=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},js=function(t,e,n,r){return qs(t,e,n,r,!1)},Ys=function(t,e,n,r){return qs(t,e,n,r,!0)},$s=i(!0),Xs={bind:function(t,e,n){return js(t,e,$s,n)},capture:function(t,e,n){return Ys(t,e,$s,n)}},Gs=zs.mode({compare:function(t,e){return Fr(e.left()-t.left(),e.top()-t.top())},extract:function(t){return p.some(Fr(t.x(),t.y()))},sink:function(t,e){var n=function(t){var e=ki({layerClass:Fs.resolve("blocker")},t),n=ot.fromTag("div");return ue.set(n,"role","presentation"),Ie.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),lo.add(n,Fs.resolve("blocker")),lo.add(n,e.layerClass),{element:function(){return n},destroy:function(){qe.remove(n)}}}(e),r=Xs.bind(n.element(),"mousedown",t.forceDrop),i=Xs.bind(n.element(),"mouseup",t.drop),o=Xs.bind(n.element(),"mousemove",t.move),a=Xs.bind(n.element(),"mouseout",t.delayDrop);return zs.sink({element:n.element,start:function(t){ze.append(t,n.element())},stop:function(){qe.remove(n.element())},destroy:function(){n.destroy(),i.unbind(),o.unbind(),a.unbind(),r.unbind()}})},mutate:function(t,e){t.mutate(e.left(),e.top())}});function Js(){var t=p.none(),e=Ls.create({move:Ws(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){(function(e,n){var r=t.map(function(t){return e.compare(t,n)});return t=p.some(n),r})(r,n).each(function(t){e.trigger.move(t)})})},reset:function(){t=p.none()},events:e.registry}}function Ks(){var t={onEvent:function(t,e){},reset:n},e=Js(),r=t;return{on:function(){r.reset(),r=e},off:function(){r.reset(),r=t},isOn:function(){return r===e},onEvent:function(t,e){r.onEvent(t,e)},events:e.events}}var Zs=function(t,e,n){var r,i,o,a=!1,s=Ls.create({start:Ws([]),stop:Ws([])}),u=Ks(),l=function(){d.stop(),u.isOn()&&(u.off(),s.trigger.stop())},c=(r=l,i=200,o=null,{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!==o&&clearTimeout(o),o=setTimeout(function(){r.apply(null,t),o=null},i)}});u.events.move.bind(function(n){e.mutate(t,n.info())});var f=function(t){return function(){var e=Array.prototype.slice.call(arguments,0);if(a)return t.apply(null,e)}},d=e.sink(zs.api({forceDrop:l,drop:f(l),move:f(function(t,n){c.cancel(),u.onEvent(t,e)}),delayDrop:f(c.throttle)}),n);return{element:d.element,go:function(t){d.start(t),u.on(),s.trigger.start()},on:function(){a=!0},off:function(){a=!1},destroy:function(){d.destroy()},events:s.registry}},Qs={transform:function(t,e){var n=void 0!==e?e:{},r=void 0!==n.mode?n.mode:Gs;return Zs(t,r,e)}};function tu(){var t=Ls.create({drag:Ws(["xDelta","yDelta","target"])}),e=p.none(),n=function(){var t=Ls.create({drag:Ws(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}();return n.events.drag.bind(function(n){e.each(function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)})}),{assign:function(t){e=p.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}}var eu={any:function(t){return xe.first(t).isSome()},ancestor:function(t,e,n){return xe.ancestor(t,e,n).isSome()},sibling:function(t,e){return xe.sibling(t,e).isSome()},child:function(t,e){return xe.child(t,e).isSome()},descendant:function(t,e){return xe.descendant(t,e).isSome()},closest:function(t,e,n){return xe.closest(t,e,n).isSome()}},nu=Gi.resolve("resizer-bar-dragging");function ru(t,e){var n=ei.height,r=function(t,e,n){var r=tu(),i=Qs.transform(r,{}),o=p.none(),s=function(t,e){return p.from(ue.get(t,e))};r.events.drag.bind(function(t){s(t.target(),"data-row").each(function(e){var n=ca.getInt(t.target(),"top");Ie.set(t.target(),"top",n+t.yDelta()+"px")}),s(t.target(),"data-column").each(function(e){var n=ca.getInt(t.target(),"left");Ie.set(t.target(),"left",n+t.xDelta()+"px")})});var u=function(t,e){return ca.getInt(t,e)-parseInt(ue.get(t,"data-initial-"+e),10)};i.events.stop.bind(function(){r.get().each(function(r){o.each(function(i){s(r,"data-row").each(function(t){var e=u(r,"top");ue.remove(r,"data-initial-top"),h.trigger.adjustHeight(i,e,parseInt(t,10))}),s(r,"data-column").each(function(t){var e=u(r,"left");ue.remove(r,"data-initial-left"),h.trigger.adjustWidth(i,e,parseInt(t,10))}),bo.refresh(t,i,n,e)})})});var l=function(e,n){h.trigger.startAdjust(),r.assign(e),ue.set(e,"data-initial-"+n,parseInt(Ie.get(e,n),10)),lo.add(e,nu),Ie.set(e,"opacity","0.2"),i.go(t.parent())},c=Xs.bind(t.parent(),"mousedown",function(t){bo.isRowBar(t.target())&&l(t.target(),"top"),bo.isColBar(t.target())&&l(t.target(),"left")}),f=function(e){return Ft.eq(e,t.view())},d=Xs.bind(t.view(),"mouseover",function(r){"table"===re.name(r.target())||eu.closest(r.target(),"table",f)?(o="table"===re.name(r.target())?p.some(r.target()):xe.ancestor(r.target(),"table",f)).each(function(r){bo.refresh(t,r,n,e)}):fe.inBody(r.target())&&bo.destroy(t)}),h=Ls.create({adjustHeight:Ws(["table","delta","row"]),adjustWidth:Ws(["table","delta","column"]),startAdjust:Ws([])});return{destroy:function(){c.unbind(),d.unbind(),i.destroy(),bo.destroy(t)},refresh:function(r){bo.refresh(t,r,n,e)},on:i.on,off:i.off,hideBars:a(bo.hide,t),showBars:a(bo.show,t),events:h.registry}}(t,e,n),i=Ls.create({beforeResize:Ws(["table"]),afterResize:Ws(["table"]),startDrag:Ws([])});return r.events.adjustHeight.bind(function(t){i.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());ka.adjustHeight(t.table(),e,t.row(),n),i.trigger.afterResize(t.table())}),r.events.startAdjust.bind(function(t){i.trigger.startDrag()}),r.events.adjustWidth.bind(function(t){i.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());ka.adjustWidth(t.table(),n,t.column(),e),i.trigger.afterResize(t.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}}var iu=function(t,e){return t.inline?Is(Wa(t),function(){var t=ot.fromTag("div");return Ie.setAll(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ze.append(fe.body(),t),t}()):Hs(ot.fromDom(t.getDoc()))},ou=function(t,e){t.inline&&qe.remove(e.parent())},au=function(t){var e,n,r=p.none(),i=p.none(),o=p.none(),a=/(\d+(\.\d+)?)%/,s=function(t){return"TABLE"===t.nodeName};return t.on("init",function(){var e=ri(Xa.directionAt),n=iu(t);if(o=p.some(n),function(t){var e=t.getParam("object_resizing",!0);return"table"===e||e}(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var a=ru(n,e);a.on(),a.events.startDrag.bind(function(e){r=p.some(t.selection.getRng())}),a.events.beforeResize.bind(function(e){var n=e.table().dom();cs(t,n,La(n),za(n))}),a.events.afterResize.bind(function(e){var n=e.table(),i=n.dom();qa(n),r.each(function(e){t.selection.setRng(e),t.focus()}),fs(t,i,La(i),za(i)),t.undoManager.add()}),i=p.some(a)}}),t.on("ObjectResizeStart",function(r){var i,o=r.target;s(o)&&(e=r.width,i=o,n=t.dom.getStyle(i,"width")||t.dom.getAttrib(i,"width"))}),t.on("ObjectResized",function(r){var i=r.target;if(s(i)){var o=i;if(a.test(n)){var u=parseFloat(a.exec(n)[1]),l=r.width*u/e;t.dom.setStyle(o,"width",l+"%")}else{var c=[];ms.each(o.rows,function(e){ms.each(e.cells,function(e){var n=t.dom.getStyle(e,"width",!0);c.push({cell:e,width:n})})}),ms.each(c,function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)})}}}),{lazyResize:function(){return i},lazyWire:function(){return o.getOr(Hs(ot.fromDom(t.getBody())))},destroy:function(){i.each(function(t){t.destroy()}),o.each(function(e){ou(t,e)})}}},su=function(t){return{fold:t}},uu=function(t){return su(function(e,n,r,i){return e(t)})},lu=function(t){return su(function(e,n,r,i){return n(t)})},cu=function(t,e){return su(function(n,r,i,o){return i(t,e)})},fu=function(t){return su(function(e,n,r,i){return i(t)})},du=function(t,e){return Te.table(t,e).bind(function(e){var n=Te.cells(e);return A(n,function(e){return Ft.eq(t,e)}).map(function(t){return{index:i(t),all:i(n)}})})},hu=function(t,e){return du(t,e).fold(function(){return uu(t)},function(e){return e.index()+1<e.all().length?cu(t,e.all()[e.index()+1]):fu(t)})},mu=function(t,e){return du(t,e).fold(function(){return uu()},function(e){return e.index()-1>=0?cu(t,e.all()[e.index()-1]):lu(t)})},gu=ar([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),pu={before:gu.before,on:gu.on,after:gu.after,cata:function(t,e,n,r){return t.fold(e,n,r)},getStart:function(t){return t.fold(o,o,o)}},vu=ar([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bu=V("start","soffset","finish","foffset"),yu={domRange:vu.domRange,relative:vu.relative,exact:vu.exact,exactFromRange:function(t){return vu.exact(t.start(),t.soffset(),t.finish(),t.foffset())},range:bu,getWin:function(t){var e=function(t){return t.match({domRange:function(t){return ot.fromDom(t.startContainer)},relative:function(t,e){return pu.getStart(t)},exact:function(t,e,n,r){return t}})}(t);return Xt.defaultView(e)}},wu=function(t,e,n,r){var i=Xt.owner(t).dom().createRange();return i.setStart(t.dom(),e),i.setEnd(n.dom(),r),i},xu=function(t,e,n,r){var i=wu(t,e,n,r),o=Ft.eq(t,n)&&e===r;return i.collapsed&&!o},Cu=function(t,e){var n=(e||document).createDocumentFragment();return k(t,function(t){n.appendChild(t.dom())}),ot.fromDom(n)},Ru=function(t,e){t.selectNodeContents(e.dom())},Su=function(t){t.deleteContents()},Tu=function(t){return{left:i(t.left),top:i(t.top),right:i(t.right),bottom:i(t.bottom),width:i(t.width),height:i(t.height)}},_u={create:function(t){return t.document.createRange()},replaceWith:function(t,e){Su(t),t.insertNode(e.dom())},selectNodeContents:function(t,e){var n=t.document.createRange();return Ru(n,e),n},selectNodeContentsUsing:Ru,relativeToNative:function(t,e,n){var r,i=t.document.createRange();return r=i,e.fold(function(t){r.setStartBefore(t.dom())},function(t,e){r.setStart(t.dom(),e)},function(t){r.setStartAfter(t.dom())}),function(t,e){e.fold(function(e){t.setEndBefore(e.dom())},function(e,n){t.setEnd(e.dom(),n)},function(e){t.setEndAfter(e.dom())})}(i,n),i},exactToNative:function(t,e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom(),n),o.setEnd(r.dom(),i),o},deleteContents:Su,cloneFragment:function(t){var e=t.cloneContents();return ot.fromDom(e)},getFirstRect:function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?p.some(n).map(Tu):p.none()},getBounds:function(t){var e=t.getBoundingClientRect();return e.width>0||e.height>0?p.some(e).map(Tu):p.none()},isWithin:function(t,e){return e.compareBoundaryPoints(t.END_TO_START,t)<1&&e.compareBoundaryPoints(t.START_TO_END,t)>-1},toString:function(t){return t.toString()}},ku=ar([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Eu=function(t,e,n){return e(ot.fromDom(n.startContainer),n.startOffset,ot.fromDom(n.endContainer),n.endOffset)},Nu=function(t,e){return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return ku.rtl(ot.fromDom(t.endContainer),t.endOffset,ot.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return Eu(0,ku.ltr,n)}):Eu(0,ku.ltr,n)}(0,function(t,e){return e.match({domRange:function(t){return{ltr:i(t),rtl:p.none}},relative:function(e,n){return{ltr:bt(function(){return _u.relativeToNative(t,e,n)}),rtl:bt(function(){return p.some(_u.relativeToNative(t,n,e))})}},exact:function(e,n,r,i){return{ltr:bt(function(){return _u.exactToNative(t,e,n,r,i)}),rtl:bt(function(){return p.some(_u.exactToNative(t,r,i,e,n))})}}})}(t,e))},Du={ltr:ku.ltr,rtl:ku.rtl,diagnose:Nu,asLtrRange:function(t,e){return Nu(t,e).match({ltr:function(e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom(),n),o.setEnd(r.dom(),i),o},rtl:function(e,n,r,i){var o=t.document.createRange();return o.setStart(r.dom(),i),o.setEnd(e.dom(),n),o}})}},Ou=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},Au=function(t,e,n,r,i){if(0===i)return 0;if(e===r)return i-1;for(var o=r,a=1;a<i;a++){var s=t(a),u=Math.abs(e-s.left);if(n<=s.bottom){if(n<s.top||u>o)return a-1;o=u}}return 0},Mu={locate:function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getClientRects();return Ni(o,function(t){return Ou(t,n,r)?p.some(t):p.none()}).map(function(i){return function(t,e,n,r,i){var o=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},a=en.get(e).length,s=Au(function(t){return o(t).getBoundingClientRect()},n,r,i.right,a);return o(s)}(t,e,n,r,i)})}},Pu=function(t,e,n,r){var i=t.dom().createRange(),o=Xt.children(e);return Ni(o,function(e){return i.selectNode(e.dom()),Ou(i.getBoundingClientRect(),n,r)?Bu(t,e,n,r):p.none()})},Bu=function(t,e,n,r){return(re.isText(e)?Mu.locate:Pu)(t,e,n,r)},Hu=function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return Bu(t,e,a,s)},Iu=function(t,e){return e-t.left<t.right-e},Wu=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},Lu=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var i=r.getBoundingClientRect(),o=Iu(i,n);return(!0===o?un.first:un.last)(e).map(function(e){return Wu(t,e,o)})},zu=function(t,e,n){var r=e.dom().getBoundingClientRect(),i=Iu(r,n);return p.some(Wu(t,e,i))},Fu=function(t,e,n){return(0===Xt.children(e).length?zu:Lu)(t,e,n)},Uu=document.caretPositionFromPoint?function(t,e,n){return p.from(t.dom().caretPositionFromPoint(e,n)).bind(function(e){if(null===e.offsetNode)return p.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),p.some(n)})}:document.caretRangeFromPoint?function(t,e,n){return p.from(t.dom().caretRangeFromPoint(e,n))}:function(t,e,n){return ot.fromPoint(t,e,n).bind(function(r){var i=function(){return Fu(t,r,e)};return 0===Xt.children(r).length?i():function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return Hu(t,e,a,s)}(t,r,e,n).orThunk(i)})},qu=function(t,e,n){var r=ot.fromDom(t.document);return Uu(r,e,n).map(function(t){return yu.range(ot.fromDom(t.startContainer),t.startOffset,ot.fromDom(t.endContainer),t.endOffset)})},Vu=function(t,e,n){var r=Du.asLtrRange(t,e),i=ot.fromDom(r.commonAncestorContainer);return re.isElement(i)?function(t,e,n,r){var i=_u.create(t),o=(ct.is(e,r)?[e]:[]).concat(me.descendants(e,r));return E(o,function(t){return _u.selectNodeContentsUsing(i,t),_u.isWithin(n,i)})}(t,i,r,n):[]},ju=function(t,e){var n=re.name(t);return"input"===n?pu.after(t):S(["br","img"],n)?0===e?pu.before(t):pu.after(t):pu.on(t,e)},Yu=function(t,e){var n=t.fold(pu.before,ju,pu.after),r=e.fold(pu.before,ju,pu.after);return yu.relative(n,r)},$u=function(t,e,n,r){var i=ju(t,e),o=ju(n,r);return yu.relative(i,o)},Xu=function(t){return t.match({domRange:function(t){var e=ot.fromDom(t.startContainer),n=ot.fromDom(t.endContainer);return $u(e,t.startOffset,n,t.endOffset)},relative:Yu,exact:$u})},Gu=Yu,Ju=$u,Ku=function(t,e){p.from(t.getSelection()).each(function(t){t.removeAllRanges(),t.addRange(e)})},Zu=function(t,e,n,r,i){var o=_u.exactToNative(t,e,n,r,i);Ku(t,o)},Qu=function(t,e){return Du.diagnose(t,e).match({ltr:function(e,n,r,i){Zu(t,e,n,r,i)},rtl:function(e,n,r,i){var o=t.getSelection();if(o.setBaseAndExtent)o.setBaseAndExtent(e.dom(),n,r.dom(),i);else if(o.extend)try{!function(t,e,n,r,i,o){e.collapse(n.dom(),r),e.extend(i.dom(),o)}(0,o,e,n,r,i)}catch(o){Zu(t,r,i,e,n)}else Zu(t,r,i,e,n)}})},tl=function(t){var e=ot.fromDom(t.anchorNode),n=ot.fromDom(t.focusNode);return xu(e,t.anchorOffset,n,t.focusOffset)?p.some(yu.range(ot.fromDom(t.anchorNode),t.anchorOffset,ot.fromDom(t.focusNode),t.focusOffset)):function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return p.some(yu.range(ot.fromDom(e.startContainer),e.startOffset,ot.fromDom(n.endContainer),n.endOffset))}return p.none()}(t)},el=function(t){return p.from(t.getSelection()).filter(function(t){return t.rangeCount>0}).bind(tl)},nl={setExact:function(t,e,n,r,i){var o=Ju(e,n,r,i);Qu(t,o)},getExact:el,get:function(t){return el(t).map(function(t){return yu.exact(t.start(),t.soffset(),t.finish(),t.foffset())})},setRelative:function(t,e,n){var r=Gu(e,n);Qu(t,r)},toNative:function(t){var e=yu.getWin(t).dom(),n=function(t,n,r,i){return _u.exactToNative(e,t,n,r,i)},r=Xu(t);return Du.diagnose(e,r).match({ltr:n,rtl:n})},setToElement:function(t,e){var n=_u.selectNodeContents(t,e);Ku(t,n)},clear:function(t){t.getSelection().removeAllRanges()},clone:function(t,e){var n=Du.asLtrRange(t,e);return _u.cloneFragment(n)},replace:function(t,e,n){var r=Du.asLtrRange(t,e),i=Cu(n,t.document);_u.replaceWith(r,i)},deleteAt:function(t,e){var n=Du.asLtrRange(t,e);_u.deleteContents(n)},forElement:function(t,e){var n=_u.selectNodeContents(t,e);return yu.range(ot.fromDom(n.startContainer),n.startOffset,ot.fromDom(n.endContainer),n.endOffset)},getFirstRect:function(t,e){var n=Du.asLtrRange(t,e);return _u.getFirstRect(n)},getBounds:function(t,e){var n=Du.asLtrRange(t,e);return _u.getBounds(n)},getAtPoint:function(t,e,n){return qu(t,e,n)},findWithin:function(t,e,n){return Vu(t,e,n)},getAsString:function(t,e){var n=Du.asLtrRange(t,e);return _u.toString(n)},isCollapsed:function(t,e,n,r){return Ft.eq(t,n)&&e===r}},rl=tinymce.util.Tools.resolve("tinymce.util.VK"),il=function(t,e,n,r){return ul(t,e,hu(n),r)},ol=function(t,e,n,r){return ul(t,e,mu(n),r)},al=function(t,e){var n=yu.exact(e,0,e,0);return nl.toNative(n)},sl=function(t,e){var n,r=me.descendants(e,"tr");return(n=r,0===n.length?p.none():p.some(n[n.length-1])).bind(function(t){return xe.descendant(t,"td,th").map(function(t){return al(0,t)})})},ul=function(t,e,n,r,i){return n.fold(p.none,p.none,function(t,e){return un.first(e).map(function(t){return al(0,t)})},function(n){return Te.table(n,e).bind(function(e){var i=gr.noMenu(n);return t.undoManager.transact(function(){r.insertRowsAfter(e,i)}),sl(0,e)})})},ll=["table","li","dl"],cl={handle:function(t,e,n,r){if(t.keyCode===rl.TAB){var i=Wa(e),o=function(t){var e=re.name(t);return Ft.eq(t,i)||S(ll,e)},a=e.selection.getRng();if(a.collapsed){var s=ot.fromDom(a.startContainer);Te.cell(s,o).each(function(i){t.preventDefault(),(t.shiftKey?ol:il)(e,o,i,n,r).each(function(t){e.selection.setRng(t)})})}}}},fl={response:V("selection","kill")},dl=function(t){return function(e){return e===t}},hl=dl(38),ml=dl(40),gl={ltr:{isBackward:dl(37),isForward:dl(39)},rtl:{isBackward:dl(39),isForward:dl(37)},isUp:hl,isDown:ml,isNavigation:function(t){return t>=37&&t<=40}},pl={convertToRange:function(t,e){var n=Du.asLtrRange(t,e);return{start:i(ot.fromDom(n.startContainer)),soffset:i(n.startOffset),finish:i(ot.fromDom(n.endContainer)),foffset:i(n.endOffset)}},makeSitus:function(t,e,n,r){return{start:i(pu.on(t,e)),finish:i(pu.on(n,r))}}},vl=Wt.detect().browser.isSafari(),bl=function(t){var e=void 0!==t?t.dom():document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return Fr(n,r)},yl=function(t,e,n){(void 0!==n?n.dom():document).defaultView.scrollTo(t,e)},wl=function(t,e){vl&&x(t.dom().scrollIntoViewIfNeeded)?t.dom().scrollIntoViewIfNeeded(!1):t.dom().scrollIntoView(e)},xl={get:bl,to:yl,by:function(t,e,n){(void 0!==n?n.dom():document).defaultView.scrollBy(t,e)},preserve:function(t,e){var n=bl(t);e();var r=bl(t);n.top()===r.top()&&n.left()===r.left()||yl(n.left(),n.top(),t)},capture:function(t){var e=p.none(),n=function(){e=p.some(bl(t))};return n(),{save:n,restore:function(){e.each(function(e){yl(e.left(),e.top(),t)})}}},intoView:wl,intoViewIfNeeded:function(t,e){var n=e.dom().getBoundingClientRect(),r=t.dom().getBoundingClientRect();r.top<n.top?wl(t,!0):r.bottom>n.bottom&&wl(t,!1)},setToElement:function(t,e){var n=Vr(e),r=ot.fromDom(t.document);yl(n.left(),n.top(),r)},scrollBarWidth:function(){var t=ot.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');ze.after(fe.body(),t);var e=t.dom().offsetWidth-t.dom().clientWidth;return qe.remove(t),e}};function Cl(t){return{elementFromPoint:function(e,n){return ot.fromPoint(ot.fromDom(t.document),e,n)},getRect:function(t){return t.dom().getBoundingClientRect()},getRangedRect:function(e,n,r,i){var o=yu.exact(e,n,r,i);return nl.getFirstRect(t,o).map(function(t){return U(t,u)})},getSelection:function(){return nl.get(t).map(function(e){return pl.convertToRange(t,e)})},fromSitus:function(e){var n=yu.relative(e.start(),e.finish());return pl.convertToRange(t,n)},situsFromPoint:function(e,n){return nl.getAtPoint(t,e,n).map(function(t){return{start:i(pu.on(t.start(),t.soffset())),finish:i(pu.on(t.finish(),t.foffset()))}})},clearSelection:function(){nl.clear(t)},setSelection:function(e){nl.setExact(t,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,n){nl.setRelative(t,e,n)},selectContents:function(e){nl.setToElement(t,e)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){return xl.get(ot.fromDom(t.document)).top()},scrollBy:function(e,n){xl.by(e,n,ot.fromDom(t.document))}}}var Rl=function(t,e,n,r,i){return Ft.eq(n,r)?p.none():er.identify(n,r,e).bind(function(e){var r=e.boxes().getOr([]);return r.length>0?(i(t,r,e.start(),e.finish()),p.some(fl.response(p.some(pl.makeSitus(n,0,n,on(n))),!0))):p.none()})},Sl={sync:function(t,e,n,r,i,o,a){return Ft.eq(n,i)&&r===o?p.none():xe.closest(n,"td,th",e).bind(function(n){return xe.closest(i,"td,th",e).bind(function(r){return Rl(t,e,n,r,a)})})},detect:Rl,update:function(t,e,n,r,i){return er.shiftSelection(r,t,e,i.firstSelectedSelector(),i.lastSelectedSelector()).map(function(t){return i.clear(n),i.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()})}},Tl=J(["left","top","right","bottom"],[]),_l={nu:Tl,moveUp:function(t,e){return Tl({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},moveDown:function(t,e){return Tl({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},moveBottomTo:function(t,e){var n=t.bottom()-t.top();return Tl({left:t.left(),top:e-n,right:t.right(),bottom:e})},moveTopTo:function(t,e){var n=t.bottom()-t.top();return Tl({left:t.left(),top:e,right:t.right(),bottom:e+n})},getTop:function(t){return t.top()},getBottom:function(t){return t.bottom()},translate:function(t,e,n){return Tl({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},toString:function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"}},kl=function(t){return _l.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},El=function(t,e){return p.some(t.getRect(e))},Nl=function(t,e,n){return re.isElement(e)?El(t,e).map(kl):re.isText(e)?function(t,e,n){return n>=0&&n<on(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):p.none()}(t,e,n).map(kl):p.none()},Dl=function(t,e){return re.isElement(e)?El(t,e).map(kl):re.isText(e)?t.getRangedRect(e,0,e,on(e)).map(kl):p.none()},Ol=V("item","mode"),Al=function(t,e,n,r){var i=void 0!==r?r:Ml;return t.property().parent(e).map(function(t){return Ol(t,i)})},Ml=function(t,e,n,r){var i=void 0!==r?r:Pl;return n.sibling(t,e).map(function(t){return Ol(t,i)})},Pl=function(t,e,n,r){var i=void 0!==r?r:Pl,o=t.property().children(e);return n.first(o).map(function(t){return Ol(t,i)})},Bl=[{current:Al,next:Ml,fallback:p.none()},{current:Ml,next:Pl,fallback:p.some(Al)},{current:Pl,next:Pl,fallback:p.some(Ml)}],Hl=function(t,e,n,r,i){return O(i=void 0!==i?i:Bl,function(t){return t.current===n}).bind(function(n){return n.current(t,e,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return Hl(t,e,n,r)})})})},Il={backtrack:Al,sidestep:Ml,advance:Pl,go:Hl},Wl={left:function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?p.some(t[t.length-1]):p.none()}}},right:function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?p.some(t[0]):p.none()}}}},Ll=function(t,e,n,r,i,o){return Il.go(t,e,r,i).bind(function(e){return o(e.item())?p.none():n(e.item())?p.some(e.item()):Ll(t,e.item(),n,e.mode(),i,o)})},zl=function(t,e,n,r){return Ll(t,e,n,Il.sidestep,Wl.left(),r)},Fl=function(t,e,n,r){return Ll(t,e,n,Il.sidestep,Wl.right(),r)},Ul=function(t,e){return 0===t.property().children(e).length},ql=function(t,e,n,r){return zl(t,e,n,r)},Vl=function(t,e,n,r){return Fl(t,e,n,r)},jl={before:function(t,e,n){return ql(t,e,a(Ul,t),n)},after:function(t,e,n){return Vl(t,e,a(Ul,t),n)},seekLeft:ql,seekRight:Vl,walkers:function(){return{left:Wl.left,right:Wl.right}},walk:function(t,e,n,r,i){return Il.go(t,e,n,r,i)},backtrack:Il.backtrack,sidestep:Il.sidestep,advance:Il.advance},Yl=vn(),$l={gather:function(t,e,n){return jl.gather(Yl,t,e,n)},before:function(t,e){return jl.before(Yl,t,e)},after:function(t,e){return jl.after(Yl,t,e)},seekLeft:function(t,e,n){return jl.seekLeft(Yl,t,e,n)},seekRight:function(t,e,n){return jl.seekRight(Yl,t,e,n)},walkers:function(){return jl.walkers()},walk:function(t,e,n,r){return jl.walk(Yl,t,e,n,r)}},Xl=ar([{none:[]},{retry:["caret"]}]),Gl=function(t,e,n){return ye.closest(e,Ci).fold(i(!1),function(e){return Dl(t,e).exists(function(t){return function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()}(n,t)})})},Jl={point:_l.getTop,adjuster:function(t,e,n,r,i){var o=_l.moveUp(i,5);return Math.abs(n.top()-r.top())<1?Xl.retry(o):n.bottom()<i.top()?Xl.retry(o):n.bottom()===i.top()?Xl.retry(_l.moveUp(i,1)):Gl(t,e,i)?Xl.retry(_l.translate(o,5,0)):Xl.none()},move:_l.moveUp,gather:$l.before},Kl={point:_l.getBottom,adjuster:function(t,e,n,r,i){var o=_l.moveDown(i,5);return Math.abs(n.bottom()-r.bottom())<1?Xl.retry(o):n.top()>i.bottom()?Xl.retry(o):n.top()===i.bottom()?Xl.retry(_l.moveDown(i,1)):Gl(t,e,i)?Xl.retry(_l.translate(o,5,0)):Xl.none()},move:_l.moveDown,gather:$l.after},Zl=function(t,e,n,r,i){return 0===i?p.some(r):function(t,e,n){return t.elementFromPoint(e,n).filter(function(t){return"table"===re.name(t)}).isSome()}(t,r.left(),e.point(r))?function(t,e,n,r,i){return Zl(t,e,n,e.move(r,5),i)}(t,e,n,r,i-1):t.situsFromPoint(r.left(),e.point(r)).bind(function(o){return o.start().fold(p.none,function(o,a){return Dl(t,o,a).bind(function(a){return e.adjuster(t,o,a,n,r).fold(p.none,function(r){return Zl(t,e,n,r,i-1)})}).orThunk(function(){return p.some(r)})},p.none)})},Ql=function(t,e,n){var r=t.move(n,5),i=Zl(e,t,n,r,100).getOr(r);return function(t,e,n){return t.point(e)>n.getInnerHeight()?p.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?p.some(-t.point(e)):p.none()}(t,i,e).fold(function(){return e.situsFromPoint(i.left(),t.point(i))},function(n){return e.scrollBy(0,n),e.situsFromPoint(i.left(),t.point(i)-n)})},tc={tryUp:a(Ql,Jl),tryDown:a(Ql,Kl),ieTryUp:function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},ieTryDown:function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},getJumpSize:i(5)},ec=ar([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),nc=function(t){return xe.closest(t,"tr")},rc={verify:function(t,e,n,r,i,o,a){return xe.closest(r,"td,th",a).bind(function(n){return xe.closest(e,"td,th",a).map(function(e){return Ft.eq(n,e)?Ft.eq(r,n)&&on(n)===i?o(e):ec.none("in same cell"):In.sharedOne(nc,[n,e]).fold(function(){return function(t,e,n){var r=t.getRect(e),i=t.getRect(n);return i.right>r.left&&i.left<r.right}(t,e,n)?ec.success():o(e)},function(t){return o(e)})})}).getOr(ec.none("default"))},cata:function(t,e,n,r,i){return t.fold(e,n,r,i)},adt:ec},ic={point:V("element","offset"),delta:V("element","deltaOffset"),range:V("element","start","finish"),points:V("begin","end"),text:V("element","text")},oc=(V("ancestor","descendants","element","index"),V("parent","children","element","index")),ac=function(t,e){return A(t,a(Ft.eq,e))},sc=function(t){return Xt.parent(t).bind(function(e){var n=Xt.children(e);return ac(n,t).map(function(r){return oc(e,n,t,r)})})},uc=function(t){return"br"===re.name(t)},lc=function(t,e,n){return e(t,n).bind(function(t){return re.isText(t)&&0===en.get(t).trim().length?lc(t,e,n):p.some(t)})},cc=function(t,e,n,r){return function(t,e){return Xt.child(t,e).filter(uc).orThunk(function(){return Xt.child(t,e-1).filter(uc)})}(e,n).bind(function(e){return r.traverse(e).fold(function(){return lc(e,r.gather,t).map(r.relative)},function(t){return sc(t).map(function(t){return pu.on(t.parent(),t.index())})})})},fc=function(t,e,n,r){return(uc(e)?function(t,e,n){return n.traverse(e).orThunk(function(){return lc(e,n.gather,t)}).map(n.relative)}(t,e,r):cc(t,e,n,r)).map(function(t){return{start:i(t),finish:i(t)}})},dc=function(t){return rc.cata(t,function(t){return p.none()},function(){return p.none()},function(t){return p.some(ic.point(t,0))},function(t){return p.some(ic.point(t,on(t)))})},hc=Wt.detect(),mc=function(t,e,n,r,i,o){return 0===o?p.none():vc(t,e,n,r,i).bind(function(a){var s=t.fromSitus(a),u=rc.verify(t,n,r,s.finish(),s.foffset(),i.failure,e);return rc.cata(u,function(){return p.none()},function(){return p.some(a)},function(a){return Ft.eq(n,a)&&0===r?gc(t,n,r,_l.moveUp,i):mc(t,e,a,0,i,o-1)},function(a){return Ft.eq(n,a)&&r===on(a)?gc(t,n,r,_l.moveDown,i):mc(t,e,a,on(a),i,o-1)})})},gc=function(t,e,n,r,i){return Nl(t,e,n).bind(function(e){return pc(t,i,r(e,tc.getJumpSize()))})},pc=function(t,e,n){return hc.browser.isChrome()||hc.browser.isSafari()||hc.browser.isFirefox()||hc.browser.isEdge()?e.otherRetry(t,n):hc.browser.isIE()?e.ieRetry(t,n):p.none()},vc=function(t,e,n,r,i){return Nl(t,n,r).bind(function(e){return pc(t,i,e)})},bc=function(t,e,n){return function(t,e,n){return t.getSelection().bind(function(r){return fc(e,r.finish(),r.foffset(),n).fold(function(){return p.some(ic.point(r.finish(),r.foffset()))},function(i){var o=t.fromSitus(i),a=rc.verify(t,r.finish(),r.foffset(),o.finish(),o.foffset(),n.failure,e);return dc(a)})})}(t,e,n).bind(function(r){return mc(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)})},yc=function(t,e,n){return ye.ancestor(t,e,n).isSome()},wc=Wt.detect(),xc=function(t,e,n,r,o){return xe.closest(r,"td,th",e).bind(function(r){return xe.closest(r,"table",e).bind(function(a){return function(t,e){return yc(t,function(t){return Xt.parent(t).exists(function(t){return Ft.eq(t,e)})})}(o,a)?bc(t,e,n).bind(function(t){return xe.closest(t.finish(),"td,th",e).map(function(e){return{start:i(r),finish:i(e),range:i(t)}})}):p.none()})})},Cc=function(t,e,n,r,i,o){return wc.browser.isIE()?p.none():o(r,e).orThunk(function(){return xc(t,e,n,r,i).map(function(t){var e=t.range();return fl.response(p.some(pl.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)})})},Rc=function(t,e,n,r,i,o,a){return xc(t,n,r,i,o).bind(function(t){return Sl.detect(e,n,t.start(),t.finish(),a)})},Sc=function(t,e){return xe.closest(t,"tr",e).bind(function(t){return xe.closest(t,"table",e).bind(function(n){var r=me.descendants(n,"tr");return Ft.eq(t,r[0])?$l.seekLeft(n,function(t){return un.last(t).isSome()},e).map(function(t){var e=on(t);return fl.response(p.some(pl.makeSitus(t,e,t,e)),!0)}):p.none()})})},Tc=function(t,e){return xe.closest(t,"tr",e).bind(function(t){return xe.closest(t,"table",e).bind(function(n){var r=me.descendants(n,"tr");return Ft.eq(t,r[r.length-1])?$l.seekRight(n,function(t){return un.first(t).isSome()},e).map(function(t){return fl.response(p.some(pl.makeSitus(t,0,t,0)),!0)}):p.none()})})},_c=function(t,e){return xe.closest(t,"td,th",e)},kc={down:{traverse:Xt.nextSibling,gather:$l.after,relative:pu.before,otherRetry:tc.tryDown,ieRetry:tc.ieTryDown,failure:rc.adt.failedDown},up:{traverse:Xt.prevSibling,gather:$l.before,relative:pu.before,otherRetry:tc.tryUp,ieRetry:tc.ieTryUp,failure:rc.adt.failedUp}},Ec=V("rows","cols"),Nc={mouse:function(t,e,n,r){var i=function(t,e,n,r){var i=p.none(),o=function(){i=p.none()};return{mousedown:function(t){r.clear(e),i=_c(t.target(),n)},mouseover:function(o){i.each(function(i){r.clear(e),_c(o.target(),n).each(function(o){er.identify(i,o,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!Ft.eq(i,o))&&(r.selectRange(e,a,n.start(),n.finish()),t.selectContents(o))})})})},mouseup:function(){i.each(o)}}}(Cl(t),e,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},keyboard:function(t,e,n,r){var i=Cl(t),o=function(){return r.clear(e),p.none()};return{keydown:function(t,s,u,l,c,f){var d=t.raw().which,h=!0===t.raw().shiftKey;return er.retrieve(e,r.selectedSelector()).fold(function(){return gl.isDown(d)&&h?a(Rc,i,e,n,kc.down,l,s,r.selectRange):gl.isUp(d)&&h?a(Rc,i,e,n,kc.up,l,s,r.selectRange):gl.isDown(d)?a(Cc,i,n,kc.down,l,s,Tc):gl.isUp(d)?a(Cc,i,n,kc.up,l,s,Sc):p.none},function(t){var n=function(n){return function(){return Ni(n,function(n){return Sl.update(n.rows(),n.cols(),e,t,r)}).fold(function(){return er.getEdges(e,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(t){var n=gl.isDown(d)||f.isForward(d)?pu.after:pu.before;return i.setRelativeSelection(pu.on(t.first(),0),n(t.table())),r.clear(e),fl.response(p.none(),!0)})},function(t){return p.some(fl.response(p.none(),!0))})}};return gl.isDown(d)&&h?n([Ec(1,0)]):gl.isUp(d)&&h?n([Ec(-1,0)]):f.isBackward(d)&&h?n([Ec(0,-1),Ec(-1,0)]):f.isForward(d)&&h?n([Ec(0,1),Ec(1,0)]):gl.isNavigation(d)&&!1===h?o:p.none})()},keyup:function(t,i,o,a,s){return er.retrieve(e,r.selectedSelector()).fold(function(){var u=t.raw().which;return 0==(!0===t.raw().shiftKey)?p.none():gl.isNavigation(u)?Sl.sync(e,n,i,o,a,s,r.selectRange):p.none()},p.none)}}}},Dc=function(t,e){k(e,function(e){lo.remove(t,e)})},Oc=function(t){return function(e){lo.add(e,t)}},Ac=function(t){return function(e){Dc(e,t)}},Mc={byClass:function(t){var e=Oc(t.selected()),n=Ac([t.selected(),t.lastSelected(),t.firstSelected()]),r=function(e){var r=me.descendants(e,t.selectedSelector());k(r,n)};return{clear:r,selectRange:function(n,i,o,a){r(n),k(i,e),lo.add(o,t.firstSelected()),lo.add(a,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(t){var e=function(e){ue.remove(e,t.selected()),ue.remove(e,t.firstSelected()),ue.remove(e,t.lastSelected())},n=function(e){ue.set(e,t.selected(),"1")},r=function(n){var r=me.descendants(n,t.selectedSelector());k(r,e)};return{clear:r,selectRange:function(e,i,o,a){r(e),k(i,n),ue.set(o,t.firstSelected(),"1"),ue.set(a,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}}},Pc=function(t){return!1===lo.has(ot.fromDom(t.target),"ephox-snooker-resizer-bar")},Bc=function(t){return{get:function(){var e=Wa(t);return nr(e,or.selectedSelector()).fold(function(){return void 0===t.selection.getStart()?ur.none():ur.single(t.selection)},function(t){return ur.multiple(t)})}}},Hc=ms.each,Ic={addButtons:function(t){var e=[];function n(e){return function(){t.execCommand(e)}}Hc("inserttable tableprops deletetable | cell row column".split(" "),function(n){"|"===n?e.push({text:"-"}):e.push(t.menuItems[n])}),t.addButton("table",{type:"menubutton",title:"Table",menu:e}),t.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},addToolbars:function(t){var e=function(t){var e=t.getParam("table_toolbar",Ga);return""===e||!1===e?[]:b(e)?e.split(/[ ,]/):y(e)?e:[]}(t);e.length>0&&t.addContextToolbar(function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},e.join(" "))}},Wc={addMenuItems:function(t,e){var n=p.none(),r=[],i=[],o=[],a=[],s=function(t){t.disabled(!0)},u=function(t){t.disabled(!1)},l=function(){var t=this;r.push(t),n.fold(function(){s(t)},function(e){u(t)})},c=function(){var t=this;i.push(t),n.fold(function(){s(t)},function(e){u(t)})};t.on("init",function(){t.on("nodechange",function(l){var c=p.from(t.dom.getParent(t.selection.getStart(),"th,td"));(n=c.bind(function(t){var n=ot.fromDom(t);return Te.table(n).map(function(t){return gr.forMenu(e,t,n)})})).fold(function(){k(r,s),k(i,s),k(o,s),k(a,s)},function(t){k(r,u),k(i,u),k(o,function(e){e.disabled(t.mergable().isNone())}),k(a,function(e){e.disabled(t.unmergable().isNone())})})})});var f=function(t,e,n,r){var i,o,a,s,u,l=r.getEl().getElementsByTagName("table")[0],c=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=e+1+" x "+(n+1),c&&(e=9-e),o=0;o<10;o++)for(i=0;i<10;i++)s=l.rows[o].childNodes[i].firstChild,u=(c?i>=e:i<=e)&&o<=n,t.dom.toggleClass(s,"mce-active",u),u&&(a=s);return a.parentNode},d=!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?{text:"Table",icon:"table",context:"table",onclick:h("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),t.execCommand("mceInsertTable"))},onshow:function(){f(t,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(e,"mce-active"),t.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return t+="</table>",t+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,r,i=e.target;"A"===i.tagName.toUpperCase()&&(n=parseInt(i.getAttribute("data-mce-x"),10),r=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(f(t,n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(e){var n=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),t.undoManager.transact(function(){Ds(t,n.lastX+1,n.lastY+1)}),t.addVisual())}}]};function h(e){return function(){t.execCommand(e)}}var m={text:"Table properties",context:"table",onPostRender:l,onclick:h("mceTableProps")},g={text:"Delete table",context:"table",onPostRender:l,cmd:"mceTableDelete"},v={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:h("mceTableInsertRowBefore"),onPostRender:c},{text:"Insert row after",onclick:h("mceTableInsertRowAfter"),onPostRender:c},{text:"Delete row",onclick:h("mceTableDeleteRow"),onPostRender:c},{text:"Row properties",onclick:h("mceTableRowProps"),onPostRender:c},{text:"-"},{text:"Cut row",onclick:h("mceTableCutRow"),onPostRender:c},{text:"Copy row",onclick:h("mceTableCopyRow"),onPostRender:c},{text:"Paste row before",onclick:h("mceTablePasteRowBefore"),onPostRender:c},{text:"Paste row after",onclick:h("mceTablePasteRowAfter"),onPostRender:c}]},b={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:h("mceTableInsertColBefore"),onPostRender:c},{text:"Insert column after",onclick:h("mceTableInsertColAfter"),onPostRender:c},{text:"Delete column",onclick:h("mceTableDeleteCol"),onPostRender:c}]},y={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:h("mceTableCellProps"),onPostRender:c},{text:"Merge cells",onclick:h("mceTableMergeCells"),onPostRender:function(){var t=this;o.push(t),n.fold(function(){s(t)},function(e){t.disabled(e.mergable().isNone())})}},{text:"Split cell",onclick:h("mceTableSplitCells"),onPostRender:function(){var t=this;a.push(t),n.fold(function(){s(t)},function(e){t.disabled(e.unmergable().isNone())})}}]};t.addMenuItem("inserttable",d),t.addMenuItem("tableprops",m),t.addMenuItem("deletetable",g),t.addMenuItem("row",v),t.addMenuItem("column",b),t.addMenuItem("cell",y)}},Lc=function(t,e){return{insertTable:function(e,n){return Ds(t,e,n)},setClipboardRows:function(t){return function(t,e){var n=_(t,ot.fromDom);e.set(p.from(n))}(t,e)},getClipboardRows:function(){return function(t){return t.get().fold(function(){},function(t){return _(t,function(t){return t.dom()})})}(e)}}};e.add("table",function(t){var e=au(t),o=function(t,e){var o=J(["mousedown","mouseover","mouseup","keyup","keydown"],[]),a=p.none(),s=Mc.byAttr(or);return t.on("init",function(u){var l=t.getWin(),c=Wa(t),f=Fa(t),d=Nc.mouse(l,c,f,s),h=Nc.keyboard(l,c,f,s),m=function(e,n){(function(t){return!0===t.raw().shiftKey})(e)&&(n.kill()&&e.kill(),n.selection().each(function(e){var n=yu.relative(e.start(),e.finish()),r=Du.asLtrRange(l,n);t.selection.setRng(r)}))},g=function(e){var n=y(e);if(n.raw().shiftKey&&gl.isNavigation(n.raw().which)){var r=t.selection.getRng(),i=ot.fromDom(r.startContainer),o=ot.fromDom(r.endContainer);h.keyup(n,i,r.startOffset,o,r.endOffset).each(function(t){m(n,t)})}},v=function(n){var r=y(n);e().each(function(t){t.hideBars()});var i=t.selection.getRng(),o=ot.fromDom(t.selection.getStart()),a=ot.fromDom(i.startContainer),s=ot.fromDom(i.endContainer),u=Xa.directionAt(o).isRtl()?gl.rtl:gl.ltr;h.keydown(r,a,i.startOffset,s,i.endOffset,u).each(function(t){m(r,t)}),e().each(function(t){t.showBars()})},b=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},y=function(t){var e=ot.fromDom(t.target),n=function(){t.stopPropagation()},o=function(){t.preventDefault()},a=r(o,n);return{target:i(e),x:i(b(t)?t.x:null),y:i(b(t)?t.y:null),stop:n,prevent:o,kill:a,raw:i(t)}},w=function(t){return 0===t.button},x=function(t){w(t)&&Pc(t)&&d.mousedown(y(t))},C=function(t){var e;void 0!==(e=t).buttons&&0==(1&e.buttons)||!Pc(t)||d.mouseover(y(t))},R=function(t){w(t)&&Pc(t)&&d.mouseup(y(t))};t.on("mousedown",x),t.on("mouseover",C),t.on("mouseup",R),t.on("keyup",g),t.on("keydown",v),t.on("nodechange",function(){var e=t.selection,r=ot.fromDom(e.getStart()),i=ot.fromDom(e.getEnd());In.sharedOne(Te.table,[r,i]).fold(function(){s.clear(c)},n)}),a=p.some(o({mousedown:x,mouseover:C,mouseup:R,keyup:g,keydown:v}))}),{clear:s.clear,destroy:function(){a.each(function(t){})}}}(t,e.lazyResize),a=ds(t,e.lazyWire),s=Bc(t),u=ai(p.none());return Bs.registerCommands(t,a,o,s,u),pr.registerEvents(t,s,a,o),Wc.addMenuItems(t,s),Ic.addButtons(t),Ic.addToolbars(t),t.on("PreInit",function(){t.serializer.addTempAttr(or.firstSelected()),t.serializer.addTempAttr(or.lastSelected())}),Qa(t)&&t.on("keydown",function(n){cl.handle(n,t,a,e.lazyWire)}),t.on("remove",function(){e.destroy(),o.destroy()}),Lc(t,u)})}()},Z3om:function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),r=tinymce.util.Tools.resolve("tinymce.util.VK"),i=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(t){return t&&"BR"===t.nodeName},u=function(t){return t&&3===t.nodeType},l=function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)},c=function(t){return t&&/^(LI|DT|DD)$/.test(t.nodeName)},f=function(t){return t&&/^(TH|TD)$/.test(t.nodeName)},d=s,h=function(t){return t.parentNode.firstChild===t},m=function(t){return t.parentNode.lastChild===t},g=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},p=function(t,e){return t&&t.nodeName in e},v=function(t,e){return!!s(e)&&!(!t.isBlock(e.nextSibling)||s(e.previousSibling))},b=function(t,e,n){var r=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&r},y=function(t,e){return t.isChildOf(e,t.getRoot())},w=function(t,n){var r=e.getNode(t,n);return c(t)&&u(r)?{container:r,offset:n>=t.childNodes.length?r.data.length:0}:{container:t,offset:n}},x=function(t){var e=t.cloneRange(),n=w(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var r=w(t.endContainer,t.endOffset);return e.setEnd(r.container,r.offset),e},C=a.DOM,R=function(t){var e={},n=function(n){var r,i,o;i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(r=C.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(o=Math.min(o,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[o]):C.insertAfter(r,i.childNodes[o])):i.appendChild(r),i=r,o=0),e[n?"startContainer":"endContainer"]=i,e[n?"startOffset":"endOffset"]=o};return n(!0),t.collapsed||n(),e},S=function(t){function e(e){var n,r,i;n=i=t[e?"startContainer":"endContainer"],r=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(n),n=n.parentNode,C.remove(i),!n.hasChildNodes()&&C.isBlock(n)&&n.appendChild(C.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=r)}e(!0),e();var n=C.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),x(n)},T=a.DOM,_=function(t,e){var n,r=e.parentNode;"LI"===r.nodeName&&r.firstChild===e&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),b(t,r)&&T.remove(r)):T.setStyle(r,"listStyleType","none")),l(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)},k=function(t,e){o.each(o.grep(t.select("ol,ul",e)),function(e){_(t,e)})},E=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),N=function(t){var e=t.selection.getStart(!0);return t.dom.getParent(e,"OL,UL,DL",D(t,e))},D=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},O={getParentList:N,getSelectedSubLists:function(t){var e=N(t),n=t.selection.getSelectedBlocks();return function(t,e){return t&&1===e.length&&e[0]===t}(e,n)?function(t){return o.grep(t.querySelectorAll("ol,ul,dl"),function(t){return l(t)})}(e):o.grep(n,function(t){return l(t)&&e!==t})},getSelectedListItems:function(t){var e=t.selection.getSelectedBlocks();return o.grep(function(t,e){var n=o.map(e,function(e){var n=t.dom.getParent(e,"li,dd,dt",D(t,e));return n||e});return E.unique(n)}(t,e),function(t){return c(t)})},getClosestListRootElm:D},A=tinymce.util.Tools.resolve("tinymce.Env"),M=a.DOM,P=function(t,e,n){var r,i,o,a=M.createFragment(),s=t.schema.getBlockElements();if(t.settings.forced_root_block&&(n=n||t.settings.forced_root_block),n&&((i=M.create(n)).tagName===t.settings.forced_root_block&&M.setAttribs(i,t.settings.forced_root_block_attrs),p(e.firstChild,s)||a.appendChild(i)),e)for(;r=e.firstChild;){var u=r.nodeName;o||"SPAN"===u&&"bookmark"===r.getAttribute("data-mce-type")||(o=!0),p(r,s)?(a.appendChild(r),i=null):n?(i||(i=M.create(n),a.appendChild(i)),i.appendChild(r)):a.appendChild(r)}return t.settings.forced_root_block?o||A.ie&&!(A.ie>10)||i.appendChild(M.create("br",{"data-mce-bogus":"1"})):a.appendChild(M.create("br")),a},B=a.DOM,H=function(t,e,n,r){var i,a,s,u,l;for(s=B.select('span[data-mce-type="bookmark"]',e),r=r||P(t,n),(i=B.createRng()).setStartAfter(n),i.setEndAfter(e),u=(a=i.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&t.dom.isEmpty(u)){B.remove(u);break}t.dom.isEmpty(a)||B.insertAfter(a,e),B.insertAfter(r,e),b(t.dom,n.parentNode)&&(l=n.parentNode,o.each(s,function(t){l.parentNode.insertBefore(t,n.parentNode)}),B.remove(l)),B.remove(n),b(t.dom,e)&&B.remove(e)},I=a.DOM,W=function(t,e){b(t,e)&&I.remove(e)},L=function(t,e){var n,r,i=e.parentNode;return i?(n=i.parentNode,!(i!==t.getBody()&&("DD"===e.nodeName?(I.rename(e,"DT"),0):h(e)&&m(e)?("LI"===n.nodeName?(I.insertAfter(e,n),W(t.dom,n),I.remove(i)):l(n)?I.remove(i,!0):(n.insertBefore(P(t,e),i),I.remove(i)),0):h(e)?("LI"===n.nodeName?(I.insertAfter(e,n),e.appendChild(i),W(t.dom,n)):l(n)?n.insertBefore(e,i):(n.insertBefore(P(t,e),i),I.remove(e)),0):m(e)?("LI"===n.nodeName?I.insertAfter(e,n):l(n)?I.insertAfter(e,i):(I.insertAfter(P(t,e),i),I.remove(e)),0):("LI"===n.nodeName?(i=n,r=P(t,e,"LI")):r=l(n)?P(t,e,"LI"):P(t,e),H(t,i,e,r),k(t.dom,i.parentNode),0)))):(W(t.dom,e),!0)},z=L,F=function(t){var e=O.getSelectedListItems(t);if(e.length){var n=R(t.selection.getRng()),r=void 0,i=void 0,o=O.getClosestListRootElm(t,t.selection.getStart(!0));for(r=e.length;r--;)for(var a=e[r].parentNode;a&&a!==o;){for(i=e.length;i--;)if(e[i]===a){e.splice(r,1);break}a=a.parentNode}for(r=0;r<e.length&&(L(t,e[r])||0!==r);r++);return t.selection.setRng(S(n)),t.nodeChanged(),!0}},U=function(t,e){o.each(e,function(e,n){t.setAttribute(n,e)})},q=function(t,e,n){!function(t,e,n){var r=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",r)}(t,e,n),function(t,e,n){U(e,n["list-attributes"]),o.each(t.select("li",e),function(t){U(t,n["list-item-attributes"])})}(t,e,n)},V=function(t,e,n,r){var i,o;for(i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i),!n&&d(i.nextSibling)&&(i=i.nextSibling);i.parentNode!==r;){if(g(t,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},j=function(t,e,n){void 0===n&&(n={});var r,a=t.selection.getRng(!0),s="LI",u=O.getClosestListRootElm(t,t.selection.getStart(!0)),c=t.dom;"false"!==c.getContentEditable(t.selection.getNode())&&("DL"===(e=e.toUpperCase())&&(s="DT"),r=R(a),o.each(function(t,e,n){for(var r,a=[],s=t.dom,u=V(t,e,!0,n),l=V(t,e,!1,n),c=[],f=u;f&&(c.push(f),f!==l);f=f.nextSibling);return o.each(c,function(e){if(g(t,e))return a.push(e),void(r=null);if(s.isBlock(e)||d(e))return d(e)&&s.remove(e),void(r=null);var o=e.nextSibling;i.isBookmarkNode(e)&&(g(t,o)||!o&&e.parentNode===n)?r=null:(r||(r=s.create("p"),e.parentNode.insertBefore(r,e),a.push(r)),r.appendChild(e))}),a}(t,a,u),function(r){var i,a;(a=r.previousSibling)&&l(a)&&a.nodeName===e&&function(t,e,n){var r=t.getStyle(e,"list-style-type"),i=n?n["list-style-type"]:"";return r===(i=null===i?"":i)}(c,a,n)?(i=a,r=c.rename(r,s),a.appendChild(r)):(i=c.create(e),r.parentNode.insertBefore(i,r),i.appendChild(r),r=c.rename(r,s)),function(t,e,n){o.each(n,function(n){var r;return t.setStyle(e,((r={})[n]="",r))})}(c,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),q(c,i,n),X(t.dom,i)}),t.selection.setRng(S(r)))},Y=function(t){var e=R(t.selection.getRng(!0)),n=O.getClosestListRootElm(t,t.selection.getStart(!0)),r=O.getSelectedListItems(t),i=o.grep(r,function(e){return t.dom.isEmpty(e)});r=o.grep(r,function(e){return!t.dom.isEmpty(e)}),o.each(i,function(e){b(t.dom,e)&&z(t,e)}),o.each(r,function(e){var r,i;if(e.parentNode!==t.getBody()){for(r=e;r&&r!==n;r=r.parentNode)l(r)&&(i=r);H(t,i,e),k(t.dom,i.parentNode)}}),t.selection.setRng(S(e))},$=function(t,e,n){return function(t,e){return t&&e&&l(t)&&t.nodeName===e.nodeName}(e,n)&&function(t,e,n){return t.getStyle(e,"list-style-type",!0)===t.getStyle(n,"list-style-type",!0)}(t,e,n)&&(r=n,e.className===r.className);var r},X=function(t,e){var n,r;if(n=e.nextSibling,$(t,e,n)){for(;r=n.firstChild;)e.appendChild(r);t.remove(n)}if(n=e.previousSibling,$(t,e,n)){for(;r=n.lastChild;)e.insertBefore(r,e.firstChild);t.remove(n)}},G=function(t,e,n,r,i){if(e.nodeName!==r||J(i)){var a=R(t.selection.getRng(!0));o.each([e].concat(n),function(e){!function(t,e,n,r){if(e.nodeName!==n){var i=t.rename(e,n);q(t,i,r)}else q(t,e,r)}(t.dom,e,r,i)}),t.selection.setRng(S(a))}else Y(t)},J=function(t){return"list-style-type"in t},K={toggleList:function(t,e,n){var r=O.getParentList(t),i=O.getSelectedSubLists(t);n=n||{},r&&i.length>0?G(t,r,i,e,n):function(t,e,n,r){if(e!==t.getBody())if(e)if(e.nodeName!==n||J(r)){var i=R(t.selection.getRng(!0));q(t.dom,e,r),X(t.dom,t.dom.rename(e,n)),t.selection.setRng(S(i))}else Y(t);else j(t,n,r)}(t,r,e,n)},removeList:Y,mergeWithAdjacentLists:X},Z=function(t,r,i,o){var a,s,u=r.startContainer,l=r.startOffset;if(3===u.nodeType&&(i?l<u.data.length:l>0))return u;for(a=t.schema.getNonEmptyElements(),1===u.nodeType&&(u=e.getNode(u,l)),s=new n(u,o),i&&v(t.dom,u)&&s.next();u=s[i?"next":"prev2"]();){if("LI"===u.nodeName&&!u.hasChildNodes())return u;if(a[u.nodeName])return u;if(3===u.nodeType&&u.data.length>0)return u}},Q=function(t,e){var n=e.childNodes;return 1===n.length&&!l(n[0])&&t.isBlock(n[0])},tt=function(t,e,n){var r,i;if(i=Q(t,n)?n.firstChild:n,function(t,e){Q(t,e)&&t.remove(e.firstChild,!0)}(t,e),!b(t,e,!0))for(;r=e.firstChild;)i.appendChild(r)},et=function(t,e,n){var r,i,o=e.parentNode;y(t,e)&&y(t,n)&&(l(n.lastChild)&&(i=n.lastChild),o===n.lastChild&&d(o.previousSibling)&&t.remove(o.previousSibling),(r=n.lastChild)&&d(r)&&e.hasChildNodes()&&t.remove(r),b(t,n,!0)&&t.$(n).empty(),tt(t,e,n),i&&n.appendChild(i),t.remove(e),b(t,o)&&o!==t.getRoot()&&t.remove(o))},nt=function(t,e,n,r){var i=t.dom;if(i.isEmpty(r))!function(t,e,n){t.dom.$(n).empty(),et(t.dom,e,n),t.selection.setCursorLocation(n)}(t,n,r);else{var o=R(e);et(i,n,r),t.selection.setRng(S(o))}},rt=function(t,e){var n,r,i,o=t.dom,a=t.selection,s=a.getStart(),u=O.getClosestListRootElm(t,s),l=o.getParent(a.getStart(),"LI",u);if(l){if((n=l.parentNode)===t.getBody()&&b(o,n))return!0;if(r=x(a.getRng(!0)),(i=o.getParent(Z(t,r,e,u),"LI",u))&&i!==l)return e?nt(t,r,i,l):function(t,e,n,r){var i=R(e);et(t.dom,n,r);var o=S(i);t.selection.setRng(o)}(t,r,l,i),!0;if(!i&&!e&&K.removeList(t))return!0}return!1},it=function(t,e){return rt(t,e)||function(t,e){var n=t.dom,r=t.selection.getStart(),i=O.getClosestListRootElm(t,r),o=n.getParent(r,n.isBlock,i);if(o&&n.isEmpty(o)){var a=x(t.selection.getRng(!0)),s=n.getParent(Z(t,a,e,i),"LI",i);if(s)return t.undoManager.transact(function(){!function(t,e,n){var r=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),r&&t.isEmpty(r)&&t.remove(r)}(n,o,i),K.mergeWithAdjacentLists(n,s.parentNode),t.selection.select(s,!0),t.selection.collapse(e)}),!0}return!1}(t,e)},ot=function(t,e){return t.selection.isCollapsed()?it(t,e):function(t){var e=t.selection.getStart(),n=O.getClosestListRootElm(t,e);return!!(t.dom.getParent(e,"LI,DT,DD",n)||O.getSelectedListItems(t).length>0)&&(t.undoManager.transact(function(){t.execCommand("Delete"),k(t.dom,t.getBody())}),!0)}(t)},at=function(t){t.on("keydown",function(e){e.keyCode===r.BACKSPACE?ot(t,!1)&&e.preventDefault():e.keyCode===r.DELETE&&ot(t,!0)&&e.preventDefault()})},st=ot,ut=function(t){return{backspaceDelete:function(e){st(t,e)}}},lt=a.DOM,ct=function(t,e){var n;if(l(t)){for(;n=t.firstChild;)e.appendChild(n);lt.remove(t)}},ft=function(t){var e,n,r,i,o=O.getSelectedListItems(t);if(o.length){for(var a=R(t.selection.getRng(!0)),s=0;s<o.length&&(e=o[s],n=void 0,r=void 0,i=void 0,("DT"===e.nodeName?(lt.rename(e,"DD"),1):(n=e.previousSibling)&&l(n)?(n.appendChild(e),1):n&&"LI"===n.nodeName&&l(n.lastChild)?(n.lastChild.appendChild(e),ct(e.lastChild,n.lastChild),1):(n=e.nextSibling)&&l(n)?(n.insertBefore(e,n.firstChild),1):(n=e.previousSibling)&&"LI"===n.nodeName&&(r=lt.create(e.parentNode.nodeName),(i=lt.getStyle(e.parentNode,"listStyleType"))&&lt.setStyle(r,"listStyleType",i),n.appendChild(r),r.appendChild(e),ct(e.lastChild,r),1))||0!==s);s++);return t.selection.setRng(S(a)),t.nodeChanged(),!0}},dt=function(t,e){return function(){var n=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===e}},ht=function(t){t.on("BeforeExecCommand",function(e){var n,r=e.command.toLowerCase();if("indent"===r?ft(t)&&(n=!0):"outdent"===r&&F(t)&&(n=!0),n)return t.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}),t.addCommand("InsertUnorderedList",function(e,n){K.toggleList(t,"UL",n)}),t.addCommand("InsertOrderedList",function(e,n){K.toggleList(t,"OL",n)}),t.addCommand("InsertDefinitionList",function(e,n){K.toggleList(t,"DL",n)}),t.addQueryStateHandler("InsertUnorderedList",dt(t,"UL")),t.addQueryStateHandler("InsertOrderedList",dt(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",dt(t,"DL"))},mt=function(t){return t.getParam("lists_indent_on_tab",!0)},gt=function(t){mt(t)&&function(t){t.on("keydown",function(e){e.keyCode!==r.TAB||r.metaKeyPressed(e)||t.dom.getParent(t.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?F(t):ft(t))})}(t),at(t)},pt=function(t,e){return function(n){var r=n.control;t.on("NodeChange",function(t){var n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}(t.parents,f),i=-1!==n?t.parents.slice(0,n):t.parents,a=o.grep(i,l);r.active(a.length>0&&a[0].nodeName===e)})}},vt=function(t){(function(t,e){var n=t.settings.plugins?t.settings.plugins:"";return-1!==o.inArray(n.split(/[ ,]/),e)})(t,"advlist")||(t.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:pt(t,"OL")}),t.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:pt(t,"UL")})),t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){return function(e){var n=e.control;t.on("nodechange",function(){var e=O.getSelectedListItems(t),r=e.length>0&&h(e[0]);n.disabled(r)})}}(t)})};t.add("lists",function(t){return gt(t),vt(t),ht(t),ut(t)})}()},Z594:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("TbPv"),i=n.n(r),o=(n("o5MN"),n("BzBW"),n("+uI+"),n("m/OW"),n("Z3om"),{props:["value","disabled","placeholder","name","height"],data:function(){return{editor:null}},watch:{disabled:function(t){this.editor.getBody().setAttribute("contenteditable",!t)}},mounted:function(){var t=this,e={target:this.$el.children[0],skin_url:"/css/skins/lightgray",plugins:"table charmap link lists",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i"],link_title:!1,charmap:[[643,"esh"],[353,"s (hacek)"],[269,"c (hacek)"],[952,"theta"],[331,"eng"],[638,"alveolar tap"],[240,"eth"],[660,"glottal stop"],[8709,"null"],[593,"script a"],[230,"ash"],[596,"open o"],[603,"epsilon"],[601,"schwa"],[769,"acute accent"],[768,"grave accent"],[770,"circumflex"],[774,"breve"],[772,"macron"],[771,"tilde"],[720,"IPA length symbol"],[183,"Algonquianist length symbol"]],toolbar:"undo redo | bold italic underline | link | charmap | bullist numlist outdent indent | table | clearformatting",menubar:!1,statusbar:!1,setup:function(e){e.on("change",function(n){t.updateValue(e.getContent())}),e.on("input",function(n){t.updateValue(e.getContent())}),e.on("click",function(e){i.a.remove(t.$el.children[0])}),e.addButton("clearformatting",{image:"https://cdn4.iconfinder.com/data/icons/text-editor-3/100/Minio_Text_Editor_Bold-16-512.png",tooltip:"Clear Formatting",onclick:function(){var t=e.getContent({format:"raw"});t=(t=t.replace(/(?:<|<\/)(?!p|\/p|ul|\/ul|li|\/li|ol|\/ol)(?:.|\n)*?>/gm,"")).replace(/style=['"][^>]*['"]/gm,""),e.setContent(t)}})}};this.height&&(e.height=this.height),i.a.init(e).then(function(e){t.editor=e[0]})},methods:{updateValue:function(t){this.$emit("input",t.trim())}}}),a=n("XyMi"),s=Object(a.a)(o,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control",class:{"mce-disabled":this.disabled}},[e("textarea",{staticClass:"textarea",attrs:{name:this.name,id:this.name,placeholder:this.placeholder,disabled:this.disabled},domProps:{value:this.value}})])},[],!1,null,null,null);e.default=s.exports},"m/OW":function(t,e){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.util.VK"),n=function(t){return t.target_list},r=function(t){return t.rel_list},i=function(t){return t.link_class_list},o=function(t){return"boolean"==typeof t.link_assume_external_targets&&t.link_assume_external_targets},a=function(t){return"boolean"==typeof t.link_context_toolbar&&t.link_context_toolbar},s=function(t){return t.link_list},u=function(t){return"string"==typeof t.default_link_target},l=function(t){return t.default_link_target},c=n,f=function(t,e){t.settings.target_list=e},d=function(t){return!1!==n(t)},h=r,m=function(t){return void 0!==r(t)},g=i,p=function(t){return void 0!==i(t)},v=function(t){return!1!==t.link_title},b=function(t){return"boolean"==typeof t.allow_unsafe_link_target&&t.allow_unsafe_link_target},y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),w=tinymce.util.Tools.resolve("tinymce.Env"),x=function(t){if(!w.ie||w.ie>10){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var i=r.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+y.DOM.encode(t)+'">'),i.close()}}},C=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=function(t,e){var n=["noopener"],r=t?t.split(/\s+/):[],i=function(t){return t.filter(function(t){return-1===C.inArray(n,t)})};return(r=e?function(t){return(t=i(t)).length?t.concat(n):n}(r):i(r)).length?function(t){return C.trim(t.sort().join(" "))}(r):null},S=function(t,e){return e=e||t.selection.getNode(),_(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},T=function(t){return t&&"A"===t.nodeName&&t.href},_=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},k=function(t,e){var n,r;(r=t.dom.select("img",e)[0])&&(n=t.dom.getParents(r,"a[href]",e)[0])&&(n.parentNode.insertBefore(r,n),t.dom.remove(n))},E=function(t,e,n){var r,i;(i=t.dom.select("img",e)[0])&&(r=t.dom.create("a",n),i.parentNode.insertBefore(r,i),r.appendChild(i))},N=function(t,e){return function(n){t.undoManager.transact(function(){var r=t.selection.getNode(),i=S(t,r),o={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};m(t.settings)||!1!==b(t.settings)||(o.rel=R(o.rel,"_blank"===o.target)),n.href===e.href&&(e.attach(),e={}),i?(t.focus(),n.hasOwnProperty("text")&&("innerText"in i?i.innerText=n.text:i.textContent=n.text),t.dom.setAttribs(i,o),t.selection.select(i),t.undoManager.add()):_(r)?E(t,r,o):n.hasOwnProperty("text")?t.insertContent(t.dom.createHTML("a",o,t.dom.encode(n.text))):t.execCommand("mceInsertLink",!1,o)})}},D=function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();_(e)?k(t,e):t.execCommand("unlink")})}},O=T,A=function(t){return C.grep(t,T).length>0},M=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},P=S,B=function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},H=R,I=tinymce.util.Tools.resolve("tinymce.util.Delay"),W=tinymce.util.Tools.resolve("tinymce.util.XHR"),L={},z=function(t,e,n){var r=function(t,n){return n=n||[],C.each(t,function(t){var i={text:t.text||t.title};t.menu?i.menu=r(t.menu):(i.value=t.value,e&&e(i)),n.push(i)}),n};return r(t,n||[])},F=function(t,e,n){var r=t.selection.getRng();I.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(r),n(e)})})},U=function(t,e){var n,r,i,a,s,y,w,x,R,S,T,_={},k=t.selection,E=t.dom,O=function(t){var e=i.find("#text");(!e.value()||t.lastControl&&e.value()===t.lastControl.text())&&e.value(t.control.text()),i.find("#href").value(t.control.value())},A=function(){r||!a||_.text||this.parent().parent().find("#text")[0].value(this.value())};a=M(k.getContent()),n=P(t),_.text=r=B(t.selection,n),_.href=n?E.getAttrib(n,"href"):"",n?_.target=E.getAttrib(n,"target"):u(t.settings)&&(_.target=l(t.settings)),(T=E.getAttrib(n,"rel"))&&(_.rel=T),(T=E.getAttrib(n,"class"))&&(_.class=T),(T=E.getAttrib(n,"title"))&&(_.title=T),a&&(s={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){_.text=this.value()}}),e&&(y={type:"listbox",label:"Link list",values:z(e,function(e){e.value=t.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:O,value:t.convertURL(_.href,"href"),onPostRender:function(){y=this}}),d(t.settings)&&(void 0===c(t.settings)&&f(t,[{text:"None",value:""},{text:"New window",value:"_blank"}]),x={name:"target",type:"listbox",label:"Target",values:z(c(t.settings))}),m(t.settings)&&(w={name:"rel",type:"listbox",label:"Rel",values:z(h(t.settings),function(e){!1===b(t.settings)&&(e.value=H(e.value,"_blank"===_.target))})}),p(t.settings)&&(R={name:"class",type:"listbox",label:"Class",values:z(g(t.settings),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})})}),v(t.settings)&&(S={name:"title",type:"textbox",label:"Title",value:_.title}),i=t.windowManager.open({title:"Insert link",data:_,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var n=e.meta||{};y&&y.value(t.convertURL(this.value(),"href")),C.each(e.meta,function(t,e){var n=i.find("#"+e);"text"===e?0===r.length&&(n.value(t),_.text=t):n.value(t)}),n.attach&&(L={href:this.value(),attach:n.attach}),n.text||A.call(this)},onkeyup:A,onpaste:A,onbeforecall:function(t){t.meta=i.toJSON()}},s,S,function(e){var n=[];if(C.each(t.dom.select("a:not([href])"),function(t){var r=t.name||t.id;r&&n.push({text:r,value:"#"+r,selected:-1!==e.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:O}}(_.href),y,w,x,R],onSubmit:function(e){var n=o(t.settings),i=N(t,L),s=D(t),u=C.extend({},_,e.data),l=u.href;l?(a&&u.text!==r||delete u.text,l.indexOf("@")>0&&-1===l.indexOf("//")&&-1===l.indexOf("mailto:")?F(t,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(t){t&&(u.href="mailto:"+l),i(u)}):!0===n&&!/^\w+:/i.test(l)||!1===n&&/^\s*www[\.|\d\.]/i.test(l)?F(t,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){t&&(u.href="http://"+l),i(u)}):i(u)):s()}})},q=function(t){!function(t,e){var n=s(t.settings);"string"==typeof n?W.send({url:n,success:function(n){e(t,JSON.parse(n))}}):"function"==typeof n?n(function(n){e(t,n)}):e(t,n)}(t,U)},V=function(t,e){return t.dom.getParent(e,"a[href]")},j=function(t){return V(t,t.selection.getStart())},Y=function(t,e){if(e){var n=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")}(e);if(/^#/.test(n)){var r=t.$(n);r.length&&t.selection.scrollIntoView(r[0],!0)}else x(e.href)}},$=function(t){return function(){q(t)}},X=function(t){return function(){Y(t,j(t))}},G=function(t){return function(e){var n,r,i;return!!(a(t.settings)&&!function(t){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}(t)&&O(e)&&3===(i=(r=(n=t.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length)}},J=function(t){t.on("click",function(n){var r=V(t,n.target);r&&e.metaKeyPressed(n)&&(n.preventDefault(),Y(t,r))}),t.on("keydown",function(e){var n=j(t);n&&13===e.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(e)&&(e.preventDefault(),Y(t,n))})},K=function(t){return function(){var e=this;t.on("nodechange",function(n){e.active(!t.readonly&&!!P(t,n.element))})}},Z=function(t){return function(){var e=this,n=function(t){A(t.parents)?e.show():e.hide()};A(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",n),e.on("remove",function(){t.off("nodechange",n)})}},Q=function(t){t.addCommand("mceLink",$(t))},tt=function(t){t.addShortcut("Meta+K","",$(t))},et=function(t){t.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:$(t),onpostrender:K(t)}),t.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:D(t),onpostrender:K(t)}),t.addContextToolbar&&t.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:X(t)})},nt=function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:X(t),onPostRender:Z(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:$(t),stateSelector:"a[href]",context:"insert",prependToContext:!0}),t.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:D(t),stateSelector:"a[href]"})},rt=function(t){t.addContextToolbar&&t.addContextToolbar(G(t),"openlink | link unlink")};t.add("link",function(t){et(t),nt(t),rt(t),J(t),Q(t),tt(t)})}()},o5MN:function(t,e){!function(){"use strict";var t,e=tinymce.util.Tools.resolve("tinymce.ThemeManager"),n=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(t){return!1!==o(t)},o=function(t){return t.getParam("menubar")},a=function(t){return t.getParam("toolbar_items_size")},s=function(t){return t.getParam("menu")},u=function(t){return!1===t.settings.skin},l=function(t){var e=t.getParam("resize","vertical");return!1===e?"none":"both"===e?"both":"vertical"},c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.ui.Factory"),d=tinymce.util.Tools.resolve("tinymce.util.I18n"),h=function(t){return t.fire("SkinLoaded")},m=function(t){return t.fire("ResizeEditor")},g=function(t){return t.fire("BeforeRenderUI")},p=function(t,e){return function(){var n=t.find(e)[0];n&&n.focus(!0)}},v=function(t,e){t.shortcuts.add("Alt+F9","",p(e,"menubar")),t.shortcuts.add("Alt+F10,F10","",p(e,"toolbar")),t.shortcuts.add("Alt+F11","",p(e,"elementpath")),e.on("cancel",function(){t.focus()})},b=tinymce.util.Tools.resolve("tinymce.geom.Rect"),y=tinymce.util.Tools.resolve("tinymce.util.Delay"),w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},x=function(t){return function(){return t}},C=x(!1),R=x(!0),S=function(){return T},T=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:C,isSome:C,isNone:R,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:e,map:S,ap:S,each:function(){},bind:S,flatten:S,exists:C,forall:R,filter:S,equals:t,equals_:t,toArray:function(){return[]},toString:x("none()")};return Object.freeze&&Object.freeze(r),r}(),_=function(t){var e=function(){return t},n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:R,isNone:C,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return _(e(t))},ap:function(e){return e.fold(S,function(e){return _(e(t))})},each:function(e){e(t)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(t)?i:T},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(C,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},k={some:_,none:S,from:function(t){return null===t||void 0===t?T:_(t)}},E=function(t){return t?t.getRoot().uiContainer:null},N={getUiContainerDelta:function(t){var e=E(t);if(e&&"static"!==c.DOM.getStyle(e,"position",!0)){var n=c.DOM.getPos(e),r=e.scrollLeft-n.x,i=e.scrollTop-n.y;return k.some({x:r,y:i})}return k.none()},setUiContainer:function(t,e){var n=c.DOM.select(t.settings.ui_container)[0];e.getRoot().uiContainer=n},getUiContainer:E,inheritUiContainer:function(t,e){return e.uiContainer=E(t)}},D=function(t,e,n){var i,o=[];if(e)return r.each(e.split(/[ ,]/),function(e){var r,a=function(){var n=t.selection;e.settings.stateSelector&&n.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&n.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"===e?i=null:(i||(i={type:"buttongroup",items:[]},o.push(i)),t.buttons[e]&&(r=e,"function"==typeof(e=t.buttons[r])&&(e=e()),e.type=e.type||"button",e.size=n,e=f.create(e),i.items.push(e),t.initialized?a():t.on("init",a)))}),{type:"toolbar",layout:"flow",items:o}},O=D,A=function(t,e){var n=[];if(r.each(function(t){var e=t.getParam("toolbar");return!1===e?[]:r.isArray(e)?r.grep(e,function(t){return t.length>0}):function(t,e){for(var n=[],r=1;r<10;r++){var i=t["toolbar"+r];if(!i)break;n.push(i)}var o=t.toolbar?[t.toolbar]:[e];return n.length>0?n:o}(t.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")}(t),function(r){var i;(i=r)&&n.push(D(t,i,e))}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},M=c.DOM,P=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},B=function(t,e){t.moveTo(e.left,e.top)},H=function(t,e,n,r,i,o){return o=P({x:e,y:n,w:o.w,h:o.h}),t&&(o=t({elementRect:P(r),contentAreaRect:P(i),panelRect:o})),o},I=function(t){var e,n=function(){return t.contextToolbars||[]},i=function(e,n){var i,o,a,s,u,l,c,f=function(t){return t.getParam("inline_toolbar_position_handler")}(t);if(!t.removed)if(e&&e.toolbar.panel){var d,h,m,g;c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],u=e.toolbar.panel,n&&u.show(),d=e.element,h=M.getPos(t.getContentAreaContainer()),m=t.dom.getRect(d),"BODY"===(g=t.dom.getRoot()).nodeName&&(m.x-=g.ownerDocument.documentElement.scrollLeft||g.scrollLeft,m.y-=g.ownerDocument.documentElement.scrollTop||g.scrollTop),m.x+=h.x,m.y+=h.y,a=m,o=M.getRect(u.getEl()),s=M.getRect(t.getContentAreaContainer()||t.getBody());var p=N.getUiContainerDelta(u).getOr({x:0,y:0});if(a.x+=p.x,a.y+=p.y,o.x+=p.x,o.y+=p.y,s.x+=p.x,s.y+=p.y,"inline"!==M.getStyle(e.element,"display",!0)){var v=e.element.getBoundingClientRect();a.w=v.width,a.h=v.height}t.inline||(s.w=t.getDoc().documentElement.offsetWidth),t.selection.controlSelection.isResizable(e.element)&&a.w<25&&(a=b.inflate(a,0,8)),i=b.findBestRelativePosition(o,a,s,c),a=b.clamp(a,s),i?(l=b.relativePosition(o,a,i),B(u,H(f,l.x,l.y,a,s,o))):(s.h+=o.h,(a=b.intersect(s,a))?(i=b.findBestRelativePosition(o,a,s,["bc-tc","bl-tl","br-tr"]))?(l=b.relativePosition(o,a,i),B(u,H(f,l.x,l.y,a,s,o))):B(u,H(f,a.x,a.y,a,s,o)):u.hide()),function(t,e,n){e=e?e.substr(0,2):"",r.each({t:"down",b:"up"},function(r,i){t.classes.toggle("arrow-"+r,n(i,e.substr(0,1)))}),r.each({l:"left",r:"right"},function(r,i){t.classes.toggle("arrow-"+r,n(i,e.substr(1,1)))})}(u,i,function(t,e){return t===e})}else!function(t){r.each(t.contextToolbars,function(t){t.panel&&t.panel.hide()})}(t)},o=function(e){return function(){y.requestAnimationFrame(function(){t.selection&&i(u(t.selection.getNode()),e)})}},a=function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void i(n);r=f.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:O(t,n.toolbar.items),oncancel:function(){t.focus()}}),N.setUiContainer(t,r),function(n){if(!e){var r=o(!0),i=N.getUiContainer(n);e=t.selection.getScrollContainer()||t.getWin(),M.bind(e,"scroll",r),M.bind(i,"scroll",r),t.on("remove",function(){M.unbind(e,"scroll",r),M.unbind(i,"scroll",r)})}}(r),n.toolbar.panel=r,r.renderTo().reflow(),i(n)},s=function(){r.each(n(),function(t){t.panel&&t.panel.hide()})},u=function(e){var r,i,o,a=n();for(r=(o=t.$(e).parents().add(e)).length-1;r>=0;r--)for(i=a.length-1;i>=0;i--)if(a[i].predicate(o[r]))return{toolbar:a[i],element:o[r]};return null};t.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&y.setEditorTimeout(t,function(){var e;(e=u(t.selection.getNode()))?(s(),a(e)):s()})}),t.on("blur hide contextmenu",s),t.on("ObjectResizeStart",function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),t.on("ResizeEditor ResizeWindow",o(!0)),t.on("nodeChange",o(!1)),t.on("remove",function(){r.each(n(),function(t){t.panel&&t.panel.remove()}),t.contextToolbars={}}),t.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},W=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(e)===t}},L=W("function"),z=W("number"),F=void 0===(t=Array.prototype.indexOf)?function(t,e){return X(t,e)}:function(e,n){return t.call(e,n)},U=function(t,e){return $(t,e).isSome()},q=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i,t)}return r},V=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},j=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r,t)&&n.push(o)}return n},Y=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n,t))return k.some(i)}return k.none()},$=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n,t))return k.some(n);return k.none()},X=function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},G=Array.prototype.push,J=(Array.prototype.slice,L(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),K=function(t,e){return"|"===t?{name:"|",item:{text:"|"}}:e?{name:t,item:e}:null},Z=function(t){return t&&"|"===t.item.text},Q=function(t,e,n,i){var o,a,s,u;return e?(a=e[i],u=!0):a=J[i],a&&(o={text:a.title},s=[],r.each((a.items||"").split(/[ ,]/),function(e){var n=K(e,t[e]);n&&s.push(n)}),u||r.each(t,function(t,e){t.context!==i||function(t,e){return $(t,function(t){return t.name===e}).isSome()}(s,e)||("before"===t.separator&&s.push({name:"|",item:{text:"|"}}),t.prependToContext?s.unshift(K(e,t)):s.push(K(e,t)),"after"===t.separator&&s.push({name:"|",item:{text:"|"}}))}),o.menu=q(function(t,e){var n=j(t,function(t){return!1===e.hasOwnProperty(t.name)}),r=j(n,function(t,e,n){return!Z(t)||!Z(n[e-1])});return j(r,function(t,e,n){return!Z(t)||e>0&&e<n.length-1})}(s,n),function(t){return t.item}),!o.menu.length)?null:o},tt=function(t){for(var e=[],n=function(t){var e,n=[],r=s(t);if(r)for(e in r)n.push(e);else for(e in J)n.push(e);return n}(t),i=r.makeMap(function(t){return t.getParam("removed_menuitems","")}(t).split(/[ ,]/)),a=o(t),u="string"==typeof a?a.split(/[ ,]/):n,l=0;l<u.length;l++){var c=u[l],f=Q(t.menuItems,s(t),i,c);f&&e.push(f)}return e},et=c.DOM,nt=function(t){return{width:t.clientWidth,height:t.clientHeight}},rt=function(t,e,n){var r,i,o,a;r=t.getContainer(),i=t.getContentAreaContainer().firstChild,o=nt(r),a=nt(i),null!==e&&(e=Math.max(function(t){return t.getParam("min_width",100,"number")}(t),e),e=Math.min(function(t){return t.getParam("max_width",65535,"number")}(t),e),et.setStyle(r,"width",e+(o.width-a.width)),et.setStyle(i,"width",e)),n=Math.max(function(t){return t.getParam("min_height",100,"number")}(t),n),n=Math.min(function(t){return t.getParam("max_height",65535,"number")}(t),n),et.setStyle(i,"height",n),m(t)},it=rt,ot=function(t,e,n){var r=t.getContentAreaContainer();rt(t,r.clientWidth+e,r.clientHeight+n)},at=tinymce.util.Tools.resolve("tinymce.Env"),st=function(t,e,n){var r,i=t.settings[n];i&&i((r=e.getEl("body"),{element:function(){return r}}))},ut=function(t,e,n){return function(i){var o=i.control,a=o.parents().filter("panel")[0],s=a.find("#"+e)[0],u=function(t,e){return r.grep(t,function(t){return t.name===e})[0]}(n,e);!function(t,e,n){r.each(n,function(n){var r=e.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==t&&(st(n,r,"onhide"),r.visible(!1))})}(e,a,n),o.parent().items().each(function(t){t.active(!1)}),s&&s.visible()?(st(u,s,"onhide"),s.hide(),o.active(!1)):(s?(s.show(),st(u,s,"onshow")):(s=f.create({type:"container",name:e,layout:"stack",classes:"sidebar-panel",html:""}),a.prepend(s),st(u,s,"onrender"),st(u,s,"onshow")),o.active(!0)),m(t)}},lt=function(t){return!(at.ie&&!(at.ie>=11)||!t.sidebars)&&t.sidebars.length>0},ct=function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:r.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:ut(t,e.name,t.sidebars)}})}]}},ft=function(t){var e=function(){t._skinLoaded=!0,h(t)};return function(){t.initialized?e():t.on("init",e)}},dt=c.DOM,ht=function(t){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:t,html:""}},mt=function(t,e,n){var r,o,s;if(!1===u(t)&&n.skinUiCss?dt.styleSheetLoader.load(n.skinUiCss,ft(t)):ft(t)(),r=e.panel=f.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===i(t)?null:{type:"menubar",border:"0 0 1 0",items:tt(t)},A(t,a(t))]},lt(t)?function(t){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[ht("0"),ct(t)]}}(t):ht("1 0 0 0")]}),N.setUiContainer(t,r),"none"!==l(t)&&(o={type:"resizehandle",direction:l(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;s={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===l(t)?it(t,s.width+e.deltaX,s.height+e.deltaY):it(t,null,s.height+e.deltaY)}}),function(t){return t.getParam("statusbar",!0,"boolean")}(t)){var c=d.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),h=function(t){return t.getParam("branding",!0,"boolean")}(t)?{type:"label",classes:"branding",html:" "+c}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},o,h]})}return g(t),t.on("SwitchMode",function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}}(r)),r.renderBefore(n.targetNode).reflow(),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly"),n.width&&dt.setStyle(r.getEl(),"width",n.width),t.on("remove",function(){r.remove(),r=null}),v(t,r),I(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},gt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),pt=0,vt={id:function(){return"mceu_"+pt++},create:function(t,e,n){var i=document.createElement(t);return c.DOM.setAttribs(i,e),"string"==typeof n?i.innerHTML=n:r.each(n,function(t){t.nodeType&&i.appendChild(t)}),i},createFragment:function(t){return c.DOM.createFragment(t)},getWindowSize:function(){return c.DOM.getViewPort()},getSize:function(t){var e,n;if(t.getBoundingClientRect){var r=t.getBoundingClientRect();e=Math.max(r.width||r.right-r.left,t.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,t.offsetHeight)}else e=t.offsetWidth,n=t.offsetHeight;return{width:e,height:n}},getPos:function(t,e){return c.DOM.getPos(t,e||vt.getContainer())},getContainer:function(){return at.container?at.container:document.body},getViewPort:function(t){return c.DOM.getViewPort(t)},get:function(t){return document.getElementById(t)},addClass:function(t,e){return c.DOM.addClass(t,e)},removeClass:function(t,e){return c.DOM.removeClass(t,e)},hasClass:function(t,e){return c.DOM.hasClass(t,e)},toggleClass:function(t,e,n){return c.DOM.toggleClass(t,e,n)},css:function(t,e,n){return c.DOM.setStyle(t,e,n)},getRuntimeStyle:function(t,e){return c.DOM.getStyle(t,e,!0)},on:function(t,e,n,r){return c.DOM.bind(t,e,n,r)},off:function(t,e,n){return c.DOM.unbind(t,e,n)},fire:function(t,e,n){return c.DOM.fire(t,e,n)},innerHtml:function(t,e){c.DOM.setHTML(t,e)}},bt=function(t){return"static"===vt.getRuntimeStyle(t,"position")},yt=function(t){return t.state.get("fixed")};function wt(t,e,n){var r,i,o,a,s,u,l,c,f,d;return f=xt(),o=(i=vt.getPos(e,N.getUiContainer(t))).x,a=i.y,yt(t)&&bt(document.body)&&(o-=f.x,a-=f.y),r=t.getEl(),s=(d=vt.getSize(r)).width,u=d.height,l=(d=vt.getSize(e)).width,c=d.height,"b"===(n=(n||"").split(""))[0]&&(a+=c),"r"===n[1]&&(o+=l),"c"===n[0]&&(a+=Math.round(c/2)),"c"===n[1]&&(o+=Math.round(l/2)),"b"===n[3]&&(a-=u),"r"===n[4]&&(o-=s),"c"===n[3]&&(a-=Math.round(u/2)),"c"===n[4]&&(o-=Math.round(s/2)),{x:o,y:a,w:s,h:u}}var xt=function(){var t=window,e=Math.max(t.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(t.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:e,y:n,w:e+(t.innerWidth||document.documentElement.clientWidth),h:n+(t.innerHeight||document.documentElement.clientHeight)}},Ct=function(t){var e=N.getUiContainer(t);return e&&!yt(t)?function(t){return{x:0,y:0,w:t.scrollWidth-1,h:t.scrollHeight-1}}(e):xt()},Rt={testMoveRel:function(t,e){for(var n=Ct(this),r=0;r<e.length;r++){var i=wt(this,t,e[r]);if(yt(this)){if(i.x>0&&i.x+i.w<n.w&&i.y>0&&i.y+i.h<n.h)return e[r]}else if(i.x>n.x&&i.x+i.w<n.w&&i.y>n.y&&i.y+i.h<n.h)return e[r]}return e[0]},moveRel:function(t,e){"string"!=typeof e&&(e=this.testMoveRel(t,e));var n=wt(this,t,e);return this.moveTo(n.x,n.y)},moveBy:function(t,e){var n=this.layoutRect();return this.moveTo(n.x+t,n.y+e),this},moveTo:function(t,e){function n(t,e,n){return t<0?0:t+n>e&&(t=e-n)<0?0:t}if(this.settings.constrainToViewport){var r=Ct(this),i=this.layoutRect();t=n(t,r.w,i.w),e=n(e,r.h,i.h)}var o=N.getUiContainer(this);return o&&bt(o)&&!yt(this)&&(t-=o.scrollLeft,e-=o.scrollTop),o&&(t+=1,e+=1),this.state.get("rendered")?this.layoutRect({x:t,y:e}).repaint():(this.settings.x=t,this.settings.y=e),this.fire("move",{x:t,y:e}),this}},St=tinymce.util.Tools.resolve("tinymce.util.Class"),Tt=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),_t=function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},kt=function(t,e){function n(e){var n=parseFloat(function(e){var n=t.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(t,null);return r?(e=e.replace(/[A-Z]/g,function(t){return"-"+t}),r.getPropertyValue(e)):null}return t.currentStyle[e]}(e));return isNaN(n)?0:n}return{top:n(e+"TopWidth"),right:n(e+"RightWidth"),bottom:n(e+"BottomWidth"),left:n(e+"LeftWidth")}};function Et(){}function Nt(t){this.cls=[],this.cls._map={},this.onchange=t||Et,this.prefix=""}r.extend(Nt.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){var e=void 0;for(e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Nt.prototype.toString=function(){var t;if(this.clsValue)return this.clsValue;t="";for(var e=0;e<this.cls.length;e++)e>0&&(t+=" "),t+=this.prefix+this.cls[e];return t};var Dt,Ot,At,Mt=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Pt=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Bt=/^\s*|\s*$/g,Ht=St.extend({init:function(t){var e=this.match;function n(t,n,i){var o;function a(t){t&&n.push(t)}return a(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((o=Mt.exec(t.replace(Bt,"")))[1])),a(function(t){if(t)return function(e){return e._name===t}}(o[2])),a(function(t){if(t)return t=t.split("."),function(e){for(var n=t.length;n--;)if(!e.classes.contains(t[n]))return!1;return!0}}(o[3])),a(function(t,e,n){if(t)return function(r){var i=r[t]?r[t]():"";return e?"="===e?i===n:"*="===e?i.indexOf(n)>=0:"~="===e?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===e?i!==n:"^="===e?0===i.indexOf(n):"$="===e&&i.substr(i.length-n.length)===n:!!n}}(o[4],o[5],o[6])),a(function(t){var n;if(t)return(t=/(?:not\((.+)\))|(.+)/i.exec(t))[1]?(n=r(t[1],[]),function(t){return!e(t,n)}):(t=t[2],function(e,n,r){return"first"===t?0===n:"last"===t?n===r-1:"even"===t?n%2==0:"odd"===t?n%2==1:!!e[t]&&e[t]()})}(o[7])),n.pseudo=!!o[7],n.direct=i,n}function r(t,e){var i,o,a,s=[];do{if(Pt.exec(""),(o=Pt.exec(t))&&(t=o[3],s.push(o[1]),o[2])){i=o[3];break}}while(o);for(i&&r(i,e),t=[],a=0;a<s.length;a++)">"!==s[a]&&t.push(n(s[a],[],">"===s[a-1]));return e.push(t),e}this._selectors=r(t,[])},match:function(t,e){var n,r,i,o,a,s,u,l,c,f,d,h,m;for(n=0,r=(e=e||this._selectors).length;n<r;n++){for(m=t,h=0,i=(o=(a=e[n]).length)-1;i>=0;i--)for(l=a[i];m;){if(l.pseudo)for(c=f=(d=m.parent().items()).length;c--&&d[c]!==m;);for(s=0,u=l.length;s<u;s++)if(!l[s](m,c,f)){s=u+1;break}if(s===u){h++;break}if(i===o-1)break;m=m.parent()}if(h===o)return!0}return!1},find:function(t){var e,n,r=[],i=this._selectors;function o(t,e,n){var i,a,s,u,l,c=e[n];for(i=0,a=t.length;i<a;i++){for(l=t[i],s=0,u=c.length;s<u;s++)if(!c[s](l,i,a)){s=u+1;break}if(s===u)n===e.length-1?r.push(l):l.items&&o(l.items(),e,n+1);else if(c.direct)return;l.items&&o(l.items(),e,n)}}if(t.items){for(e=0,n=i.length;e<n;e++)o(t.items(),i[e],0);n>1&&(r=function(t){for(var e,n=[],r=t.length;r--;)(e=t[r]).__checked||(n.push(e),e.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return Dt||(Dt=Ht.Collection),new Dt(r)}}),It=Array.prototype.push,Wt=Array.prototype.slice;At={length:0,init:function(t){t&&this.add(t)},add:function(t){return r.isArray(t)?It.apply(this,t):t instanceof Ot?this.add(t.toArray()):It.call(this,t),this},set:function(t){var e,n=this.length;for(this.length=0,this.add(t),e=this.length;e<n;e++)delete this[e];return this},filter:function(t){var e,n,r,i,o=[];for("string"==typeof t?(t=new Ht(t),i=function(e){return t.match(e)}):i=t,e=0,n=this.length;e<n;e++)i(r=this[e])&&o.push(r);return new Ot(o)},slice:function(){return new Ot(Wt.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(t){return r.each(this,t),this},toArray:function(){return r.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new Ot(r.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(t,e){var n;return void 0!==e?(this.each(function(n){n[t]&&n[t](e)}),this):(n=this[0])&&n[t]?n[t]():void 0},exec:function(t){var e=r.toArray(arguments).slice(1);return this.each(function(n){n[t]&&n[t].apply(n,e)}),this},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},r.each("fire on off show hide append prepend before after reflow".split(" "),function(t){At[t]=function(){var e=r.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,e)}),this}}),r.each("text name disabled active selected checked visible parent value data".split(" "),function(t){At[t]=function(e){return this.prop(t,e)}}),Ot=St.extend(At),Ht.Collection=Ot;var Lt=Ot,zt=function(t){this.create=t.create};zt.create=function(t,e){return new zt({create:function(n,r){var i,o=function(t){n.set(r,t.value)};return n.on("change:"+r,function(n){t.set(e,n.value)}),t.on("change:"+e,o),(i=n._bindings)||(i=n._bindings=[],n.on("destroy",function(){for(var t=i.length;t--;)i[t]()})),i.push(function(){t.off("change:"+e,o)}),t.get(e)}})};var Ft=tinymce.util.Tools.resolve("tinymce.util.Observable");function Ut(t){return t.nodeType>0}var qt,Vt,jt=St.extend({Mixins:[Ft],init:function(t){var e,n;for(e in t=t||{})(n=t[e])instanceof zt&&(t[e]=n.create(this,e));this.data=t},set:function(t,e){var n,i,o=this.data[t];if(e instanceof zt&&(e=e.create(this,t)),"object"==typeof t){for(n in t)this.set(n,t[n]);return this}return function t(e,n){var i,o;if(e===n)return!0;if(null===e||null===n)return e===n;if("object"!=typeof e||"object"!=typeof n)return e===n;if(r.isArray(n)){if(e.length!==n.length)return!1;for(i=e.length;i--;)if(!t(e[i],n[i]))return!1}if(Ut(e)||Ut(n))return e===n;for(i in o={},n){if(!t(e[i],n[i]))return!1;o[i]=!0}for(i in e)if(!o[i]&&!t(e[i],n[i]))return!1;return!0}(o,e)||(this.data[t]=e,i={target:this,name:t,value:e,oldValue:o},this.fire("change:"+t,i),this.fire("change",i)),this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(t){return zt.create(this,t)},destroy:function(){this.fire("destroy")}}),Yt={},$t={add:function(t){var e=t.parent();if(e){if(!e._layout||e._layout.isNative())return;Yt[e._id]||(Yt[e._id]=e),qt||(qt=!0,y.requestAnimationFrame(function(){var t,e;for(t in qt=!1,Yt)(e=Yt[t]).state.get("rendered")&&e.reflow();Yt={}},document.body))}},remove:function(t){Yt[t._id]&&delete Yt[t._id]}},Xt="onmousewheel"in document,Gt=!1,Jt=0,Kt={Statics:{classPrefix:"mce-"},isRtl:function(){return Vt.rtl},classPrefix:"mce-",init:function(t){var e,n,i=this;function o(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)i.classes.add(t[e])}i.settings=t=r.extend({},i.Defaults,t),i._id=t.id||"mceu_"+Jt++,i._aria={role:t.role},i._elmCache={},i.$=gt,i.state=new jt({visible:!0,active:!1,disabled:!1,value:""}),i.data=new jt(t.data),i.classes=new Nt(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(e=t.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&e!==n&&o(n),o(e)),r.each("title text name visible disabled active value".split(" "),function(e){e in t&&i[e](t[e])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=t,i.borderBox=_t(t.border),i.paddingBox=_t(t.padding),i.marginBox=_t(t.margin),t.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){var t=N.getUiContainer(this);return t||vt.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,r,i,o,a,s,u,l,c=this.settings,f=this.getEl();t=this.borderBox=this.borderBox||kt(f,"border"),this.paddingBox=this.paddingBox||kt(f,"padding"),this.marginBox=this.marginBox||kt(f,"margin"),l=vt.getSize(f),s=c.minWidth,u=c.minHeight,i=s||l.width,o=u||l.height,n=c.width,r=c.height,a=void 0!==(a=c.autoResize)?a:!n&&!r,n=n||i,r=r||o;var d=t.left+t.right,h=t.top+t.bottom,m=c.maxWidth||65535,g=c.maxHeight||65535;return this._layoutRect=e={x:c.x||0,y:c.y||0,w:n,h:r,deltaW:d,deltaH:h,contentW:n-d,contentH:r-h,innerW:n-d,innerH:r-h,startMinWidth:s||0,startMinHeight:u||0,minW:Math.min(i,m),minH:Math.min(o,g),maxW:m,maxH:g,autoResize:a,scrollW:0},this._lastLayoutRect={},e},layoutRect:function(t){var e,n,r,i,o,a=this._layoutRect;return a||(a=this.initLayoutRect()),t?(r=a.deltaW,i=a.deltaH,void 0!==t.x&&(a.x=t.x),void 0!==t.y&&(a.y=t.y),void 0!==t.minW&&(a.minW=t.minW),void 0!==t.minH&&(a.minH=t.minH),void 0!==(n=t.w)&&(n=(n=n<a.minW?a.minW:n)>a.maxW?a.maxW:n,a.w=n,a.innerW=n-r),void 0!==(n=t.h)&&(n=(n=n<a.minH?a.minH:n)>a.maxH?a.maxH:n,a.h=n,a.innerH=n-i),void 0!==(n=t.innerW)&&(n=(n=n<a.minW-r?a.minW-r:n)>a.maxW-r?a.maxW-r:n,a.innerW=n,a.w=n+r),void 0!==(n=t.innerH)&&(n=(n=n<a.minH-i?a.minH-i:n)>a.maxH-i?a.maxH-i:n,a.innerH=n,a.h=n+i),void 0!==t.contentW&&(a.contentW=t.contentW),void 0!==t.contentH&&(a.contentH=t.contentH),(e=this._lastLayoutRect).x===a.x&&e.y===a.y&&e.w===a.w&&e.h===a.h||((o=Vt.repaintControls)&&o.map&&!o.map[this._id]&&(o.push(this),o.map[this._id]=!0),e.x=a.x,e.y=a.y,e.w=a.w,e.h=a.h),this):a},repaint:function(){var t,e,n,r,i,o,a,s,u,l;u=document.createRange?function(t){return t}:Math.round,t=this.getEl().style,r=this._layoutRect,s=this._lastRepaintRect||{},o=(i=this.borderBox).left+i.right,a=i.top+i.bottom,r.x!==s.x&&(t.left=u(r.x)+"px",s.x=r.x),r.y!==s.y&&(t.top=u(r.y)+"px",s.y=r.y),r.w!==s.w&&(l=u(r.w-o),t.width=(l>=0?l:0)+"px",s.w=r.w),r.h!==s.h&&(l=u(r.h-a),t.height=(l>=0?l:0)+"px",s.h=r.h),this._hasBody&&r.innerW!==s.innerW&&(l=u(r.innerW),(n=this.getEl("body"))&&((e=n.style).width=(l>=0?l:0)+"px"),s.innerW=r.innerW),this._hasBody&&r.innerH!==s.innerH&&(l=u(r.innerH),(n=n||this.getEl("body"))&&((e=e||n.style).height=(l>=0?l:0)+"px"),s.innerH=r.innerH),this._lastRepaintRect=s,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,vt.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(t,e){var n=this;return Zt(n).on(t,function(t){var e,r;return"string"!=typeof t?t:function(i){return e||n.parentsAndSelf().each(function(n){var i=n.settings.callbacks;if(i&&(e=i[t]))return r=n,!1}),e?e.call(r,i):(i.action=t,void this.fire("execute",i))}}(e)),n},off:function(t,e){return Zt(this).off(t,e),this},fire:function(t,e,n){if((e=e||{}).control||(e.control=this),e=Zt(this).fire(t,e),!1!==n&&this.parent)for(var r=this.parent();r&&!e.isPropagationStopped();)r.fire(t,e,!1),r=r.parent();return e},hasEventListeners:function(t){return Zt(this).has(t)},parents:function(t){var e,n=new Lt;for(e=this.parent();e;e=e.parent())n.add(e);return t&&(n=n.filter(t)),n},parentsAndSelf:function(t){return new Lt(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){var e=t?this._id+"-"+t:this._id;return this._elmCache[e]||(this._elmCache[e]=gt("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this.getEl(this.ariaTarget);return void 0===e?this._aria[t]:(this._aria[t]=e,this.state.get("rendered")&&n.setAttribute("role"===t?t:"aria-"+t,e),this)},encode:function(t,e){return!1!==e&&(t=this.translate(t)),(t||"").replace(/[&<>"]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},translate:function(t){return Vt.translate?Vt.translate(t):t},before:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this),!0),this},after:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this)),this},remove:function(){var t,e,n=this,r=n.getEl(),i=n.parent();if(n.items){var o=n.items().toArray();for(e=o.length;e--;)o[e].remove()}i&&i.items&&(t=[],i.items().each(function(e){e!==n&&t.push(e)}),i.items().set(t),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&gt(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return gt(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return gt(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,r,i,o=this,a=o.settings;for(r in o.$el=gt(o.getEl()),o.state.set("rendered",!0),a)0===r.indexOf("on")&&o.on(r.substr(2),a[r]);if(o._eventsRoot){for(n=o.parent();!i&&n;n=n.parent())i=n._eventsRoot;if(i)for(r in i._nativeEvents)o._nativeEvents[r]=!0}Qt(o),a.style&&(t=o.getEl())&&(t.setAttribute("style",a.style),t.style.cssText=a.style),o.settings.border&&(e=o.borderBox,o.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}));var s=o.getRoot();for(var u in s.controlIdLookup||(s.controlIdLookup={}),s.controlIdLookup[o._id]=o,o._aria)o.aria(u,o._aria[u]);!1===o.state.get("visible")&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",function(t){var e,n=t.value;o.state.get("rendered")&&(o.getEl().style.display=!1===n?"none":"",o.getEl().getBoundingClientRect()),(e=o.parent())&&(e._lastRect=null),o.fire(n?"show":"hide"),$t.add(o)}),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e,n,r,i,o,a,s=this.getEl(),u=s.parentNode,l=function(t,e){var n,r,i=t;for(n=r=0;i&&i!==e&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(s,u);return e=l.x,n=l.y,r=s.offsetWidth,i=s.offsetHeight,o=u.clientWidth,a=u.clientHeight,"end"===t?(e-=o-r,n-=a-i):"center"===t&&(e-=o/2-r/2,n-=a/2-i/2),u.scrollLeft=e,u.scrollTop=n,this},getRoot:function(){for(var t,e=this,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var r=n.length;r--;)n[r].rootControl=t;return t},reflow:function(){$t.remove(this);var t=this.parent();return t&&t._layout&&!t._layout.isNative()&&t.reflow(),this}};function Zt(t){return t._eventDispatcher||(t._eventDispatcher=new Tt({scope:t,toggleEvent:function(e,n){n&&Tt.isNative(e)&&(t._nativeEvents||(t._nativeEvents={}),t._nativeEvents[e]=!0,t.state.get("rendered")&&Qt(t))}})),t._eventDispatcher}function Qt(t){var e,n,r,i,o,a;function s(e){var n=t.getParentCtrl(e.target);n&&n.fire(e.type,e)}function u(){var t=i._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(t){t.fire("mouseleave",{target:t.getEl()})}),i._lastHoverCtrl=null)}function l(e){var n,r,o,a=t.getParentCtrl(e.target),s=i._lastHoverCtrl,u=0;if(a!==s){if(i._lastHoverCtrl=a,(r=a.parents().toArray().reverse()).push(a),s){for((o=s.parents().toArray().reverse()).push(s),u=0;u<o.length&&r[u]===o[u];u++);for(n=o.length-1;n>=u;n--)(s=o[n]).fire("mouseleave",{target:s.getEl()})}for(n=u;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function c(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=t.fire("wheel",e)}if(o=t._nativeEvents){for((r=t.parents().toArray()).unshift(t),e=0,n=r.length;!i&&e<n;e++)i=r[e]._eventsRoot;for(i||(i=r[r.length-1]||t),t._eventsRoot=i,n=e,e=0;e<n;e++)r[e]._eventsRoot=i;var f=i._delegates;for(a in f||(f=i._delegates={}),o){if(!o)return!1;"wheel"!==a||Gt?("mouseenter"===a||"mouseleave"===a?i._hasMouseEnter||(gt(i.getEl()).on("mouseleave",u).on("mouseover",l),i._hasMouseEnter=1):f[a]||(gt(i.getEl()).on(a,s),f[a]=!0),o[a]=!1):Xt?gt(t.getEl()).on("mousewheel",c):gt(t.getEl()).on("DOMMouseScroll",c)}}}r.each("text title visible disabled active value".split(" "),function(t){Kt[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}});var te=Vt=St.extend(Kt),ee=function(t){return!!t.getAttribute("data-mce-tabstop")};function ne(t){var e,n,r=t.root;function i(t){return t&&1===t.nodeType}try{e=document.activeElement}catch(t){e=document.body}function o(t){return i(t=t||e)?t.getAttribute("role"):null}function a(t){for(var n,r=t||e;r=r.parentNode;)if(n=o(r))return n}function s(t){var n=e;if(i(n))return n.getAttribute("aria-"+t)}function u(t){var e=t.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function l(t){var e=[];return function t(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(t){return!(!u(t)||t.hidden)||!!ee(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(t))})(n)&&e.push(n);for(var r=0;r<n.childNodes.length;r++)t(n.childNodes[r])}}(t||r.getEl()),e}function c(t){var e,r;(r=(t=t||n).parents().toArray()).unshift(t);for(var i=0;i<r.length&&!(e=r[i]).settings.ariaRoot;i++);return e}function f(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function d(t,n){var r=-1,i=c();n=n||l(i.getEl());for(var o=0;o<n.length;o++)n[o]===e&&(r=o);r+=t,i.lastAriaIndex=f(r,n)}function h(){"tablist"===a()?d(-1,l(e.parentNode)):n.parent().submenu?v():d(-1)}function m(){var t=o(),n=a();"tablist"===n?d(1,l(e.parentNode)):"menuitem"===t&&"menu"===n&&s("haspopup")?b():d(1)}function g(){d(-1)}function p(){var t=o(),e=a();"menuitem"===t&&"menubar"===e?b():"button"===t&&s("haspopup")?b({key:"down"}):d(1)}function v(){n.fire("cancel")}function b(t){t=t||{},n.fire("click",{target:e,aria:t})}return n=r.getParentCtrl(e),r.on("keydown",function(t){function r(t,n){u(e)||ee(e)||"slider"!==o(e)&&!1!==n(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:r(t,h);break;case 39:r(t,m);break;case 38:r(t,g);break;case 40:r(t,p);break;case 27:v();break;case 14:case 13:case 32:r(t,b);break;case 9:!function(t){if("tablist"===a()){var e=l(n.getEl("body"))[0];e&&e.focus()}else d(t.shiftKey?-1:1)}(t),t.preventDefault()}}),r.on("focusin",function(t){e=t.target,n=t.control}),{focusFirst:function(t){var e=c(t),n=l(e.getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?f(e.lastAriaIndex,n):f(0,n)}}}var re={},ie=te.extend({init:function(t){var e=this;e._super(t),(t=e.settings).fixed&&e.state.set("fixed",!0),e._items=new Lt,e.isRtl()&&e.classes.add("rtl"),e.bodyClasses=new Nt(function(){e.state.get("rendered")&&(e.getEl("body").className=this.toString())}),e.bodyClasses.prefix=e.classPrefix,e.classes.add("container"),e.bodyClasses.add("container-body"),t.containerCls&&e.classes.add(t.containerCls),e._layout=f.create((t.layout||"")+"layout"),e.settings.items?e.add(e.settings.items):e.add(e.render()),e._hasBody=!0},items:function(){return this._items},find:function(t){return(t=re[t]=re[t]||new Ht(t)).find(this)},add:function(t){return this.items().add(this.create(t)).parent(this),this},focus:function(t){var e,n,r;if(!t||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return r=this.find("*"),this.statusbar&&r.add(this.statusbar.items()),r.each(function(t){if(t.settings.autofocus)return e=null,!1;t.canFocus&&(e=e||t)}),e&&e.focus(),this;n.focusFirst(this)},replace:function(t,e){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===t){r[i]=e;break}i>=0&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(t){var e,n=this,i=[];return r.isArray(t)||(t=[t]),r.each(t,function(t){t&&(t instanceof te||("string"==typeof t&&(t={type:t}),e=r.extend({},n.settings.defaults,t),t.type=e.type=e.type||t.type||n.settings.defaultType||(e.defaults?e.defaults.type:null),t=f.create(e)),i.push(t))}),i},renderNew:function(){var t=this;return t.items().each(function(e,n){var r;e.parent(t),e.state.get("rendered")||((r=t.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?gt(r.childNodes[n]).before(e.renderHtml()):gt(r).append(e.renderHtml()),e.postRender(),$t.add(e))}),t._layout.applyClasses(t.items().filter(":visible")),t._lastRect=null,t},append:function(t){return this.add(t).renderNew()},prepend:function(t){return this.items().set(this.create(t).concat(this.items().toArray())),this.renderNew()},insert:function(t,e,n){var r,i,o;return t=this.create(t),r=this.items(),!n&&e<r.length-1&&(e+=1),e>=0&&e<r.length&&(i=r.slice(0,e).toArray(),o=r.slice(e).toArray(),r.set(i.concat(t,o))),this.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var t={};return this.find("*").each(function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)}),t},renderHtml:function(){var t=this._layout,e=this.settings.role;return this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(e?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"},postRender:function(){var t;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(t=this.borderBox,this.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),this.parent()||(this.keyboardNav=ne({root:this})),this},initLayoutRect:function(){var t=this._super();return this._layout.recalc(this),t},recalc:function(){var t=this._layoutRect,e=this._lastRect;if(!e||e.w!==t.w||e.h!==t.h)return this._layout.recalc(this),t=this.layoutRect(),this._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if($t.remove(this),this.visible()){for(te.repaintControls=[],te.repaintControls.map={},this.recalc(),t=te.repaintControls.length;t--;)te.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),te.repaintControls=[]}return this}});function oe(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function ae(t,e){var n,r,i,o,a,s,u,l=e.document||document;e=e||{};var c=l.getElementById(e.handle||t);i=function(t){var i,f,d=function(t){var e,n,r,i,o,a,s,u,l=Math.max;return e=t.documentElement,n=t.body,r=l(e.scrollWidth,n.scrollWidth),i=l(e.clientWidth,n.clientWidth),o=l(e.offsetWidth,n.offsetWidth),a=l(e.scrollHeight,n.scrollHeight),s=l(e.clientHeight,n.clientHeight),u=l(e.offsetHeight,n.offsetHeight),{width:r<o?i:r,height:a<u?s:a}}(l);oe(t),t.preventDefault(),r=t.button,i=c,s=t.screenX,u=t.screenY,f=window.getComputedStyle?window.getComputedStyle(i,null).getPropertyValue("cursor"):i.runtimeStyle.cursor,n=gt("<div></div>").css({position:"absolute",top:0,left:0,width:d.width,height:d.height,zIndex:2147483647,opacity:1e-4,cursor:f}).appendTo(l.body),gt(l).on("mousemove touchmove",a).on("mouseup touchend",o),e.start(t)},a=function(t){if(oe(t),t.button!==r)return o(t);t.deltaX=t.screenX-s,t.deltaY=t.screenY-u,t.preventDefault(),e.drag(t)},o=function(t){oe(t),gt(l).off("mousemove touchmove",a).off("mouseup touchend",o),n.remove(),e.stop&&e.stop(t)},this.destroy=function(){gt(c).off()},gt(c).on("mousedown touchstart",i)}var se,ue,le,ce,fe={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var t=this,e=2;function n(){var n,r,i;function o(i,o,a,s,u,l){var c,f,d,h,m,g,p,v;if(f=t.getEl("scroll"+i)){if(p=o.toLowerCase(),v=a.toLowerCase(),gt(t.getEl("absend")).css(p,t.layoutRect()[s]-1),!u)return void gt(f).css("display","none");gt(f).css("display","block"),c=t.getEl("body"),d=t.getEl("scroll"+i+"t"),h=c["client"+a]-2*e,m=(h-=n&&r?f["client"+l]:0)/c["scroll"+a],(g={})[p]=c["offset"+o]+e,g[v]=h,gt(f).css(g),(g={})[p]=c["scroll"+o]*m,g[v]=h*m,gt(d).css(g)}}i=t.getEl("body"),n=i.scrollWidth>i.clientWidth,r=i.scrollHeight>i.clientHeight,o("h","Left","Width","contentW",n,"Height"),o("v","Top","Height","contentH",r,"Width")}t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function n(n,r,i,o,a){var s,u=t._id+"-scroll"+n,l=t.classPrefix;gt(t.getEl()).append('<div id="'+u+'" class="'+l+"scrollbar "+l+"scrollbar-"+n+'"><div id="'+u+'t" class="'+l+'scrollbar-thumb"></div></div>'),t.draghelper=new ae(u+"t",{start:function(){s=t.getEl("body")["scroll"+r],gt("#"+u).addClass(l+"active")},drag:function(u){var l,c,f,d,h=t.layoutRect();c=h.contentW>h.innerW,f=h.contentH>h.innerH,d=t.getEl("body")["client"+i]-2*e,l=(d-=c&&f?t.getEl("scroll"+n)["client"+a]:0)/t.getEl("body")["scroll"+i],t.getEl("body")["scroll"+r]=s+u["delta"+o]/l},stop:function(){gt("#"+u).removeClass(l+"active")}})}t.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),t.on("wheel",function(e){var r=t.getEl("body");r.scrollLeft+=10*(e.deltaX||0),r.scrollTop+=10*e.deltaY,n()}),gt(t.getEl("body")).on("scroll",n)),n())}},de=ie.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[fe],renderHtml:function(){var t=this._layout,e=this.settings.html;return this.preRender(),t.preRender(this),void 0===e?e='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+t.renderHtml(this)+"</div>":("function"==typeof e&&(e=e.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+e+"</div>"}}),he={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,e){if(t<=1||e<=1){var n=vt.getWindowSize();t=t<=1?t*n.w:t,e=e<=1?e*n.h:e}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:e,w:t,h:e}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}},me=[],ge=[];function pe(t,e){for(;t;){if(t===e)return!0;t=t.parent()}}function ve(){se||(se=function(t){2!==t.button&&function(t){for(var e=me.length;e--;){var n=me[e],r=n.getParentCtrl(t.target);if(n.settings.autohide){if(r&&(pe(r,n)||n.parent()===r))continue;(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide()}}}(t)},gt(document).on("click touchstart",se))}function be(t){var e=vt.getViewPort().y;function n(e,n){for(var r,i=0;i<me.length;i++)if(me[i]!==t)for(r=me[i].parent();r&&(r=r.parent());)r===t&&me[i].fixed(e).moveBy(0,n).repaint()}t.settings.autofix&&(t.state.get("fixed")?t._autoFixY>e&&(t.fixed(!1).layoutRect({y:t._autoFixY}).repaint(),n(!1,t._autoFixY-e)):(t._autoFixY=t.layoutRect().y,t._autoFixY<e&&(t.fixed(!0).layoutRect({y:0}).repaint(),n(!0,e-t._autoFixY))))}function ye(t,e){var n,r,i=we.zIndex||65535;if(t)ge.push(e);else for(n=ge.length;n--;)ge[n]===e&&ge.splice(n,1);if(ge.length)for(n=0;n<ge.length;n++)ge[n].modal&&(i++,r=ge[n]),ge[n].getEl().style.zIndex=i,ge[n].zIndex=i,i++;var o=gt("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];r?gt(o).css("z-index",r.zIndex-1):o&&(o.parentNode.removeChild(o),ce=!1),we.currentZIndex=i}var we=de.extend({Mixins:[Rt,he],init:function(t){var e=this;e._super(t),e._eventsRoot=e,e.classes.add("floatpanel"),t.autohide&&(ve(),function(){if(!le){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight;le=function(){document.all&&e===t.clientWidth&&n===t.clientHeight||(e=t.clientWidth,n=t.clientHeight,we.hideAll())},gt(window).on("resize",le)}}(),me.push(e)),t.autofix&&(ue||(ue=function(){var t;for(t=me.length;t--;)be(me[t])},gt(window).on("scroll",ue)),e.on("move",function(){be(this)})),e.on("postrender show",function(t){if(t.control===e){var n,r=e.classPrefix;e.modal&&!ce&&((n=gt("#"+r+"modal-block",e.getContainerElm()))[0]||(n=gt('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(e.getContainerElm())),y.setTimeout(function(){n.addClass(r+"in"),gt(e.getEl()).addClass(r+"in")}),ce=!0),ye(!0,e)}}),e.on("show",function(){e.parents().each(function(t){if(t.state.get("fixed"))return e.fixed(!0),!1})}),t.popover&&(e._preBodyHtml='<div class="'+e.classPrefix+'arrow"></div>',e.classes.add("popover").add("bottom").add(e.isRtl()?"end":"start")),e.aria("label",t.ariaLabel),e.aria("labelledby",e._id),e.aria("describedby",e.describedBy||e._id+"-none")},fixed:function(t){if(this.state.get("fixed")!==t){if(this.state.get("rendered")){var e=vt.getViewPort();t?this.layoutRect().y-=e.y:this.layoutRect().y+=e.y}this.classes.toggle("fixed",t),this.state.set("fixed",t)}return this},show:function(){var t,e=this._super();for(t=me.length;t--&&me[t]!==this;);return-1===t&&me.push(this),e},hide:function(){return xe(this),ye(!1,this),this._super()},hideAll:function(){we.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),ye(!1,this)),this},remove:function(){xe(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function xe(t){var e;for(e=me.length;e--;)me[e]===t&&me.splice(e,1);for(e=ge.length;e--;)ge[e]===t&&ge.splice(e,1)}we.hideAll=function(){for(var t=me.length;t--;){var e=me[t];e&&e.settings.autohide&&(e.hide(),me.splice(t,1))}};var Ce=function(t,e){return!(!t||e.settings.ui_container)},Re=function(t,e,n){var r,o,s=c.DOM,l=function(t){return t.getParam("fixed_toolbar_container")}(t);l&&(o=s.select(l)[0]);var d=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var e=t.selection.getScrollContainer(),n=t.getBody(),i=0,o=0;if(e){var a=s.getPos(n),u=s.getPos(e);i=Math.max(0,u.x-a.x),o=Math.max(0,u.y-a.y)}r.fixed(!1).moveRel(n,t.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,o)}},h=function(){r&&(r.show(),d(),s.addClass(t.getBody(),"mce-edit-focus"))},m=function(){r&&(r.hide(),we.hideAll(),s.removeClass(t.getBody(),"mce-edit-focus"))},p=function(){r?r.visible()||h():(r=e.panel=f.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:Ce(o,t),fixed:Ce(o,t),border:1,items:[!1===i(t)?null:{type:"menubar",border:"0 0 1 0",items:tt(t)},A(t,a(t))]}),N.setUiContainer(t,r),g(t),o?r.renderTo(o).reflow():r.renderTo().reflow(),v(t,r),h(),I(t),t.on("nodeChange",d),t.on("ResizeWindow",d),t.on("activate",h),t.on("deactivate",m),t.nodeChanged())};return t.settings.content_editable=!0,t.on("focus",function(){!1===u(t)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,p,p):p()}),t.on("blur hide",m),t.on("remove",function(){r&&(r.remove(),r=null)}),!1===u(t)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,ft(t)):ft(t)(),{}};function Se(t,e){var n,r,i=this,o=te.classPrefix;i.show=function(a,s){function u(){n&&(gt(t).append('<div class="'+o+"throbber"+(e?" "+o+"throbber-inline":"")+'"></div>'),s&&s())}return i.hide(),n=!0,a?r=y.setTimeout(u,a):u(),i},i.hide=function(){var e=t.lastChild;return y.clearTimeout(r),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),n=!1,i}}var Te=function(t,e){var n;t.on("ProgressState",function(t){n=n||new Se(e.panel.getEl("body")),t.state?n.show(t.time):n.hide()})},_e=function(t,e,r){var i=function(t){var e=t.settings,r=e.skin,i=e.skin_url;if(!1!==r){var o=r||"lightgray";i=i?t.documentBaseURI.toAbsolute(i):n.baseURL+"/skins/"+o}return i}(t);return i&&(r.skinUiCss=i+"/skin.min.css",t.contentCSS.push(i+"/content"+(t.inline?".inline":"")+".min.css")),Te(t,e),function(t){return t.getParam("inline",!1,"boolean")}(t)?Re(t,e,r):mt(t,e,r)},ke=te.extend({Mixins:[Rt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=131070}}),Ee=te.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.canFocus=!0,t.tooltip&&!1!==Ee.tooltips&&(e.on("mouseenter",function(n){var r=e.tooltip().moveTo(-65535);if(n.control===e){var i=r.text(t.tooltip).show().testMoveRel(e.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===i),r.classes.toggle("tooltip-nw","bc-tl"===i),r.classes.toggle("tooltip-ne","bc-tr"===i),r.moveRel(e.getEl(),i)}else r.hide()}),e.on("mouseleave mousedown click",function(){e.tooltip().remove(),e._tooltip=null})),e.aria("label",t.ariaLabel||t.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new ke({type:"tooltip"}),N.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var t=this.settings;this._super(),this.parent()||!t.width&&!t.height||(this.initLayoutRect(),this.repaint()),t.autofocus&&this.focus()},bindStates:function(){var t=this;function e(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function n(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(t){e(t.value)}),t.state.on("change:active",function(t){n(t.value)}),t.state.get("disabled")&&e(!0),t.state.get("active")&&n(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Ne=Ee.extend({Defaults:{value:0},init:function(t){this._super(t),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),De=function(t,e){t.getEl().lastChild.textContent=e+(t.progressBar?" "+t.progressBar.value()+"%":"")},Oe=te.extend({Mixins:[Rt],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),e.maxWidth=t.maxWidth,t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||t.timeout>0)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new Ne),e.on("click",function(t){-1!==t.target.className.indexOf(e.classPrefix+"close")&&e.close()})},renderHtml:function(){var t,e=this.classPrefix,n="",r="",i="";return this.icon&&(n='<i class="'+e+"ico "+e+"i-"+this.icon+'"></i>'),t=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(r='<button type="button" class="'+e+'close" aria-hidden="true">×</button>'),this.progressBar&&(i=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+t+' role="presentation">'+n+'<div class="'+e+'notification-inner">'+this.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var t=this;return y.setTimeout(function(){t.$el.addClass(t.classPrefix+"in"),De(t,t.state.get("text"))},100),t._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,De(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){De(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=65534}});function Ae(t){var e=function(t){return t.inline?t.getElement():t.getContentAreaContainer()};return{open:function(n,i){var o,a=r.extend(n,{maxWidth:(o=e(t),vt.getSize(o).width)}),s=new Oe(a);return s.args=a,a.timeout>0&&(s.timer=setTimeout(function(){s.close(),i()},a.timeout)),s.on("close",function(){i()}),s.renderTo(),s},close:function(t){t.close()},reposition:function(n){!function(t){V(t,function(t){t.moveTo(0,0)})}(n),function(n){if(n.length>0){var r=n.slice(0,1)[0],i=e(t);r.moveRel(i,"tc-tc"),V(n,function(t,e){e>0&&t.moveRel(n[e-1].getEl(),"bc-tc")})}}(n)},getArgs:function(t){return t.args}}}var Me=[],Pe="";function Be(t){var e,n=gt("meta[name=viewport]")[0];!1!==at.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(e=n.getAttribute("content"))&&void 0!==Pe&&(Pe=e),n.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Pe))}function He(t,e){(function(){for(var t=0;t<Me.length;t++)if(Me[t]._fullscreen)return!0;return!1})()&&!1===e&&gt([document.documentElement,document.body]).removeClass(t+"fullscreen")}var Ie=we.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var e=this;e._super(t),e.isRtl()&&e.classes.add("rtl"),e.classes.add("window"),e.bodyClasses.add("window-body"),e.state.set("fixed",!0),t.buttons&&(e.statusbar=new de({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:e.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),e.statusbar.classes.add("foot"),e.statusbar.parent(e)),e.on("click",function(t){var n=e.classPrefix+"close";(vt.hasClass(t.target,n)||vt.hasClass(t.target.parentNode,n))&&e.close()}),e.on("cancel",function(){e.close()}),e.on("move",function(t){t.control===e&&we.hideAll()}),e.aria("describedby",e.describedBy||e._id+"-none"),e.aria("label",t.title),e._fullscreen=!1},recalc:function(){var t,e,n,r,i=this.statusbar;this._fullscreen&&(this.layoutRect(vt.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),t=this.layoutRect(),this.settings.title&&!this._fullscreen&&(e=t.headerW)>t.w&&(n=t.x-Math.max(0,e/2),this.layoutRect({w:e,x:n}),r=!0),i&&(i.layoutRect({w:this.layoutRect().innerW}).recalc(),(e=i.layoutRect().minW+t.deltaW)>t.w&&(n=t.x-Math.max(0,e-t.w),this.layoutRect({w:e,x:n}),r=!0)),r&&this.recalc()},initLayoutRect:function(){var t,e=this._super(),n=0;if(this.settings.title&&!this._fullscreen){t=this.getEl("head");var r=vt.getSize(t);e.headerW=r.width,e.headerH=r.height,n+=e.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),e.deltaH+=n,e.minH+=n,e.h+=n;var i=vt.getWindowSize();return e.x=this.settings.x||Math.max(0,i.w/2-e.w/2),e.y=this.settings.y||Math.max(0,i.h/2-e.h/2),e},renderHtml:function(){var t=this._layout,e=this._id,n=this.classPrefix,r=this.settings,i="",o="",a=r.html;return this.preRender(),t.preRender(this),r.title&&(i='<div id="'+e+'-head" class="'+n+'window-head"><div id="'+e+'-title" class="'+n+'title">'+this.encode(r.title)+'</div><div id="'+e+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),void 0===a&&(a=t.renderHtml(this)),this.statusbar&&(o=this.statusbar.renderHtml()),'<div id="'+e+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+i+'<div id="'+e+'-body" class="'+this.bodyClasses+'">'+a+"</div>"+o+"</div></div>"},fullscreen:function(t){var e,n,r=this,i=document.documentElement,o=r.classPrefix;if(t!==r._fullscreen)if(gt(window).on("resize",function(){var t;if(r._fullscreen)if(e)r._timer||(r._timer=y.setTimeout(function(){var t=vt.getWindowSize();r.moveTo(0,0).resizeTo(t.w,t.h),r._timer=0},50));else{t=(new Date).getTime();var n=vt.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-t>50&&(e=!0)}}),n=r.layoutRect(),r._fullscreen=t,t){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=_t("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,gt([i,document.body]).addClass(o+"fullscreen"),r.classes.add("fullscreen");var a=vt.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=_t(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,gt([i,document.body]).removeClass(o+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var t,e=this;setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new ae(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),Me.push(e),Be(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),He(this.classPrefix,!1),t=Me.length;t--;)Me[t]===this&&Me.splice(t,1);Be(Me.length>0)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});!function(){if(!at.desktop){var t={w:window.innerWidth,h:window.innerHeight};y.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},gt(window).trigger("resize"))},100)}gt(window).on("resize",function(){var t,e,n=vt.getWindowSize();for(t=0;t<Me.length;t++)e=Me[t].layoutRect(),Me[t].moveTo(Me[t].settings.x||Math.max(0,n.w/2-e.w/2),Me[t].settings.y||Math.max(0,n.h/2-e.h/2))})}();var We=Ie.extend({init:function(t){t={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(t)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var e,n=t.callback||function(){};function r(t,e,r){return{type:"button",text:t,subtype:r?"primary":"",onClick:function(t){t.control.parents()[1].close(),n(e)}}}switch(t.buttons){case We.OK_CANCEL:e=[r("Ok",!0,!0),r("Cancel",!1)];break;case We.YES_NO:case We.YES_NO_CANCEL:e=[r("Yes",1,!0),r("No",0)],t.buttons===We.YES_NO_CANCEL&&e.push(r("Cancel",-1));break;default:e=[r("Ok",!0,!0)]}return new Ie({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:e,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){n(!1)}}).renderTo(document.body).reflow()},alert:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,We.msgBox(t)},confirm:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,t.buttons=We.OK_CANCEL,We.msgBox(t)}}}),Le=function(t){return{renderUI:function(e){return _e(t,this,e)},resizeTo:function(e,n){return it(t,e,n)},resizeBy:function(e,n){return ot(t,e,n)},getNotificationManagerImpl:function(){return Ae(t)},getWindowManagerImpl:function(){return{open:function(t,e,n){var r;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new Ie(t)).on("close",function(){n(r)}),t.data&&r.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),r.features=t||{},r.params=e||{},r=r.renderTo(document.body).reflow()},alert:function(t,e,n){var r;return(r=We.alert(t,function(){e()})).on("close",function(){n(r)}),r},confirm:function(t,e,n){var r;return(r=We.confirm(t,function(t){e(t)})).on("close",function(){n(r)}),r},close:function(t){t.close()},getParams:function(t){return t.params},setParams:function(t,e){t.params=e}}}}},ze=St.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=r.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,r,i,o=this.settings;e=o.firstControlClass,n=o.lastControlClass,t.each(function(t){t.classes.remove(e).remove(n).add(o.controlClass),t.visible()&&(r||(r=t),i=t)}),r&&r.classes.add(e),i&&i.classes.add(n)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each(function(t){e+=t.renderHtml()}),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Fe=ze.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each(function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()})},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}}),Ue=Ee.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",function(t){t.preventDefault()}),n.on("touchstart",function(t){n.fire("click",t),t.preventDefault()}),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t,e=this.getEl().firstChild;e&&((t=e.style).width=t.height="100%"),this._super()},renderHtml:function(){var t,e,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a="",s=this.settings;return(t=s.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",o&&(this.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+this.encode(o)+"</span>"),i=i?r+"ico "+r+"i-"+i:"",e="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+e+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+a+"</button></div>"},bindStates:function(){var t=this,e=t.$,n=t.classPrefix+"txt";function r(r){var i=e("span."+n,t.getEl());r?(i[0]||(e("button:first",t.getEl()).append('<span class="'+n+'"></span>'),i=e("span."+n,t.getEl())),i.html(t.encode(r))):i.remove(),t.classes.toggle("btn-has-text",!!r)}return t.state.on("change:text",function(t){r(t.value)}),t.state.on("change:icon",function(e){var n=e.value,i=t.classPrefix;t.settings.icon=n,n=n?i+"ico "+i+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,a=o.getElementsByTagName("i")[0];n?(a&&a===o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=n):a&&o.removeChild(a),r(t.state.get("text"))}),t._super()}}),qe=Ue.extend({init:function(t){t=r.extend({text:"Browse...",multiple:!1,accept:null},t),this._super(t),this.classes.add("browsebutton"),t.multiple&&this.classes.add("multiple")},postRender:function(){var t=this,e=vt.create("input",{type:"file",id:t._id+"-browse",accept:t.settings.accept});t._super(),gt(e).on("change",function(e){var n=e.target.files;t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},e.preventDefault(),n.length&&t.fire("change",e)}),gt(e).on("click",function(t){t.stopPropagation()}),gt(t.getEl("button")).on("click",function(t){t.stopPropagation(),e.click()}),t.getEl().appendChild(e)},remove:function(){gt(this.getEl("button")).off(),gt(this.getEl("input")).off(),this._super()}}),Ve=ie.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this._layout;return this.classes.add("btn-group"),this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),je=Ee.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",function(t){t.preventDefault()}),e.on("click",function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())}),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+e+"ico "+e+'i-checkbox"></i><span id="'+t+'-al" class="'+e+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];n?(o&&o===i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=n):o&&i.removeChild(o)}),t.state.get("checked")&&e(!0),t._super()}}),Ye=tinymce.util.Tools.resolve("tinymce.util.VK"),$e=Ee.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.classes.add("combobox"),e.subinput=!0,e.ariaTarget="inp",t.menu=t.menu||t.values,t.menu&&(t.icon="caret"),e.on("click",function(n){var r=n.target,i=e.getEl();if(gt.contains(i,r)||r===i)for(;r&&r!==i;)r.id&&-1!==r.id.indexOf("-open")&&(e.fire("action"),t.menu&&(e.showMenu(),n.aria&&e.menu.items()[0].focus())),r=r.parentNode}),e.on("keydown",function(t){var n;13===t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){if("INPUT"===t.target.nodeName){var n=e.state.get("value"),r=t.target.value;r!==n&&(e.state.set("value",r),e.fire("autocomplete",t))}}),e.on("mouseover",function(t){var n=e.tooltip().moveTo(-65535);if(e.statusLevel()&&-1!==t.target.className.indexOf(e.classPrefix+"status")){var r=e.statusMessage()||"Ok",i=n.text(r).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===i),n.classes.toggle("tooltip-nw","bc-tl"===i),n.classes.toggle("tooltip-ne","bc-tr"===i),n.moveRel(t.target,i)}})},statusLevel:function(t){return arguments.length>0&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return arguments.length>0&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var t,e=this,n=e.settings;e.menu||((t=n.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",e.menu=f.create(t).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,e,n=this.getEl(),r=this.getEl("open"),i=this.layoutRect(),o=0,a=n.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(o=parseInt(vt.getRuntimeStyle(a,"padding-right"),10)-parseInt(vt.getRuntimeStyle(a,"padding-left"),10)),t=r?i.w-vt.getSize(r).width-10:i.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(e=this.layoutRect().h-2+"px"),gt(a).css({width:t-o,lineHeight:e}),this._super(),this},postRender:function(){var t=this;return gt(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var t,e,n,r=this._id,i=this.settings,o=this.classPrefix,a=this.state.get("value")||"",s="",u="";return"spellcheck"in i&&(u+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(u+=' maxlength="'+i.maxLength+'"'),i.size&&(u+=' size="'+i.size+'"'),i.subtype&&(u+=' type="'+i.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(u+=' disabled="disabled"'),(t=i.icon)&&"caret"!==t&&(t=o+"ico "+o+"i-"+i.icon),e=this.state.get("text"),(t||e)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==t?'<i class="'+t+'"></i>':'<i class="'+o+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+r+'" class="'+this.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+this.encode(a,!1)+'" hidefocus="1"'+u+' placeholder="'+this.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,e){var n=this;if(0!==t.length){n.menu?n.menu.items().remove():n.menu=f.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),r.each(t,function(t){var r,i;n.menu.add({text:t.title,url:t.previewUrl,match:e,classes:"menu-item-ellipsis",onclick:(r=t.value,i=t.title,function(){n.fire("selectitem",{title:i,value:r})})})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var t=this;t.state.on("change:value",function(e){t.getEl("inp").value!==e.value&&(t.getEl("inp").value=e.value)}),t.state.on("change:disabled",function(e){t.getEl("inp").disabled=e.value}),t.state.on("change:statusLevel",function(e){var n=t.getEl("status"),r=t.classPrefix,i=e.value;vt.css(n,"display","none"===i?"none":""),vt.toggleClass(n,r+"i-checkmark","ok"===i),vt.toggleClass(n,r+"i-warning","warn"===i),vt.toggleClass(n,r+"i-error","error"===i),t.classes.toggle("has-status","none"!==i),t.repaint()}),vt.on(t.getEl("status"),"mouseleave",function(){t.tooltip().hide()}),t.on("cancel",function(e){t.menu&&t.menu.visible()&&(e.stopPropagation(),t.hideMenu())});var e=function(t,e){e&&e.items().length>0&&e.items().eq(t)[0].focus()};return t.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===Ye.DOWN?(n.preventDefault(),t.fire("autocomplete"),e(0,t.menu)):r===Ye.UP&&(n.preventDefault(),e(-1,t.menu)))}),t._super()},remove:function(){gt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Xe=$e.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",function(){e.repaintColor(e.value())})},repaintColor:function(t){var e=this.getEl("open"),n=e?e.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=t}catch(t){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),Ge=Ue.extend({showPanel:function(){var t=this,e=t.settings;if(t.classes.add("opened"),t.panel)t.panel.show();else{var n=e.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,t.panel=new we(n).on("hide",function(){t.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}var r=t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));t.panel.classes.toggle("start","l"===r.substr(-1)),t.panel.classes.toggle("end","r"===r.substr(-1));var i="t"===r.substr(0,1);t.panel.classes.toggle("bottom",!i),t.panel.classes.toggle("top",i),t.panel.moveRel(t.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),Je=c.DOM,Ke=Ge.extend({init:function(t){this._super(t),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this._id,e=this.classPrefix,n=this.state.get("text"),r=this.settings.icon?e+"ico "+e+"i-"+this.settings.icon:"",i=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",o="";return n&&(this.classes.add("btn-has-text"),o='<span class="'+e+'txt">'+this.encode(n)+"</span>"),'<div id="'+t+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+e+'preview"></span>'+o+'</button><button type="button" class="'+e+'open" hidefocus="1" tabindex="-1"> <i class="'+e+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==t||Je.getParent(n.target,"."+t.classPrefix+"open")||(n.stopImmediatePropagation(),e.call(t,n))}),delete t.settings.onclick,t._super()}}),Ze=tinymce.util.Tools.resolve("tinymce.util.Color"),Qe=Ee.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){var t,e,n,r,i,o=this,a=o.color();function s(t,e){var n,r,i=vt.getPos(t);return n=e.pageX-i.x,r=e.pageY-i.y,{x:n=Math.max(0,Math.min(n/t.clientWidth,1)),y:r=Math.max(0,Math.min(r/t.clientHeight,1))}}function u(t,e){var a=(360-t.h)/360;vt.css(n,{top:100*a+"%"}),e||vt.css(i,{left:t.s+"%",top:100-t.v+"%"}),r.style.background=Ze({s:100,v:100,h:t.h}).toHex(),o.color().parse({s:t.s,v:t.v,h:t.h})}function l(e){var n;n=s(r,e),t.s=100*n.x,t.v=100*(1-n.y),u(t),o.fire("change")}function c(n){var r;r=s(e,n),(t=a.toHsv()).h=360*(1-r.y),u(t,!0),o.fire("change")}e=o.getEl("h"),n=o.getEl("hp"),r=o.getEl("sv"),i=o.getEl("svp"),o._repaint=function(){u(t=a.toHsv())},o._super(),o._svdraghelper=new ae(o._id+"-sv",{start:l,drag:l}),o._hdraghelper=new ae(o._id+"-h",{start:c,drag:c}),o._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){if(!arguments.length)return this.color().toHex();this.color().parse(t),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=Ze()),this._color},renderHtml:function(){var t,e=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return t='<div id="'+e+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var t,e,i,o,a="";for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,e=(o=r.split(",")).length-1;t<e;t++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/e+"%;"+i+o[t]+",endColorstr="+o[t+1]+");-ms-"+i+o[t]+",endColorstr="+o[t+1]+')"></div>';return a}()+'<div id="'+e+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),tn=Ee.extend({init:function(t){t=r.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t),this._super(t),this.classes.add("dropzone"),t.multiple&&this.classes.add("multiple")},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},e=vt.create("div",t,"<span>"+this.translate(n.text)+"</span>"),n.height&&vt.css(e,"height",n.height+"px"),n.width&&vt.css(e,"width",n.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var t=this,e=function(e){e.preventDefault(),t.classes.toggle("dragenter"),t.getEl().className=t.classes};t._super(),t.$el.on("dragover",function(t){t.preventDefault()}),t.$el.on("dragenter",e),t.$el.on("dragleave",e),t.$el.on("drop",function(e){if(e.preventDefault(),!t.state.get("disabled")){var n=function(e){var n=t.settings.accept;if("string"!=typeof n)return e;var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return r.grep(e,function(t){return i.test(t.name)})}(e.dataTransfer.files);t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},n.length&&t.fire("change",e)}})},remove:function(){this.$el.off(),this._super()}}),en=Ee.extend({init:function(t){var e=this;t.delimiter||(t.delimiter="»"),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",function(t){var n;(n=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[n],index:n})}),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(t){var e,n,r=t||[],i="",o=this.classPrefix;for(e=0,n=r.length;e<n;e++)i+=(e>0?'<div class="'+o+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(e===n-1?" "+o+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+this._id+"-"+e+'" aria-level="'+(e+1)+'">'+r[e].name+"</div>";return i||(i='<div class="'+o+'path-item"> </div>'),i}}),nn=en.extend({postRender:function(){var t=this,e=t.settings.editor;function n(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}return!1!==e.settings.elementpath&&(t.on("select",function(t){e.focus(),e.selection.select(this.row()[t.index].element),e.nodeChanged()}),e.on("nodeChange",function(r){for(var i=[],o=r.parents,a=o.length;a--;)if(1===o[a].nodeType&&!n(o[a])){var s=e.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}t.row(i)})),t._super()}}),rn=ie.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.classes.add("formitem"),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+e+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),on=ie.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,e=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var n,i=e.settings.label;i&&((n=new rn(r.extend({items:{type:"label",id:e._id+"-l",text:i,flex:0,forId:e._id,disabled:e.disabled()}},t.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),t.replace(e,n),n.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var t=this;function e(){var e,n,r=0,i=[];if(!1!==t.settings.labelGapCalc)for(("children"===t.settings.labelGapCalc?t.find("formitem"):t.items()).filter("formitem").each(function(t){var e=t.items()[0],n=e.getEl().clientWidth;r=n>r?n:r,i.push(e)}),n=t.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=r+n}t._super(),t.on("show",e),e()}}),an=on.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.preRender(),t.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+e+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></fieldset>"}}),sn=0,un=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:x(t)}},ln={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return un(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return un(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return un(n)},fromDom:un,fromPoint:function(t,e,n){var r=t.dom();return k.from(r.elementFromPoint(e,n)).map(un)}},cn=function(t){var e,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,e=t.apply(null,r)),e}},fn={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},dn=function(t){return t.dom().nodeType},hn=function(t){return function(e){return dn(e)===t}},mn=(hn(fn.ELEMENT),hn(fn.TEXT),hn(fn.DOCUMENT),cn(function(){return mn(ln.fromDom(document))}),function(t){var e=t.dom().body;if(null===e||void 0===e)throw"Body is not available yet";return ln.fromDom(e)}),gn=("undefined"!=typeof window?window:Function("return this;")(),function(){return pn(0,0)}),pn=function(t,e){return{major:t,minor:e}},vn={nu:pn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?gn():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return pn(r(1),r(2))}(t,n)},unknown:gn},bn=function(t,e){return function(){return e===t}},yn=function(t){var e=t.current;return{current:e,version:t.version,isEdge:bn("Edge",e),isChrome:bn("Chrome",e),isIE:bn("IE",e),isOpera:bn("Opera",e),isFirefox:bn("Firefox",e),isSafari:bn("Safari",e)}},wn={unknown:function(){return yn({current:void 0,version:vn.unknown()})},nu:yn,edge:x("Edge"),chrome:x("Chrome"),ie:x("IE"),opera:x("Opera"),firefox:x("Firefox"),safari:x("Safari")},xn=function(t,e){return function(){return e===t}},Cn=function(t){var e=t.current;return{current:e,version:t.version,isWindows:xn("Windows",e),isiOS:xn("iOS",e),isAndroid:xn("Android",e),isOSX:xn("OSX",e),isLinux:xn("Linux",e),isSolaris:xn("Solaris",e),isFreeBSD:xn("FreeBSD",e)}},Rn={unknown:function(){return Cn({current:void 0,version:vn.unknown()})},nu:Cn,windows:x("Windows"),ios:x("iOS"),android:x("Android"),linux:x("Linux"),osx:x("OSX"),solaris:x("Solaris"),freebsd:x("FreeBSD")},Sn=function(t,e){var n=String(e).toLowerCase();return Y(t,function(t){return t.search(n)})},Tn=function(t,e){return Sn(t,e).map(function(t){var n=vn.detect(t.versionRegexes,e);return{current:t.name,version:n}})},_n=function(t,e){return Sn(t,e).map(function(t){var n=vn.detect(t.versionRegexes,e);return{current:t.name,version:n}})},kn=function(t,e){return-1!==t.indexOf(e)},En=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Nn=function(t){return function(e){return kn(e,t)}},Dn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return kn(t,"edge/")&&kn(t,"chrome")&&kn(t,"safari")&&kn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,En],search:function(t){return kn(t,"chrome")&&!kn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return kn(t,"msie")||kn(t,"trident")}},{name:"Opera",versionRegexes:[En,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Nn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Nn("firefox")},{name:"Safari",versionRegexes:[En,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(kn(t,"safari")||kn(t,"mobile/"))&&kn(t,"applewebkit")}}],On=[{name:"Windows",search:Nn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return kn(t,"iphone")||kn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Nn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Nn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Nn("linux"),versionRegexes:[]},{name:"Solaris",search:Nn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Nn("freebsd"),versionRegexes:[]}],An={browsers:x(Dn),oses:x(On)},Mn=function(t){var e=An.browsers(),n=An.oses(),r=Tn(e,t).fold(wn.unknown,wn.nu),i=_n(n,t).fold(Rn.unknown,Rn.nu);return{browser:r,os:i,deviceType:function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,o=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=t.isiOS()||t.isAndroid(),l=u&&!s,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:x(r),isiPhone:x(i),isTablet:x(s),isPhone:x(l),isTouch:x(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:x(c)}}(i,r,t)}},Pn=cn(function(){var t=navigator.userAgent;return Mn(t)}),Bn=fn.ELEMENT,Hn=fn.DOCUMENT,In=function(t){return t.nodeType!==Bn&&t.nodeType!==Hn||0===t.childElementCount},Wn={all:function(t,e){var n=void 0===e?document:e.dom();return In(n)?[]:q(n.querySelectorAll(t),ln.fromDom)},is:function(t,e){var n=t.dom();if(n.nodeType!==Bn)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},one:function(t,e){var n=void 0===e?document:e.dom();return In(n)?k.none():k.from(n.querySelector(t)).map(ln.fromDom)}},Ln=(Pn().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),function(t,e){return Wn.all(e,t)}),zn=r.trim,Fn=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Un=Fn("true"),qn=Fn("false"),Vn=function(t,e,n,r,i){return{type:t,title:e,url:n,level:r,attach:i}},jn=function(t){return t.innerText||t.textContent},Yn=function(t){return t.id?t.id:(e="h",n=(new Date).getTime(),e+"_"+Math.floor(1e9*Math.random())+ ++sn+String(n));var e,n},$n=function(t){return function(t){return t&&"A"===t.nodeName&&(t.id||t.name)}(t)&&Gn(t)},Xn=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},Gn=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return Un(t)}return!1}(t)&&!qn(t)},Jn=function(t){return Xn(t)&&Gn(t)},Kn=function(t){var e=Yn(t);return Vn("header",jn(t),"#"+e,function(t){return Xn(t)?parseInt(t.nodeName.substr(1),10):0}(t),function(){t.id=e})},Zn=function(t){var e=t.id||t.name,n=jn(t);return Vn("anchor",n||"#"+e,"#"+e,0,w)},Qn=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,q(Ln(ln.fromDom(n),e),function(t){return t.dom()})},tr=function(t){return zn(t.title).length>0},er=function(t){var e=Qn(t);return j(function(t){return q(j(t,Jn),Kn)}(e).concat(function(t){return q(j(t,$n),Zn)}(e)),tr)},nr={},rr=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}},ir=function(t,e){return{title:t,value:{title:t,url:e,attach:w}}},or=function(t,e,n){var r=e in t?t[e]:n;return!1===r?null:r},ar=function(t,e,n,i){var o,a,s,u={title:"-"},l=function(t){var i=t.hasOwnProperty(n)?t[n]:[],o=j(i,function(t){return function(t,e){return!U(e,function(e){return e.url===t})}(t,e)});return r.map(o,function(t){return{title:t,value:{title:t,url:t,attach:w}}})},c=function(t){return function(t){return r.map(t,rr)}(j(e,function(e){return e.type===t}))};return!1===i.typeahead_urls?[]:"file"===n?(o=[ur(t,l(nr)),ur(t,c("header")),ur(t,function(){var t=c("anchor"),e=or(i,"anchor_top","#top"),n=or(i,"anchor_bottom","#bottom");return null!==e&&t.unshift(ir("<top>",e)),null!==n&&t.push(ir("<bottom>",n)),t}())],a=function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(u,e)},s=[],V(o,function(t){s=a(s,t)}),s):ur(t,l(nr))},sr=function(t,e){var n,r,i,o=nr[e];/^https?/.test(t)&&(o?(n=o,r=t,i=F(n,r),-1===i?k.none():k.some(i)).isNone()&&(nr[e]=o.slice(0,5).concat(t)):nr[e]=[t])},ur=function(t,e){var n=t.toLowerCase(),i=r.grep(e,function(t){return-1!==t.title.toLowerCase().indexOf(n)});return 1===i.length&&i[0].title===t?[]:i},lr=function(t,e,n){var r=e.filepicker_validator_handler;r&&t.state.on("change:value",function(e){var i;0!==(i=e.value).length?r({url:i,type:n},function(e){var n=function(t){var e=t.status,n=t.message;return"valid"===e?{status:"ok",message:n}:"unknown"===e?{status:"warn",message:n}:"invalid"===e?{status:"warn",message:n}:{status:"none",message:""}}(e);t.statusMessage(n.message),t.statusLevel(n.status)}):t.statusLevel("none")})},cr=$e.extend({Statics:{clearHistory:function(){nr={}}},init:function(t){var e,i,o,a=this,s=window.tinymce?window.tinymce.activeEditor:n.activeEditor,u=s.settings,l=t.filetype;t.spellcheck=!1,(o=u.file_picker_types||u.file_browser_callback_types)&&(o=r.makeMap(o,/[, ]/)),o&&!o[l]||(!(i=u.file_picker_callback)||o&&!o[l]?!(i=u.file_browser_callback)||o&&!o[l]||(e=function(){i(a.getEl("inp").id,a.value(),l,window)}):e=function(){var t=a.fire("beforecall").meta;t=r.extend({filetype:l},t),i.call(s,function(t,e){a.value(t).fire("change",{meta:e})},a.value(),t)}),e&&(t.icon="browse",t.onaction=e),a._super(t),a.classes.add("filepicker"),function(t,e,n,r){var i=function(i){var o=er(n),a=ar(i,o,r,e);t.showAutoComplete(a,i)};t.on("autocomplete",function(){i(t.value())}),t.on("selectitem",function(e){var n=e.value;t.value(n.url);var i=function(t){var e=t.title;return e.raw?e.raw:e}(n);"image"===r?t.fire("change",{meta:{alt:i,attach:n.attach}}):t.fire("change",{meta:{text:i,attach:n.attach}}),t.focus()}),t.on("click",function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&i("")}),t.on("PostRender",function(){t.getRoot().on("submit",function(e){e.isDefaultPrevented()||sr(t.value(),r)})})}(a,u,s.getBody(),l),lr(a,u,l)}}),fr=Fe.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each(function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()})}}),dr=Fe.extend({recalc:function(t){var e,n,r,i,o,a,s,u,l,c,f,d,h,m,g,p,v,b,y,w,x,C,R,S,T,_,k,E,N,D,O,A,M,P,B,H,I,W=[],L=Math.max,z=Math.min;for(r=t.items().filter(":visible"),i=t.layoutRect(),o=t.paddingBox,a=t.settings,d=t.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,u=t.isRtl()?a.pack||"end":a.pack,l=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(S="y",C="h",R="minH",T="maxH",k="innerH",_="top",E="deltaH",N="contentH",P="left",A="w",D="x",O="innerW",M="minW",B="right",H="deltaW",I="contentW"):(S="x",C="w",R="minW",T="maxW",k="innerW",_="left",E="deltaW",N="contentW",P="top",A="h",D="y",O="innerH",M="minH",B="bottom",H="deltaH",I="contentH"),f=i[k]-o[_]-o[_],x=c=0,e=0,n=r.length;e<n;e++)m=(h=r[e]).layoutRect(),g=h.settings.flex,f-=e<n-1?l:0,g>0&&(c+=g,m[T]&&W.push(h),m.flex=g),f-=m[R],(p=o[P]+m[M]+o[B])>x&&(x=p);if((y={})[R]=f<0?i[R]-f+i[E]:i[k]-f+i[E],y[M]=x+i[H],y[N]=i[k]-f,y[I]=x,y.minW=z(y.minW,i.maxW),y.minH=z(y.minH,i.maxH),y.minW=L(y.minW,i.startMinWidth),y.minH=L(y.minH,i.startMinHeight),!i.autoResize||y.minW===i.minW&&y.minH===i.minH){for(b=f/c,e=0,n=W.length;e<n;e++)v=(m=(h=W[e]).layoutRect())[T],(p=m[R]+m.flex*b)>v?(f-=m[T]-m[R],c-=m.flex,m.flex=0,m.maxFlexSize=v):m.maxFlexSize=0;for(b=f/c,w=o[_],y={},0===c&&("end"===u?w=f+o[_]:"center"===u?(w=Math.round(i[k]/2-(i[k]-f)/2)+o[_])<0&&(w=o[_]):"justify"===u&&(w=o[_],l=Math.floor(f/(r.length-1)))),y[D]=o[P],e=0,n=r.length;e<n;e++)p=(m=(h=r[e]).layoutRect()).maxFlexSize||m[R],"center"===s?y[D]=Math.round(i[O]/2-m[A]/2):"stretch"===s?(y[A]=L(m[M]||0,i[O]-o[P]-o[B]),y[D]=o[P]):"end"===s&&(y[D]=i[O]-m[A]-o.top),m.flex>0&&(p+=m.flex*b),y[C]=p,y[S]=w,h.layoutRect(y),h.recalc&&h.recalc(),w+=p+l}else if(y.w=y.minW,y.h=y.minH,t.layoutRect(y),this.recalc(t),null===t._lastRect){var F=t.parent();F&&(F._lastRect=null,F.recalc())}}}),hr=ze.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each(function(t){t.recalc&&t.recalc()})},isNative:function(){return!0}}),mr=function(t,e){return Wn.one(e,t)},gr=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},pr=function(t,e,n){var r=function(t){n(t,e)};t.formatter?t.formatter.formatChanged(e,r):t.on("init",function(){t.formatter.formatChanged(e,r)})},vr=function(t,e){return function(n){pr(t,e,function(t){n.control.active(t)})}},br=function(t){var e=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:gr(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:gr(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:gr(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:gr(t,"alignjustify")}];t.addMenuItem("align",{text:"Align",menu:n}),t.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var i=n.control.menu;r.each(e,function(e,n){i.items().eq(n).each(function(n){return n.active(t.formatter.match(e))})})},onPostRender:function(n){var i=n.control;r.each(e,function(e,n){pr(t,e,function(t){i.icon("alignleft"),t&&i.icon(e)})})}}),r.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:vr(t,n)})})},yr=function(t){return t?t.split(",")[0]:""},wr=function(t,e){return function(){var n=this;n.state.set("value",null),t.on("init nodeChange",function(i){var o=t.queryCommandValue("FontName"),a=function(t,e){var n,i=e?e.toLowerCase():"";return r.each(t,function(t){t.value.toLowerCase()===i&&(n=t.value)}),r.each(t,function(t){n||yr(t.value).toLowerCase()!==yr(i).toLowerCase()||(n=t.value)}),n}(e,o);n.value(a||null),!a&&o&&n.text(yr(o))})}},xr=function(t){t.addButton("fontselect",function(){var e=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return r.map(e,function(t){return{text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""}})}(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:wr(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})},Cr=function(t){xr(t)},Rr=function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":t},Sr=function(t,e,n){var i;return r.each(t,function(t){t.value===n?i=n:t.value===e&&(i=e)}),i},Tr=function(t){t.addButton("fontsizeselect",function(){var e=function(t){var e=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return r.map(e.split(" "),function(t){var e=t,n=t,r=t.split("=");return r.length>1&&(e=r[0],n=r[1]),{text:e,value:n}})}(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(t,e){return function(){var n=this;t.on("init nodeChange",function(r){var i,o,a,s;if(i=t.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)o=Rr(i,a),s=Sr(e,o,i);n.value(s||null),s||n.text(o)})}}(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})},_r=function(t){Tr(t)},kr=function(t,e){var n=e.length;return r.each(e,function(e){e.menu&&(e.hidden=0===kr(t,e.menu));var r=e.format;r&&(e.hidden=!t.formatter.canApply(r)),e.hidden&&n--}),n},Er=function(t,e){var n=e.items().length;return e.items().each(function(e){e.menu&&e.visible(Er(t,e.menu)>0),!e.menu&&e.settings.menu&&e.visible(kr(t,e.settings.menu)>0);var r=e.settings.format;r&&e.visible(t.formatter.canApply(r)),e.visible()||n--}),n},Nr=function(t){var e=function(t){var e=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],o=function(t){var i=[];if(t)return r.each(t,function(t){var r={text:t.title,icon:t.icon};if(t.items)r.menu=o(t.items);else{var a=t.format||"custom"+e++;t.format||(t.name=a,n.push(t)),r.format=a,r.cmd=t.cmd}i.push(r)}),i};return t.on("init",function(){r.each(n,function(e){t.formatter.register(e.name,e)})}),{type:"menu",items:t.settings.style_formats_merge?t.settings.style_formats?o(i.concat(t.settings.style_formats)):o(i):o(t.settings.style_formats||i),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",function(){var n,r;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(r=e.settings.cmd)&&e.active(t.queryCommandState(r))})},onclick:function(){this.settings.format&&gr(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}}}(t);!function(t,e){t.addMenuItem("formats",{text:"Formats",menu:e})}(t,e),function(t,e){t.addButton("styleselect",{type:"menubutton",text:"Formats",menu:e,onShowMenu:function(){t.settings.style_formats_autohide&&Er(t,this.menu)}})}(t,e)},Dr=function(t,e){return function(){var n=[];return r.each(e,function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:n,fixedWidth:!0,onselect:function(e){if(e.control){var n=e.control.value();gr(t,n)()}},onPostRender:function(t,e,n){return function(){var i=this;t.on("nodeChange",function(o){var a=t.formatter,s=null;r.each(o.parents,function(t){if(r.each(e,function(e){if(n?a.matchNode(t,n,{value:e.value})&&(s=e.value):a.matchNode(t,e.value)&&(s=e.value),s)return!1}),s)return!1}),i.value(s)})}}(t,n)}}},Or=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:function(t,e){return r.map(e,function(e){return{text:e[0],onclick:gr(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})}(t,e)}),t.addButton("formatselect",Dr(t,e))},Ar=function(t,e){var n,i;if("string"==typeof e)i=e.split(" ");else if(r.isArray(e))return function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);G.apply(e,t[n])}return e}(r.map(e,function(e){return Ar(t,e)}));return n=r.grep(i,function(e){return"|"===e||e in t.menuItems}),r.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Mr=function(t){return t&&"-"===t.text},Pr=function(t){var e=j(t,function(t,e,n){return!Mr(t)||!Mr(n[e-1])});return j(e,function(t,e,n){return!Mr(t)||e>0&&e<n.length-1})},Br=function(t){var e=t.settings.insert_button_items;return Pr(e?Ar(t,e):function(t,e){var n=[{text:"-"}],i=r.grep(t.menuItems,function(t){return t.context===e});return r.each(i,function(t){"before"===t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"===t.separator&&n.push({text:"|"})}),n}(t,"insert"))},Hr=function(t){!function(t){t.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Br(t)),this.menu.renderNew()}})}(t)},Ir=function(t){!function(t){r.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:vr(t,n),onclick:gr(t,n)})})}(t),function(t){r.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1]})})}(t),function(t){r.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:vr(t,n)})})}(t)},Wr=function(t){Ir(t),function(t){r.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})}),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:gr(t,"code")})}(t)},Lr=function(t,e){return function(){var n=this,r=function(){var n="redo"===e?"hasRedo":"hasUndo";return!!t.undoManager&&t.undoManager[n]()};n.disabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(t.readonly||!r())})}},zr=function(t){!function(t){t.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Lr(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Lr(t,"redo"),cmd:"redo"})}(t),function(t){t.addButton("undo",{tooltip:"Undo",onPostRender:Lr(t,"undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:Lr(t,"redo"),cmd:"redo"})}(t)},Fr=function(t){!function(t){t.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(t){return function(){var e=this;t.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(t.hasVisual)}}(t),cmd:"mceToggleVisualAid"})}(t)},Ur={setup:function(t){!function(t){t.rtl&&(te.rtl=!0)}(t),function(t){t.on("mousedown",function(){we.hideAll()})}(t),function(t){t.settings.ui_container&&(at.container=mr(ln.fromDom(document.body),t.settings.ui_container).fold(x(null),function(t){return t.dom()}))}(t),Ee.tooltips=!at.iOS,te.translate=function(t){return n.translate(t)},Or(t),br(t),Wr(t),zr(t),_r(t),Cr(t),Nr(t),Fr(t),Hr(t)}},qr=Fe.extend({recalc:function(t){var e,n,r,i,o,a,s,u,l,c,f,d,h,m,g,p,v,b,y,w,x,C,R,S,T,_,k,E,N=[],D=[];e=t.settings,i=t.items().filter(":visible"),o=t.layoutRect(),r=e.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),b=e.spacingH||e.spacing||0,y=e.spacingV||e.spacing||0,w=e.alignH||e.align,x=e.alignV||e.align,p=t.paddingBox,E="reverseRows"in e?e.reverseRows:t.isRtl(),w&&"string"==typeof w&&(w=[w]),x&&"string"==typeof x&&(x=[x]);for(f=0;f<r;f++)N.push(0);for(d=0;d<n;d++)D.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(c=i[d*r+f]);f++)S=(l=c.layoutRect()).minW,T=l.minH,N[f]=S>N[f]?S:N[f],D[d]=T>D[d]?T:D[d];for(_=o.innerW-p.left-p.right,C=0,f=0;f<r;f++)C+=N[f]+(f>0?b:0),_-=(f>0?b:0)+N[f];for(k=o.innerH-p.top-p.bottom,R=0,d=0;d<n;d++)R+=D[d]+(d>0?y:0),k-=(d>0?y:0)+D[d];if(C+=p.left+p.right,R+=p.top+p.bottom,(u={}).minW=C+(o.w-o.innerW),u.minH=R+(o.h-o.innerH),u.contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH,u.minW=Math.min(u.minW,o.maxW),u.minH=Math.min(u.minH,o.maxH),u.minW=Math.max(u.minW,o.startMinWidth),u.minH=Math.max(u.minH,o.startMinHeight),!o.autoResize||u.minW===o.minW&&u.minH===o.minH){var O;o.autoResize&&((u=t.layoutRect(u)).contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH),O="start"===e.packV?0:k>0?Math.floor(k/n):0;var A=0,M=e.flexWidths;if(M)for(f=0;f<M.length;f++)A+=M[f];else A=r;var P=_/A;for(f=0;f<r;f++)N[f]+=M?M[f]*P:P;for(m=p.top,d=0;d<n;d++){for(h=p.left,s=D[d]+O,f=0;f<r&&(c=i[E?d*r+r-1-f:d*r+f]);f++)g=c.settings,l=c.layoutRect(),a=Math.max(N[f],l.startMinWidth),l.x=h,l.y=m,"center"===(v=g.alignH||(w?w[f]||w[0]:null))?l.x=h+a/2-l.w/2:"right"===v?l.x=h+a-l.w:"stretch"===v&&(l.w=a),"center"===(v=g.alignV||(x?x[f]||x[0]:null))?l.y=m+s/2-l.h/2:"bottom"===v?l.y=m+s-l.h:"stretch"===v&&(l.h=s),c.layoutRect(l),h+=a+b,c.recalc&&c.recalc();m+=s+y}}else if(u.w=u.minW,u.h=u.minH,t.layoutRect(u),this.recalc(t),null===t._lastRect){var B=t.parent();B&&(B._lastRect=null,B.recalc())}}}),Vr=Ee.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,e){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=t,e&&e()):y.setTimeout(function(){n.html(t)}),this}}),jr=Ee.extend({init:function(t){this._super(t),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Yr=Ee.extend({init:function(t){this._super(t),this.classes.add("widget").add("label"),this.canFocus=!1,t.multiline&&this.classes.add("autoscroll"),t.strong&&this.classes.add("strong")},initLayoutRect:function(){var t=this._super();return this.settings.multiline&&(vt.getSize(this.getEl()).width>t.maxW&&(t.minW=t.maxW,this.classes.add("multiline")),this.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,vt.getSize(this.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this.settings.forId,r=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(e=this.settings.forName)&&(t=this.getRoot().find("#"+e)[0])&&(n=t._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+r+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),$r=ie.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(t){t.classes.add("toolbar-item")}),this._super()}}),Xr=$r.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Gr=Ue.extend({init:function(t){this._renderOpen=!0,this._super(t),t=this.settings,this.classes.add("menubtn"),t.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",t.menu||this.render())},showMenu:function(t){var e,n=this;if(n.menu&&n.menu.visible()&&!1!==t)return n.hideMenu();n.menu||(e=n.state.get("menu")||[],n.classes.add("opened"),e.length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),e.renderTo?n.menu=e.parent(n).show().renderTo():n.menu=f.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(t){t.control===n.menu&&(n.activeMenu("show"===t.type),n.classes.toggle("opened","show"===t.type)),n.aria("expanded","show"===t.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var t,e=this._id,n=this.classPrefix,r=this.settings.icon,i=this.state.get("text"),o="";return(t=this.settings.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i&&(this.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+this.encode(i)+"</span>"),r=this.settings.icon?n+"ico "+n+"i-"+r:"",this.aria("role",this.parent()instanceof Xr?"menuitem":"button"),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+e+'"><button id="'+e+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+o+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this;return t.on("click",function(e){e.control===t&&function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}(e.target,t.getEl())&&(t.focus(),t.showMenu(!e.aria),e.aria&&t.menu.items().filter(":visible")[0].focus())}),t.on("mouseenter",function(e){var n,r=e.control,i=t.parent();r&&i&&r instanceof Gr&&r.parent()===i&&(i.items().filter("MenuButton").each(function(t){t.hideMenu&&t!==r&&(t.menu&&t.menu.visible()&&(n=!0),t.hideMenu())}),n&&(r.focus(),r.showMenu()))}),t._super()},bindStates:function(){var t=this;return t.state.on("change:menu",function(){t.menu&&t.menu.remove(),t.menu=null}),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Jr=we.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=r.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu"),t.animate&&11!==at.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,e=this;function n(){e.throbber&&(e.throbber.hide(),e.throbber=null)}e.settings.itemsFactory&&(e.throbber||(e.throbber=new Se(e.getEl("body"),!0),0===e.items().length?(e.throbber.show(),e.fire("loading")):e.throbber.show(100,function(){e.items().remove(),e.fire("loading")}),e.on("hide close",n)),e.requestTime=t=(new Date).getTime(),e.settings.itemsFactory(function(r){0!==r.length?e.requestTime===t&&(e.getEl().style.width="",e.getEl("body").style.width="",n(),e.items().remove(),e.getEl("body").innerHTML="",e.add(r),e.renderNew(),e.fire("loaded")):e.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){var n=e.settings;if(n.icon||n.image||n.selectable)return t._hasIcons=!0,!1}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t.on("show hide",function(e){e.control===t&&("show"===e.type?y.setTimeout(function(){t.classes.add("in")},0):t.classes.remove("in"))}),t._super()}}),Kr=Gr.extend({init:function(t){var e,n,r,i,o=this;o._super(t),t=o.settings,o._values=e=t.values,e&&(void 0!==t.value&&function e(i){for(var a=0;a<i.length;a++){if(n=i[a].selected||t.value===i[a].value)return r=r||i[a].text,o.state.set("value",i[a].value),!0;if(i[a].menu&&e(i[a].menu))return!0}}(e),!n&&e.length>0&&(r=e[0].text,o.state.set("value",e[0].value)),o.state.set("menu",e)),o.state.set("text",t.text||r),o.classes.add("listbox"),o.on("select",function(e){var n=e.control;i&&(e.lastControl=i),t.multiple?n.active(!n.active()):o.value(e.control.value()),i=n})},value:function(t){return 0===arguments.length?this.state.get("value"):void 0===t?this:(this.settings.values?r.grep(this.settings.values,function(e){return e.value===t}).length>0?this.state.set("value",t):null===t&&this.state.set("value",null):this.state.set("value",t),this)},bindStates:function(){var t=this;return t.on("show",function(e){var n,r;n=e.control,r=t.value(),n instanceof Jr&&n.items().each(function(t){t.hasMenus()||t.active(t.value()===r)})}),t.state.on("change:value",function(e){var n=function t(e,n){var r;if(e)for(var i=0;i<e.length;i++){if(e[i].value===n)return e[i];if(e[i].menu&&(r=t(e[i].menu,n)))return r}}(t.state.get("menu"),e.value);n?t.text(n.text):t.text(t.settings.text)}),t._super()}}),Zr=Ee.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e;this._super(t),t=this.settings,this.classes.add("menu-item"),t.menu&&this.classes.add("menu-item-expand"),t.preview&&this.classes.add("menu-item-preview"),"-"!==(e=this.state.get("text"))&&"|"!==e||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),t.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(t){t.preventDefault()}),t.menu&&!t.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,e=this,n=e.settings,r=e.parent();if(r.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){(t=e.menu)?t.show():((t=n.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=e.menu=f.create(t).parent(e).renderTo()).reflow(),t.on("cancel",function(n){n.stopPropagation(),e.focus(),t.hide()}),t.on("show hide",function(t){t.control.items&&t.control.items().each(function(t){t.active(t.settings.selected)})}).fire("show"),t.on("hide",function(n){n.control===t&&e.classes.remove("selected")}),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub");var i=t.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);t.moveRel(e.getEl(),i),t.rel=i,i="menu-sub-"+i,t.classes.remove(t._lastRel).add(i),t._lastRel=i,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var t,e=this._id,n=this.settings,r=this.classPrefix,i=this.state.get("text"),o=this.settings.icon,a="",s=n.shortcut,u=this.encode(n.url);function l(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(t){var e=n.match||"";return e?t.replace(new RegExp(l(e),"gi"),function(t){return"!mce~match["+t+"]mce~match!"}):t}function f(t){return t.replace(new RegExp(l("!mce~match["),"g"),"<b>").replace(new RegExp(l("]mce~match!"),"g"),"</b>")}return o&&this.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s&&(s=function(t){var e,n,r={};for(r=at.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=t.split("+"),e=0;e<t.length;e++)(n=r[t[e].toLowerCase()])&&(t[e]=n);return t.join("+")}(s)),o=r+"ico "+r+"i-"+(this.settings.icon||"none"),t="-"!==i?'<i class="'+o+'"'+a+"></i> ":"",i=f(this.encode(c(i))),u=f(this.encode(c(u))),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1">'+t+("-"!==i?'<span id="'+e+'-text" class="'+r+'text">'+i+"</span>":"")+(s?'<div id="'+e+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var t=this,e=t.settings,n=e.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=t.getEl("text");r&&(r.setAttribute("style",n),t._textStyle=n)}return t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.aria&&t.menu.focus(!0)):(t.fire("select"),y.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(t){t.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(t){return function(t,e){var n=t._textStyle;if(n){var r=t.getEl("text");r.setAttribute("style",n),e&&(r.style.color="",r.style.backgroundColor="")}}(this,t),void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Qr=je.extend({Defaults:{classes:"radio",role:"radio"}}),ti=Ee.extend({renderHtml:function(){var t=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new ae(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function ei(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}var ni=Ee.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var e=this;e._super(t),e.settings.size&&(e.size=e.settings.size),e.settings.options&&(e._options=e.settings.options),e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))})},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t,e="";return t=ei(this._options),this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=ei(e.value)}),t._super()}});function ri(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function ii(t,e,n){t.setAttribute("aria-"+e,n)}function oi(t,e){var n,r,i,o,a;"v"===t.settings.orientation?(i="top",r="height",n="h"):(i="left",r="width",n="w"),a=t.getEl("handle"),o=((t.layoutRect()[n]||100)-vt.getSize(a)[r])*((e-t._minValue)/(t._maxValue-t._minValue))+"px",a.style[i]=o,a.style.height=t.layoutRect().h+"px",ii(a,"valuenow",e),ii(a,"valuetext",""+t.settings.previewFilter(e)),ii(a,"valuemin",t._minValue),ii(a,"valuemax",t._maxValue)}var ai=Ee.extend({init:function(t){t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),this._super(t),this.classes.add("slider"),"v"===t.orientation&&this.classes.add("vertical"),this._minValue=z(t.minValue)?t.minValue:0,this._maxValue=z(t.maxValue)?t.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-handle" class="'+e+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,e,n,r,i,o,a=this;t=a._minValue,e=a._maxValue,"v"===a.settings.orientation?(n="screenY",r="top",i="height",o="h"):(n="screenX",r="left",i="width",o="w"),a._super(),function(t,e){function n(n){var r,i;r=a.value(),r=ri(r=function(t,e,n){return n*(e-t)-t}(t,e,(r+(i=t))/(e-i)+.05*n),t,e),a.value(r),a.fire("dragstart",{value:r}),a.fire("drag",{value:r}),a.fire("dragend",{value:r})}a.on("keydown",function(t){switch(t.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(t,e),function(t,e,s){var u,l,c,f,d;a._dragHelper=new ae(a._id,{handle:a._id+"-handle",start:function(t){u=t[n],l=parseInt(a.getEl("handle").style[r],10),c=(a.layoutRect()[o]||100)-vt.getSize(s)[i],a.fire("dragstart",{value:d})},drag:function(i){var o=i[n]-u;f=ri(l+o,0,c),s.style[r]=f+"px",d=t+f/c*(e-t),a.value(d),a.tooltip().text(""+a.settings.previewFilter(d)).show().moveRel(s,"bc tc"),a.fire("drag",{value:d})},stop:function(){a.tooltip().hide(),a.fire("dragend",{value:d})}})}(t,e,a.getEl("handle"))},repaint:function(){this._super(),oi(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){oi(t,e.value)}),t._super()}}),si=Ee.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),ui=Gr.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,e,n=this.getEl(),r=this.layoutRect();return this._super(),t=n.firstChild,e=n.lastChild,gt(t).css({width:r.w-vt.getSize(e).width,height:r.h-2}),gt(e).css({height:r.h-2}),this},activeMenu:function(t){gt(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var t,e,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a=this.settings,s="";return(t=a.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i=a.icon?r+"ico "+r+"i-"+i:"",o&&(this.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+this.encode(o)+"</span>"),e="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" role="button"'+e+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+s+'</button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(i?" ":"")+this._menuBtnText:"")+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var t=this.settings.onclick;return this.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete this.settings.onclick,this._super()}}),li=hr.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),ci=de.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(t){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),gt(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+t,(e=this.getEl("t"+t)).setAttribute("aria-selected","true"),gt(e).addClass(this.classPrefix+"active"),this.items()[t].show().fire("showtab"),this.reflow(),this.items().each(function(e,n){t!==n&&e.hide()})},renderHtml:function(){var t=this,e=t._layout,n="",r=t.classPrefix;return t.preRender(),e.preRender(t),t.items().each(function(e,i){var o=t._id+"-t"+i;e.aria("role","tabpanel"),e.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+t.encode(e.settings.title)+"</div>"}),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1"><div id="'+t._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div></div>"},postRender:function(){var t=this;t._super(),t.settings.activeTab=t.settings.activeTab||0,t.activateTab(t.settings.activeTab),this.on("click",function(e){var n=e.target.parentNode;if(n&&n.id===t._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===e.target&&t.activateTab(r)})},initLayoutRect:function(){var t,e,n;e=(e=vt.getSize(this.getEl("head")).width)<0?0:e,n=0,this.items().each(function(t){e=Math.max(e,t.layoutRect().minW),n=Math.max(n,t.layoutRect().minH)}),this.items().each(function(t){t.settings.x=0,t.settings.y=0,t.settings.w=e,t.settings.h=n,t.layoutRect({x:0,y:0,w:e,h:n})});var r=vt.getSize(this.getEl("head")).height;return this.settings.minWidth=e,this.settings.minHeight=n+r,(t=this._super()).deltaH+=r,t.innerH=t.h-t.deltaH,t}}),fi=Ee.extend({init:function(t){var e=this;e._super(t),e.classes.add("textbox"),t.multiline?e.classes.add("multiline"):(e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){e.state.set("value",t.target.value)}))},repaint:function(){var t,e,n,r,i,o=0;t=this.getEl().style,e=this._layoutRect,i=this._lastRepaintRect||{};var a=document;return!this.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(t.lineHeight=e.h-o+"px"),r=(n=this.borderBox).left+n.right+8,o=n.top+n.bottom+(this.settings.multiline?8:0),e.x!==i.x&&(t.left=e.x+"px",i.x=e.x),e.y!==i.y&&(t.top=e.y+"px",i.y=e.y),e.w!==i.w&&(t.width=e.w-r+"px",i.w=e.w),e.h!==i.h&&(t.height=e.h-o+"px",i.h=e.h),this._lastRepaintRect=i,this.fire("repaint",{},!1),this},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},r.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){t[e]=n[e]}),this.disabled()&&(t.disabled="disabled"),n.subtype&&(t.type=n.subtype),(e=vt.create(n.multiline?"textarea":"input",t)).value=this.state.get("value"),e.className=this.classes.toString(),e.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),di=function(){return{Selector:Ht,Collection:Lt,ReflowQueue:$t,Control:te,Factory:f,KeyboardNavigation:ne,Container:ie,DragHelper:ae,Scrollable:fe,Panel:de,Movable:Rt,Resizable:he,FloatPanel:we,Window:Ie,MessageBox:We,Tooltip:ke,Widget:Ee,Progress:Ne,Notification:Oe,Layout:ze,AbsoluteLayout:Fe,Button:Ue,ButtonGroup:Ve,Checkbox:je,ComboBox:$e,ColorBox:Xe,PanelButton:Ge,ColorButton:Ke,ColorPicker:Qe,Path:en,ElementPath:nn,FormItem:rn,Form:on,FieldSet:an,FilePicker:cr,FitLayout:fr,FlexLayout:dr,FlowLayout:hr,FormatControls:Ur,GridLayout:qr,Iframe:Vr,InfoBox:jr,Label:Yr,Toolbar:$r,MenuBar:Xr,MenuButton:Gr,MenuItem:Zr,Throbber:Se,Menu:Jr,ListBox:Kr,Radio:Qr,ResizeHandle:ti,SelectBox:ni,Slider:ai,Spacer:si,SplitButton:ui,StackLayout:li,TabPanel:ci,TextBox:fi,DropZone:tn,BrowseButton:qe}},hi=function(t){t.ui?r.each(di(),function(e,n){t.ui[n]=e}):t.ui=di()};r.each(di(),function(t,e){f.add(e,t)}),hi(window.tinymce?window.tinymce:{}),e.add("modern",function(t){return Ur.setup(t),Le(t)})}()}});