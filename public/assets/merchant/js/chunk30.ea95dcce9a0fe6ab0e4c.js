webpackJsonp([30],{"5LbU":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});function a(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var r,t,s;return r=e,(t=[{key:"get",value:function(e){if(this.errors[e])return Array.isArray(this.errors[e][0])?this.errors[e][0][0]:this.errors[e][0]}},{key:"clear",value:function(e){e?(delete this.errors[e],delete this.errors[e+"_id"],delete this.errors[e+"_text"]):this.errors={}}},{key:"record",value:function(e){var r=this;this.errors={},e&&_.forEach(e,function(e,t){var a=t;("string"==typeof t||t instanceof String)&&(a=t.split(".")[0]),r.errors[a]||(r.errors[a]=[]),r.errors[a].push(e)})}},{key:"has",value:function(e){var r=this;if(Array.isArray(e)){var t=!1;return e.forEach(function(e){t=t||r.has(e)}),t}return this.errors.hasOwnProperty(e)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}])&&a(r.prototype,t),s&&a(r,s),e}();function n(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(r){for(var t in function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.originalData=r,r)this[t]=r[t];this.errors=new s}var r,t,a;return r=e,(t=[{key:"data",value:function(){var e={};for(var r in this.originalData)e[r]=this[r];return e}},{key:"reset",value:function(){for(var e in this.originalData)this[e]="";this.errors.clear()}},{key:"get",value:function(e){return this.submit("get",e)}},{key:"post",value:function(e){return this.submit("post",e)}},{key:"patch",value:function(e){return this.submit("patch",e)}},{key:"submit",value:function(e,r){var t=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(a,s){axios[e](r,t.data()).then(function(e){t.onSuccess(e.data),a(e.data)}).catch(function(e){e.response?(422==e.response.status?t.onFail(e.response.data):500==e.response.status?alert("System error. Please submit a bug report including what you were doing and when."):400==e.response.status?console.log("Error 400"):alert("Network error "+e.response.status+". Please try again."),s(e.response.data)):(alert("Network error. Please submit a bug report including what you were doing and when."),console.log(e),s({}))})})}},{key:"onSuccess",value:function(e){}},{key:"onFail",value:function(e){this.errors.record(e)}}])&&n(r.prototype,t),a&&n(r,a),e}(),i={props:["languages","changes"],data:function(){return{rows:[],loading:!1,deleting:0,form:new o({language:{text:"",id:""},morpheme:{text:"",id:""},change:""})}},methods:{onSubmit:function(){var e=this;this.loading=!0,this.form.post("/changes").then(function(r){e.loading=!1,e.rows.push(r)}).catch(function(r){e.loading=!1})},deleteRow:function(e,r){var t=this;this.deleting=e.id,axios.delete("/changes/"+e.id).then(function(e){t.deleting=0,t.rows.splice(r,1)}).catch(function(e){t.deleting=0})},onLanguageInput:function(){this.form.morpheme={text:"",id:""}}},created:function(){this.rows=this.changes}},l=t("K1/g"),u=Object(l.a)(i,function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("table",{staticClass:"table"},[e._m(0),e._v(" "),t("tbody",e._l(e.rows,function(r,a){return t("tr",[t("td",[t("a",{attrs:{href:"/languages/"+r.morpheme.language.iso}},[e._v(e._s(r.morpheme.language.name))])]),e._v(" "),t("td",[t("a",{attrs:{href:"/morphemes/"+r.morpheme.id},domProps:{innerHTML:e._s(r.morpheme.uniqueName)}})]),e._v(" "),t("td",[e._v(e._s(r.disambiguator))]),e._v(" "),t("td",[e._v(e._s(r.change))]),e._v(" "),t("td",[t("a",{staticClass:"button"},[e.deleting!=r.id?t("span",{staticClass:"icon",attrs:{title:"delete"},on:{click:function(t){return e.deleteRow(r,a)}}},[t("i",{staticClass:"fa fa-times"})]):t("span",{staticClass:"icon"},[t("i",{staticClass:"fa fa-spinner fa-pulse fa-3x fa-fw"})])])])])}),0)]),e._v(" "),t("form",{on:{submit:function(r){return r.preventDefault(),e.onSubmit(r)},keydown:function(r){return e.form.errors.clear(r.target.name)}}},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-one-third"},[t("label",{staticClass:"label",attrs:{for:"language"}},[e._v("Language")]),e._v(" "),t("alg-datalist",{attrs:{list:e.languages,name:"language",required:"required",disabled:e.loading,classes:{"is-danger":e.form.errors.has("language")},autofocus:"autofocus"},on:{input:e.onLanguageInput},model:{value:e.form.language,callback:function(r){e.$set(e.form,"language",r)},expression:"form.language"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.form.errors.has("language"),expression:"form.errors.has('language')"}],staticClass:"help is-danger",domProps:{textContent:e._s(e.form.errors.get("language"))}})],1),e._v(" "),t("div",{staticClass:"column is-one-third"},[t("label",{staticClass:"label",attrs:{for:"morpheme"}},[e._v("Morpheme")]),e._v(" "),t("alg-ajaxlist",{attrs:{uri:"/autocomplete/morphemes",with:{language:e.form.language.id},disabled:e.loading||!e.form.language.id,placeholder:"Make sure to select the language first",classes:{"is-danger":e.form.errors.has("morpheme")},required:"required"},model:{value:e.form.morpheme,callback:function(r){e.$set(e.form,"morpheme",r)},expression:"form.morpheme"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.form.errors.has("morpheme"),expression:"form.errors.has('morpheme')"}],staticClass:"help is-danger",domProps:{textContent:e._s(e.form.errors.get("morpheme"))}})],1),e._v(" "),t("div",{staticClass:"column is-one-third"},[t("label",{staticClass:"label",attrs:{for:"change"}},[e._v("Change")]),e._v(" "),t("p",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.change,expression:"form.change"}],staticClass:"input",class:{"is-danger":e.form.errors.has("change")},attrs:{type:"text",autocomplete:"off",name:"change",required:"required",disabled:e.loading},domProps:{value:e.form.change},on:{input:function(r){r.target.composing||e.$set(e.form,"change",r.target.value)}}})]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.form.errors.has("change"),expression:"form.errors.has('change')"}],staticClass:"help is-danger",domProps:{textContent:e._s(e.form.errors.get("change"))}})])]),e._v(" "),t("button",{staticClass:"button",attrs:{type:"submit",disabled:e.form.errors.any()||e.loading}},[e._v("Submit")]),e._v(" "),t("span",{staticClass:"icon"},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"fa fa-spinner fa-pulse fa-3x fa-fw"})])])])},[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("thead",[t("tr",[t("th",[e._v("Language")]),e._v(" "),t("th",[e._v("Morpheme")]),e._v(" "),t("th",[e._v("Initial Change #")]),e._v(" "),t("th",[e._v("Initial Change")]),e._v(" "),t("th",[e._v("Remove")])])])}],!1,null,null,null);r.default=u.exports}});