webpackJsonp([17],{CkLi:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){var r=n(e,2),i=r[0],a=r[1];return i.some(function(e){return(a?e[a]:e)===t})}Object.defineProperty(e,"__esModule",{value:!0});var a={props:{lists:{type:Object},asyncRoutes:{type:Object},initial:{type:Object},template:{type:Object},filterProto:{type:Array,default:function(){return[]}},prefetch:{default:function(){}},oldErrors:{},oldValues:{}},data:function(){return{data:{},filteredLists:{},prefetchLists:{},asyncLoading:{},stringifiedData:""}},created:function(){this.initLists(),this.initValidator(),this.initData()},mounted:function(){var t=this.$vnode.elm;!function(t){var e=t.getElementsByTagName("input"),r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value;o.name&&o.name.length&&"_"!==o.name[0]&&(o.name="alg-"+o.name),o.autocomplete="off"}}catch(t){n=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}(t),function(t){var e=t.getElementsByClassName("editr"),r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value.getElementsByClassName("editr--content")[0].tabIndex=null}catch(t){n=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}(t),function(t){var e=t.querySelectorAll("input[type=radio], input[type=checkbox]"),r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value.tabIndex=-1}catch(t){n=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}(t),this.oldErrors&&this.updateErrors(this.oldErrors),function(t,e){var r={attributes:!0},n=new MutationObserver(function(t){var r=!0,n=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value;"disabled"===o.attributeName&&e(o.target)}}catch(t){n=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}}),i=!0,a=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;n.observe(u,r)}}catch(t){a=!0,s=t}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}}(t.querySelectorAll("input[type=text]"),function(t){var e=new Event("input",{bubbles:!0,cancelable:!0});t.value="",t.dispatchEvent(e)})},methods:{initLists:function(){if(this.lists)for(var t=Object.entries(this.lists),e=0;e<t.length;e++){var r=n(t[e],2),i=r[0],a=r[1];this.lists.hasOwnProperty(i)&&Array.isArray(a)&&this.$set(this.filteredLists,i,a.clone())}if(this.asyncRoutes)for(var s=Object.entries(this.asyncRoutes),o=0;o<s.length;o++){var l=n(s[o],2);i=l[0],l[1];this.$set(this.filteredLists,i,[]),this.$set(this.asyncLoading,i,!1)}if(this.prefetch)for(var u=Object.entries(this.prefetch),c=0;c<u.length;c++)for(var f=n(u[c],2),h=(i=f[0],f[1]),d=Object.entries(h),y=0;y<d.length;y++){var v=n(d[y],2),p=v[0];v[1];this.prefetchLists[p]=[]}},initValidator:function(){this.$validator.extend("exists",i)},initData:function(){var t=this;this.data=this.template,function t(e,r){if(null!==e)for(var i=Object.entries(e),a=0;a<i.length;a++){var s=n(i[a],2),o=s[0],l=s[1];if("fields"==o)for(var u=Object.entries(l),c=0;c<u.length;c++){var f=n(u[c],2),h=f[0],d=f[1];r&&r.hasOwnProperty(h)&&(d=r[h]),Vue.set(e,h,d)}else e.hasOwnProperty(o)&&t(l,r?r[o]:null)}}(this.data,this.oldValues||this.initial);var e=!0,r=!1,i=void 0;try{for(var a,s=function(){var e=a.value,r=t.data,n=e.split(".");n.forEach(function(t,e){e<n.length-1?r=r[t]:r[t]&&(r[t]=r[t].replace("*",""))})},o=this.filterProto[Symbol.iterator]();!(e=(a=o.next()).done);e=!0)s()}catch(t){r=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}},updateErrors:function(t){for(var e=this,r=Object.entries(t),i=function(){var t=n(r[a],2),i=t[0];t[1].forEach(function(t){return e.errors.add({field:i,msg:t})})},a=0;a<r.length;a++)i()},filterList:function(t,e,r){var n=e.toLowerCase(),i=this.lists[t]||this.prefetchLists[t];this.filteredLists[t]=i.filter(function(t){return t.name.toLowerCase().includes(n)&&(!r||r(t))}),this.prefetch.hasOwnProperty(t)&&this.getPrefetched(this.prefetch[t])},getPrefetched:function(t){for(var e=Object.entries(t),r=0;r<e.length;r++){var i=n(e[r],2),a=i[0],s=i[1];t.hasOwnProperty(a)&&this._getAsyncData(a,"",s(this),!0)}},getAsyncData:function(t,e,r){e.code&&(e.code.includes("Arrow")||"Tab"===e.code)||this._getAsyncData(t,e.target.value,r)},_getAsyncData:_.debounce(function(t,e,r,n){var i=this;this.asyncLoading[t]=!0,axios.get(this.asyncRoutes[t],{params:{term:e,options:r}}).then(function(e){n?i.prefetchLists[t]=e.data:i.filteredLists[t]=e.data,i.asyncLoading[t]=!1}).catch(function(t){console.error(t)})},500),beforeSubmit:function(){this.stringifiedData=JSON.stringify(this.data)}}},s=r("K1/g"),o=Object(s.a)(a,void 0,void 0,!1,null,null,null);e.default=o.exports}});