webpackJsonp([0],{"+uI+":function(t,e){(function(){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e){return t.fire("insertCustomChar",{chr:e})},n=function(t,n){var r=e(t,n).chr;t.execCommand("mceInsertContent",!1,r)},r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(t){return t.settings.charmap},o=function(t){return t.settings.charmap_append},a=r.isArray,s=function(t){return a(t)?[].concat((e=t,r.grep(e,function(t){return a(t)&&2===t.length}))):"function"==typeof t?t():[];var e},u=function(t){return function(t,e){var n=i(t);n&&(e=s(n));var r=o(t);return r?[].concat(e).concat(s(r)):e}(t,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},l=function(t){return{getCharMap:function(){return u(t)},insertChar:function(e){n(t,e)}}},c=function(t){var e,n,r,i=Math.min(t.length,25),o=Math.ceil(t.length/i);for(e='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<o;r++){for(e+="<tr>",n=0;n<i;n++){var a=r*i+n;if(a<t.length){var s=t[a],u=parseInt(s[0],10),l=s?String.fromCharCode(u):"&nbsp;";e+='<td title="'+s[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button" data-chr="'+u+'">'+l+"</div></td>"}else e+="<td />"}e+="</tr>"}return e+="</tbody></table>"},f=function(t){for(;t;){if("TD"===t.nodeName)return t;t=t.parentNode}},d=function(t){var e,r={type:"container",html:c(u(t)),onclick:function(r){var i=r.target;if(/^(TD|DIV)$/.test(i.nodeName)){var o=f(i).firstChild;if(o&&o.hasAttribute("data-chr")){var a=o.getAttribute("data-chr"),s=parseInt(a,10);isNaN(s)||n(t,String.fromCharCode(s)),r.ctrlKey||e.close()}}},onmouseover:function(t){var n=f(t.target);n&&n.firstChild?(e.find("#preview").text(n.firstChild.firstChild.data),e.find("#previewTitle").text(n.title)):(e.find("#preview").text(" "),e.find("#previewTitle").text(" "))}};e=t.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){e.close()}}]})},h=function(t){t.addCommand("mceShowCharmap",function(){d(t)})},m=function(t){t.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),t.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};t.add("charmap",function(t){return h(t),m(t),l(t)})}()}).call(window)},BzBW:function(t,e){(function(){!function(){"use strict";var t,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,arguments))}},i=function(t){return function(){return t}},o=function(t){return t},a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return t.apply(null,a)}},s=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,arguments)}},u=function(t){return t()},l=i(!1),c=i(!0),f=l,d=c,h=function(){return m},m=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:f,isSome:f,isNone:d,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:e,map:h,ap:h,each:function(){},bind:h,flatten:h,exists:f,forall:d,filter:h,equals:t,equals_:t,toArray:function(){return[]},toString:i("none()")};return Object.freeze&&Object.freeze(r),r}(),g=function(t){var e=function(){return t},n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:d,isNone:f,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return g(e(t))},ap:function(e){return e.fold(h,function(e){return g(e(t))})},each:function(e){e(t)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(t)?i:m},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(f,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},p={some:g,none:h,from:function(t){return null===t||void 0===t?m:g(t)}},v=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(e)===t}},b=v("string"),y=v("array"),w=v("boolean"),x=v("function"),C=v("number"),R=void 0===(t=Array.prototype.indexOf)?function(t,e){return P(t,e)}:function(e,n){return t.call(e,n)},k=function(t,e){return R(t,e)>-1},_=function(t,e){return A(t,e).isSome()},S=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i,t)}return r},T=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},E=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r,t)&&n.push(o)}return n},N=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n,t)}(t,function(t){n=e(n,t)}),n},D=function(t,e,n){return T(t,function(t){n=e(n,t)}),n},O=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n,t))return p.some(i)}return p.none()},A=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n,t))return p.some(n);return p.none()},P=function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},M=Array.prototype.push,H=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);M.apply(e,t[n])}return e},B=function(t,e){var n=S(t,e);return H(n)},I=function(t,e){for(var n=0,r=t.length;n<r;++n)if(!0!==e(t[n],n,t))return!1;return!0},W=Array.prototype.slice,L=function(t){var e=W.call(t,0);return e.reverse(),e},z=(x(Array.from)&&Array.from,Object.keys),F=function(t,e){for(var n=z(t),r=0,i=n.length;r<i;r++){var o=n[r];e(t[o],o,t)}},U=function(t,e){return j(t,function(t,n,r){return{k:n,v:e(t,n,r)}})},j=function(t,e){var n={};return F(t,function(r,i){var o=e(r,i,t);n[o.k]=o.v}),n},V=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return T(t,function(t,n){r[t]=i(e[n])}),r}},q=function(t){return t.slice(0).sort()},Y=function(t,e){throw new Error("All required keys ("+q(t).join(", ")+") were not specified. Specified keys were: "+q(e).join(", ")+".")},$=function(t){throw new Error("Unsupported keys for object: "+q(t).join(", "))},X=function(t,e){if(!y(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");T(e,function(e){if(!b(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},J=function(t){var e=q(t);O(e,function(t,n){return n<e.length-1&&t===e[n+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")})},K=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return X("required",t),X("optional",e),J(n),function(r){var o=z(r);I(t,function(t){return k(o,t)})||Y(t,o);var a=E(o,function(t){return!k(n,t)});a.length>0&&$(a);var s={};return T(t,function(t){s[t]=i(r[t])}),T(e,function(t){s[t]=i(Object.prototype.hasOwnProperty.call(r,t)?p.some(r[t]):p.none())}),s}},G=V("width","height"),Z=V("rows","columns"),Q=V("row","column"),tt=V("x","y"),et=V("element","rowspan","colspan"),nt=V("element","rowspan","colspan","isNew"),rt={dimensions:G,grid:Z,address:Q,coords:tt,extended:V("element","rowspan","colspan","row","column"),detail:et,detailnew:nt,rowdata:V("element","cells","section"),elementnew:V("element","isNew"),rowdatanew:V("element","cells","section","isNew"),rowcells:V("cells","section"),rowdetails:V("details","section"),bounds:V("startRow","startCol","finishRow","finishCol")},it=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:i(t)}},ot={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return it(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return it(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return it(n)},fromDom:it,fromPoint:function(t,e,n){var r=t.dom();return p.from(r.elementFromPoint(e,n)).map(it)}},at=(Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE),st=Node.DOCUMENT_NODE,ut=(Node.DOCUMENT_TYPE_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE),lt=Node.TEXT_NODE,ct=(Node.PROCESSING_INSTRUCTION_NODE,Node.ENTITY_REFERENCE_NODE,Node.ENTITY_NODE,Node.NOTATION_NODE,ut),ft=st,dt=function(t,e){var n=t.dom();if(n.nodeType!==ct)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},ht=function(t){return t.nodeType!==ct&&t.nodeType!==ft||0===t.childElementCount},mt="undefined"!=typeof window?window:Function("return this;")(),gt=function(t,e){return function(t,e){for(var n=void 0!==e&&null!==e?e:mt,r=0;r<t.length&&void 0!==n&&null!==n;++r)n=n[t[r]];return n}(t.split("."),e)},pt=function(t,e){var n=function(t,e){return gt(t,e)}(t,e);if(void 0===n||null===n)throw t+" not available on this browser";return n},vt=function(){return pt("Node")},bt=function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)},yt=function(t,e){return bt(t,e,vt().DOCUMENT_POSITION_CONTAINED_BY)},wt=function(t){var e,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,e=t.apply(null,r)),e}},xt=function(){return Ct(0,0)},Ct=function(t,e){return{major:t,minor:e}},Rt={nu:Ct,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?xt():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return Ct(r(1),r(2))}(t,n)},unknown:xt},kt=function(t,e){return function(){return e===t}},_t=function(t){var e=t.current;return{current:e,version:t.version,isEdge:kt("Edge",e),isChrome:kt("Chrome",e),isIE:kt("IE",e),isOpera:kt("Opera",e),isFirefox:kt("Firefox",e),isSafari:kt("Safari",e)}},St={unknown:function(){return _t({current:void 0,version:Rt.unknown()})},nu:_t,edge:i("Edge"),chrome:i("Chrome"),ie:i("IE"),opera:i("Opera"),firefox:i("Firefox"),safari:i("Safari")},Tt=function(t,e){return function(){return e===t}},Et=function(t){var e=t.current;return{current:e,version:t.version,isWindows:Tt("Windows",e),isiOS:Tt("iOS",e),isAndroid:Tt("Android",e),isOSX:Tt("OSX",e),isLinux:Tt("Linux",e),isSolaris:Tt("Solaris",e),isFreeBSD:Tt("FreeBSD",e)}},Nt={unknown:function(){return Et({current:void 0,version:Rt.unknown()})},nu:Et,windows:i("Windows"),ios:i("iOS"),android:i("Android"),linux:i("Linux"),osx:i("OSX"),solaris:i("Solaris"),freebsd:i("FreeBSD")},Dt=function(t,e){var n=String(e).toLowerCase();return O(t,function(t){return t.search(n)})},Ot=function(t,e){return Dt(t,e).map(function(t){var n=Rt.detect(t.versionRegexes,e);return{current:t.name,version:n}})},At=function(t,e){return Dt(t,e).map(function(t){var n=Rt.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Pt=function(t,e){return-1!==t.indexOf(e)},Mt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ht=function(t){return function(e){return Pt(e,t)}},Bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Pt(t,"edge/")&&Pt(t,"chrome")&&Pt(t,"safari")&&Pt(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Mt],search:function(t){return Pt(t,"chrome")&&!Pt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Pt(t,"msie")||Pt(t,"trident")}},{name:"Opera",versionRegexes:[Mt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ht("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ht("firefox")},{name:"Safari",versionRegexes:[Mt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Pt(t,"safari")||Pt(t,"mobile/"))&&Pt(t,"applewebkit")}}],It=[{name:"Windows",search:Ht("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Pt(t,"iphone")||Pt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ht("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ht("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ht("linux"),versionRegexes:[]},{name:"Solaris",search:Ht("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ht("freebsd"),versionRegexes:[]}],Wt={browsers:i(Bt),oses:i(It)},Lt=function(t){var e=Wt.browsers(),n=Wt.oses(),r=Ot(e,t).fold(St.unknown,St.nu),o=At(n,t).fold(Nt.unknown,Nt.nu);return{browser:r,os:o,deviceType:function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,a=t.isAndroid()&&3===t.version.major,s=t.isAndroid()&&4===t.version.major,u=r||a||s&&!0===/mobile/i.test(n),l=t.isiOS()||t.isAndroid(),c=l&&!u,f=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:i(r),isiPhone:i(o),isTablet:i(u),isPhone:i(c),isTouch:i(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:i(f)}}(o,r,t)}},zt={detect:wt(function(){var t=navigator.userAgent;return Lt(t)})},Ft=function(t,e){return t.dom()===e.dom()},Ut=zt.detect().browser.isIE()?function(t,e){return yt(t.dom(),e.dom())}:function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},jt=dt,Vt=function(t){return ot.fromDom(t.dom().ownerDocument)},qt=function(t){var e=t.dom();return p.from(e.parentNode).map(ot.fromDom)},Yt=function(t,e){for(var n=x(e)?e:i(!1),r=t.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var a=r.parentNode,s=ot.fromDom(a);if(o.push(s),!0===n(s))break;r=a}return o},$t=function(t){var e=t.dom();return p.from(e.previousSibling).map(ot.fromDom)},Xt=function(t){var e=t.dom();return p.from(e.nextSibling).map(ot.fromDom)},Jt=function(t){var e=t.dom();return S(e.childNodes,ot.fromDom)},Kt=function(t,e){var n=t.dom().childNodes;return p.from(n[e]).map(ot.fromDom)},Gt=(V("element","offset"),function(t,e,n){return B(Jt(t),function(t){return dt(t,e)?n(t)?[t]:[]:Gt(t,e,n)})}),Zt={firstLayer:function(t,e){return Gt(t,e,i(!0))},filterFirstLayer:Gt},Qt=function(t){return t.dom().nodeName.toLowerCase()},te=function(t){return t.dom().nodeType},ee=function(t){return function(e){return te(e)===t}},ne=function(t){return te(t)===at||"#comment"===Qt(t)},re=ee(ut),ie=ee(lt),oe=ee(st),ae=function(t,e,n){if(!(b(n)||w(n)||C(n)))throw console.error("Invalid call to Attr.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},se=function(t,e,n){ae(t.dom(),e,n)},ue=function(t,e){var n=t.dom();F(e,function(t,e){ae(n,e,t)})},le=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},ce=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},fe=function(t,e){t.dom().removeAttribute(e)},de=function(t){return D(t.dom().attributes,function(t,e){return t[e.name]=e.value,t},{})},he=function(t){var e=ie(t)?t.dom().parentNode:t.dom();return void 0!==e&&null!==e&&e.ownerDocument.body.contains(e)},me=wt(function(){return ge(ot.fromDom(document))}),ge=function(t){var e=t.dom().body;if(null===e||void 0===e)throw"Body is not available yet";return ot.fromDom(e)},pe=function(t,e){var n=[];return T(Jt(t),function(t){e(t)&&(n=n.concat([t])),n=n.concat(pe(t,e))}),n},ve=function(t,e,n){return function(t,e,n){return E(Yt(t,n),e)}(t,function(t){return dt(t,e)},n)},be=function(t,e){return function(t,e){return E(Jt(t),e)}(t,function(t){return dt(t,e)})},ye=function(t,e){return function(t,e){var n=void 0===e?document:e.dom();return ht(n)?[]:S(n.querySelectorAll(t),ot.fromDom)}(e,t)};function we(t,e,n,r,i){return t(n,r)?p.some(n):x(i)&&i(n)?p.none():e(n,r,i)}var xe=function(t,e,n){for(var r=t.dom(),o=x(n)?n:i(!1);r.parentNode;){r=r.parentNode;var a=ot.fromDom(r);if(e(a))return p.some(a);if(o(a))break}return p.none()},Ce=function(t,e,n){return xe(t,function(t){return dt(t,e)},n)},Re=function(t,e){return function(t,e){return O(t.dom().childNodes,r(e,ot.fromDom)).map(ot.fromDom)}(t,function(t){return dt(t,e)})},ke=function(t,e){return function(t,e){var n=void 0===e?document:e.dom();return ht(n)?p.none():p.from(n.querySelector(t)).map(ot.fromDom)}(e,t)},_e=function(t,e,n){return we(dt,Ce,t,e,n)},Se=function(t,e,n){var r=void 0!==n?n:i(!1);return r(e)?p.none():k(t,Qt(e))?p.some(e):Ce(e,t.join(","),function(t){return dt(t,"table")||r(t)})},Te=function(t,e){return qt(e).map(function(e){return be(e,t)})},Ee=function(t,e){return parseInt(le(t,e),10)},Ne={cell:function(t,e){return Se(["td","th"],t,e)},firstCell:function(t){return ke(t,"th,td")},cells:function(t){return Zt.firstLayer(t,"th,td")},neighbourCells:a(Te,"th,td"),table:function(t,e){return _e(t,"table",e)},row:function(t,e){return Se(["tr"],t,e)},rows:function(t){return Zt.firstLayer(t,"tr")},notCell:function(t,e){return Se(["caption","tr","tbody","tfoot","thead"],t,e)},neighbourRows:a(Te,"tr"),attr:Ee,grid:function(t,e,n){var r=Ee(t,e),i=Ee(t,n);return rt.grid(r,i)}},De=function(t){var e=Ne.rows(t);return S(e,function(t){var e=t,n=qt(e).map(function(t){var e=Qt(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"}).getOr("tbody"),r=S(Ne.cells(t),function(t){var e=ce(t,"rowspan")?parseInt(le(t,"rowspan"),10):1,n=ce(t,"colspan")?parseInt(le(t,"colspan"),10):1;return rt.detail(t,e,n)});return rt.rowdata(e,r,n)})},Oe=function(t,e){return S(t,function(t){var n=S(Ne.cells(t),function(t){var e=ce(t,"rowspan")?parseInt(le(t,"rowspan"),10):1,n=ce(t,"colspan")?parseInt(le(t,"colspan"),10):1;return rt.detail(t,e,n)});return rt.rowdata(t,n,e.section())})},Ae=function(t,e){return t+","+e},Pe=function(t,e){var n=B(t.all(),function(t){return t.cells()});return E(n,e)},Me={generate:function(t){var e={},n=[],r=t.length,o=0;T(t,function(t,r){var i=[];T(t.cells(),function(t,n){for(var a=0;void 0!==e[Ae(r,a)];)a++;for(var s=rt.extended(t.element(),t.rowspan(),t.colspan(),r,a),u=0;u<t.colspan();u++)for(var l=0;l<t.rowspan();l++){var c=a+u,f=Ae(r+l,c);e[f]=s,o=Math.max(o,c+1)}i.push(s)}),n.push(rt.rowdata(t.element(),i,t.section()))});var a=rt.grid(r,o);return{grid:i(a),access:i(e),all:i(n)}},getAt:function(t,e,n){var r=t.access()[Ae(e,n)];return void 0!==r?p.some(r):p.none()},findItem:function(t,e,n){var r=Pe(t,function(t){return n(e,t.element())});return r.length>0?p.some(r[0]):p.none()},filterItems:Pe,justCells:function(t){var e=S(t.all(),function(t){return t.cells()});return H(e)}},He=function(t){return void 0!==t.style},Be=function(t,e,n){if(!b(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);He(t)&&t.style.setProperty(e,n)},Ie=function(t,e,n){var r=t.dom();Be(r,e,n)},We=function(t,e){var n=t.dom();F(e,function(t,e){Be(n,e,t)})},Le=function(t,e){var n=t.dom(),r=window.getComputedStyle(n).getPropertyValue(e),i=""!==r||he(t)?r:ze(n,e);return null===i?void 0:i},ze=function(t,e){return He(t)?t.style.getPropertyValue(e):""},Fe=function(t,e){var n=t.dom(),r=ze(n,e);return p.from(r).filter(function(t){return t.length>0})},Ue=function(t,e){!function(t,e){He(t)&&t.style.removeProperty(e)}(t.dom(),e),ce(t,"style")&&""===le(t,"style").replace(/^\s+|\s+$/g,"")&&fe(t,"style")},je=function(t,e){qt(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})},Ve=function(t,e){Xt(t).fold(function(){qt(t).each(function(t){Ye(t,e)})},function(t){je(t,e)})},qe=function(t,e){(function(t){return Kt(t,0)})(t).fold(function(){Ye(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},Ye=function(t,e){t.dom().appendChild(e.dom())},$e=function(t,e){je(t,e),Ye(e,t)},Xe=function(t,e){T(e,function(n,r){var i=0===r?t:e[r-1];Ve(i,n)})},Je=function(t,e){T(e,function(e){Ye(t,e)})},Ke=function(t){t.dom().textContent="",T(Jt(t),function(t){Ge(t)})},Ge=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},Ze=function(t){var e,n=Jt(t);n.length>0&&(e=t,T(n,function(t){je(e,t)})),Ge(t)},Qe=V("minRow","minCol","maxRow","maxCol"),tn=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),i=n,o=0,a=0;return F(t.access(),function(t){if(e(t)){var n=t.row(),s=n+t.rowspan()-1,u=t.column(),l=u+t.colspan()-1;n<r?r=n:s>o&&(o=s),u<i?i=u:l>a&&(a=l)}}),Qe(r,i,o,a)},en=function(t,e,n){var r=t[n].element(),i=ot.fromTag("td");Ye(i,ot.fromTag("br")),(e?Ye:qe)(r,i)},nn=function(t,e){var n=function(t){return dt(t.element(),e)},r=De(t),i=Me.generate(r),o=tn(i,n),a="th:not("+e+"),td:not("+e+")",s=Zt.filterFirstLayer(t,"th,td",function(t){return dt(t,a)});return T(s,Ge),function(t,e,n,r){for(var i=e.grid().columns(),o=e.grid().rows(),a=0;a<o;a++)for(var s=!1,u=0;u<i;u++)a<n.minRow()||a>n.maxRow()||u<n.minCol()||u>n.maxCol()||(Me.getAt(e,a,u).filter(r).isNone()?en(t,s,a):s=!0)}(r,i,o,n),function(t,e){var n=E(Zt.firstLayer(t,"tr"),function(t){return 0===t.dom().childElementCount});T(n,Ge),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||T(Zt.firstLayer(t,"th,td"),function(t){fe(t,"rowspan"),fe(t,"colspan")}),fe(t,"width"),fe(t,"height"),Ue(t,"width"),Ue(t,"height")}(t,o),t},rn=function(t,e){return ot.fromDom(t.dom().cloneNode(e))},on=function(t){return rn(t,!1)},an=function(t){return rn(t,!0)},sn=function(t,e){var n=function(t,e){var n=ot.fromTag(e),r=de(t);return ue(n,r),n}(t,e),r=Jt(an(t));return Je(n,r),n},un=function(t,e){var n=function(e){return t(e)?p.from(e.dom().nodeValue):p.none()},r=zt.detect().browser,i=r.isIE()&&10===r.version.major?function(t){try{return n(t)}catch(t){return p.none()}}:n;return{get:function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return i(n).getOr("")},getOption:i,set:function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r}}}(ie,"text"),ln=function(t){return un.get(t)},cn=function(t){return un.getOption(t)},fn=function(t,e){un.set(t,e)},dn=function(t){return"img"===Qt(t)?1:cn(t).fold(function(){return Jt(t).length},function(t){return t.length})},hn=["img","br"],mn=function(t){return cn(t).filter(function(t){return 0!==t.trim().length||t.indexOf(" ")>-1}).isSome()||k(hn,Qt(t))},gn=function(t){return e=mn,(n=function(t){for(var r=0;r<t.childNodes.length;r++){if(e(ot.fromDom(t.childNodes[r])))return p.some(ot.fromDom(t.childNodes[r]));var i=n(t.childNodes[r]);if(i.isSome())return i}return p.none()})(t.dom());var e,n},pn=function(t){return vn(t,mn)},vn=function(t,e){var n=function(t){for(var r=Jt(t),i=r.length-1;i>=0;i--){var o=r[i];if(e(o))return p.some(o);var a=n(o);if(a.isSome())return a}return p.none()};return n(t)},bn=function(){var t=ot.fromTag("td");return Ye(t,ot.fromTag("br")),t},yn=function(t,e,n){var r=sn(t,e);return F(n,function(t,e){null===t?fe(r,e):se(r,e,t)}),r},wn=function(t){return t},xn=function(t){return function(){return ot.fromTag("tr",t.dom())}},Cn=function(t,e,n){return{row:xn(e),cell:function(e){var r,i,o,a,s=Vt(e.element()),u=ot.fromTag(Qt(e.element()),s.dom()),l=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=l.length>0?function(t,e,n){return gn(t).map(function(r){var i=n.join(","),o=ve(r,i,function(e){return Ft(e,t)});return N(o,function(t,e){var n=on(e);return fe(n,"contenteditable"),Ye(t,n),n},e)}).getOr(e)}(e.element(),u,l):u;return Ye(c,ot.fromTag("br")),r=e.element(),i=u,o=r.dom(),a=i.dom(),He(o)&&He(a)&&(a.style.cssText=o.style.cssText),Ue(u,"height"),1!==e.colspan()&&Ue(e.element(),"width"),t(e.element(),u),u},replace:yn,gap:bn}},Rn=function(t){return{row:xn(t),cell:bn,replace:wn,gap:bn}},kn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function _n(){return{up:i({selector:Ce,closest:_e,predicate:xe,all:Yt}),down:i({selector:ye,predicate:pe}),styles:i({get:Le,getRaw:Fe,set:Ie,remove:Ue}),attrs:i({get:le,set:se,remove:fe,copyTo:function(t,e){var n=de(t);ue(e,n)}}),insert:i({before:je,after:Ve,afterAll:Xe,append:Ye,appendAll:Je,prepend:qe,wrap:$e}),remove:i({unwrap:Ze,remove:Ge}),create:i({nu:ot.fromTag,clone:function(t){return ot.fromDom(t.dom().cloneNode(!1))},text:ot.fromText}),query:i({comparePosition:function(t,e){return t.dom().compareDocumentPosition(e.dom())},prevSibling:$t,nextSibling:Xt}),property:i({children:Jt,name:Qt,parent:qt,isText:ie,isComment:ne,isElement:re,getText:ln,setText:fn,isBoundary:function(t){return!!re(t)&&("body"===Qt(t)||k(kn,Qt(t)))},isEmptyTag:function(t){return!!re(t)&&k(["br","img","hr","input"],Qt(t))}}),eq:Ft,is:jt}}var Sn=V("left","right"),Tn=function(t,e,n){var r=t.property().children(e);return A(r,a(t.eq,n)).map(function(t){return{before:i(r.slice(0,t)),after:i(r.slice(t+1))}})},En=function(t,e,n){return Tn(t,e,n).map(function(r){var i=t.create().clone(e);return t.insert().appendAll(i,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,i),Sn(i,e)})},Nn=function(t,e,n){return Tn(t,e,n).map(function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),Sn(e,r)})},Dn=function(t,e,n,r){var i=V("first","second","splits"),o=function(e,a,s){var u=i(e,p.none(),s);return n(e)?i(e,a,s):t.property().parent(e).bind(function(i){return r(t,i,e).map(function(t){var e=[{first:t.left,second:t.right}],r=n(i)?i:t.left();return o(r,p.some(t.right()),s.concat(e))}).getOr(u)})};return o(e,p.none(),[])},On=function(t,e,n,r){var i=e(t,n);return N(r,function(n,r){var i=e(t,r);return An(t,n,i)},i)},An=function(t,e,n){return e.bind(function(e){return n.filter(a(t.eq,e))})},Pn=function(t,e,n){return n.length>0?function(t,e,n,r){return r(t,e,n[0],n.slice(1))}(t,e,n,On):p.none()},Mn=function(t,e){return a(t.eq,e)},Hn=function(t,e,n,r){var o=void 0!==r?r:i(!1),a=[e].concat(t.up().all(e)),s=[n].concat(t.up().all(n)),u=function(t){return A(t,o).fold(function(){return t},function(e){return t.slice(0,e+1)})},l=u(a),c=u(s),f=O(l,function(e){return _(c,Mn(t,e))});return{firstpath:i(l),secondpath:i(c),shared:i(f)}},Bn=function(t,e,n){var r=Hn(t,e,n);return r.shared().bind(function(e){return function(t,e,n,r){var i=t.property().children(e);if(t.eq(e,n[0]))return p.some([n[0]]);if(t.eq(e,r[0]))return p.some([r[0]]);var o=function(n){var r=L(n),o=A(r,Mn(t,e)).getOr(-1),a=o<r.length-1?r[o+1]:r[o];return A(i,Mn(t,a))},a=o(n),s=o(r);return a.bind(function(t){return s.map(function(e){var n=Math.min(t,e),r=Math.max(t,e);return i.slice(n,r+1)})})}(t,e,r.firstpath(),r.secondpath())})},In=Hn,Wn=function(t,e,n){return Pn(t,e,n)},Ln=function(t,e,n){return Bn(t,e,n)},zn=function(t,e,n,r){return In(t,e,n,r)},Fn=function(t,e,n){return En(t,e,n)},Un=function(t,e,n){return Nn(t,e,n)},jn=function(t,e,n,r){return Dn(t,e,n,r)},Vn=_n(),qn={sharedOne:function(t,e){return Wn(Vn,function(e,n){return t(n)},e)},subset:function(t,e){return Ln(Vn,t,e)},ancestors:function(t,e,n){return zn(Vn,t,e,n)},breakToLeft:function(t,e){return Fn(Vn,t,e)},breakToRight:function(t,e){return Un(Vn,t,e)},breakPath:function(t,e,n){return jn(Vn,t,e,function(t,e,r){return n(e,r)})}},Yn=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},$n=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,i=e.row(),o=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&i<=t.finishRow()&&o>=t.startRow()},Xn=function(t,e){for(var n=!0,r=a(Yn,e),i=e.startRow();i<=e.finishRow();i++)for(var o=e.startCol();o<=e.finishCol();o++)n=n&&Me.getAt(t,i,o).exists(r);return n?p.some(e):p.none()},Jn=function(t,e,n){var r=Me.findItem(t,e,Ft),i=Me.findItem(t,n,Ft);return r.bind(function(t){return i.map(function(e){return n=t,r=e,rt.bounds(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r})})},Kn=Jn,Gn=function(t,e,n){return Jn(t,e,n).bind(function(e){return Xn(t,e)})},Zn=function(t,e,n,r){return Me.findItem(t,e,Ft).bind(function(e){var i=n>0?e.row()+e.rowspan()-1:e.row(),o=r>0?e.column()+e.colspan()-1:e.column();return Me.getAt(t,i+n,o+r).map(function(t){return t.element()})})},Qn=function(t,e,n){return Kn(t,e,n).map(function(e){var n=Me.filterItems(t,a($n,e));return S(n,function(t){return t.element()})})},tr=function(t,e){return Me.findItem(t,e,function(t,e){return Ut(e,t)}).bind(function(t){return t.element()})},er=function(t){var e=De(t);return Me.generate(e)},nr=function(t,e,n){return Ne.table(t).bind(function(r){var i=er(r);return Zn(i,t,e,n)})},rr=function(t,e,n){var r=er(t);return Qn(r,e,n)},ir=function(t,e,n,r,i){var o=er(t),a=Ft(t,n)?e:tr(o,e),s=Ft(t,i)?r:tr(o,r);return Qn(o,a,s)},or=function(t,e,n){var r=er(t);return Gn(r,e,n)},ar=function(t,e){return Ce(t,"table")},sr=K(["boxes","start","finish"],[]),ur=function(t,e,n){var r=function(t){return function(e){return n(e)||Ft(e,t)}};return Ft(t,e)?p.some(sr({boxes:p.some([t]),start:t,finish:e})):ar(t).bind(function(i){return ar(e).bind(function(o){if(Ft(i,o))return p.some(sr({boxes:rr(i,t,e),start:t,finish:e}));if(Ut(i,o)){var a=(s=ve(e,"td,th",r(i))).length>0?s[s.length-1]:e;return p.some(sr({boxes:ir(i,t,i,e,o),start:t,finish:a}))}if(Ut(o,i)){var s,u=(s=ve(t,"td,th",r(o))).length>0?s[s.length-1]:t;return p.some(sr({boxes:ir(o,t,i,e,o),start:t,finish:u}))}return qn.ancestors(t,e).shared().bind(function(a){return _e(a,"table",n).bind(function(n){var a=ve(e,"td,th",r(n)),s=a.length>0?a[a.length-1]:e,u=ve(t,"td,th",r(n)),l=u.length>0?u[u.length-1]:t;return p.some(sr({boxes:ir(n,t,i,e,o),start:l,finish:s}))})})})})},lr={identify:ur,retrieve:function(t,e){var n=ye(t,e);return n.length>0?p.some(n):p.none()},shiftSelection:function(t,e,n,r,o){return function(t,e){return O(t,function(t){return dt(t,e)})}(t,o).bind(function(t){return nr(t,e,n).bind(function(t){return function(t,e){return Ce(t,"table").bind(function(n){return ke(n,e).bind(function(e){return ur(e,t).bind(function(t){return t.boxes().map(function(e){return{boxes:i(e),start:i(t.start()),finish:i(t.finish())}})})})})}(t,r)})})},getEdges:function(t,e,n){return ke(t,e).bind(function(e){return ke(t,n).bind(function(t){return qn.sharedOne(ar,[e,t]).map(function(n){return{first:i(e),last:i(t),table:i(n)}})})})}},cr=function(t,e){return lr.retrieve(t,e)},fr=function(t,e,n){return lr.getEdges(t,e,n).bind(function(e){var n=function(e){return Ft(t,e)},r=Ce(e.first(),"thead,tfoot,tbody,table",n),i=Ce(e.last(),"thead,tfoot,tbody,table",n);return r.bind(function(t){return i.bind(function(n){return Ft(t,n)?or(e.table(),e.first(),e.last()):p.none()})})})},dr="data-mce-selected",hr={selected:i(dr),selectedSelector:i("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:i("[data-mce-selected]"),firstSelected:i("data-mce-first-selected"),firstSelectedSelector:i("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:i("data-mce-last-selected"),lastSelectedSelector:i("td[data-mce-last-selected],th[data-mce-last-selected]")},mr=function(t){if(!y(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return T(t,function(r,i){var o=z(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!y(s))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(t){var n=z(t);if(e.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+n.join(","));if(!I(e,function(t){return k(n,t)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,r)},log:function(t){console.log(t,{constructors:e,constructor:a,params:r})}}}}),n},gr=mr([{none:[]},{multiple:["elements"]},{single:["selection"]}]),pr={cata:function(t,e,n,r){return t.fold(e,n,r)},none:gr.none,multiple:gr.multiple,single:gr.single},vr=function(t,e){return pr.cata(e.get(),i([]),o,i([t]))},br=function(t,e){return pr.cata(e.get(),p.none,function(e,n){return 0===e.length?p.none():fr(t,hr.firstSelectedSelector(),hr.lastSelectedSelector()).bind(function(t){return e.length>1?p.some({bounds:i(t),cells:i(e)}):p.none()})},p.none)},yr=function(t,e){var n=vr(t,e);return n.length>0&&I(n,function(t){return ce(t,"rowspan")&&parseInt(le(t,"rowspan"),10)>1||ce(t,"colspan")&&parseInt(le(t,"colspan"),10)>1})?p.some(n):p.none()},wr=vr,xr=function(t){return{element:i(t),mergable:p.none,unmergable:p.none,selection:i([t])}},Cr=V("element","clipboard","generators"),Rr={noMenu:xr,forMenu:function(t,e,n){return{element:i(n),mergable:i(br(e,t)),unmergable:i(yr(n,t)),selection:i(wr(n,t))}},notCell:function(t){return xr(t)},paste:Cr,pasteRows:function(t,e,n,r,o){return{element:i(n),mergable:p.none,unmergable:p.none,selection:i(wr(n,t)),clipboard:i(r),generators:i(o)}}},kr={registerEvents:function(t,e,r,i){t.on("BeforeGetContent",function(r){!0===r.selection&&pr.cata(e.get(),n,function(e){r.preventDefault(),function(t){return Ne.table(t[0]).map(an).map(function(t){return[nn(t,hr.attributeSelector())]})}(e).each(function(e){r.content=S(e,function(e){return function(t,e){return t.selection.serializer.serialize(e.dom(),{})}(t,e)}).join("")})},n)}),t.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&p.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(n){var o=ot.fromDom(n);Ne.table(o).bind(function(n){var a,s,u,l=E((a=e.content,(u=(s||document).createElement("div")).innerHTML=a,Jt(ot.fromDom(u))),function(t){return"meta"!==Qt(t)});if(1===l.length&&"table"===Qt(l[0])){e.preventDefault();var c=ot.fromDom(t.getDoc()),f=Rn(c),d=Rr.paste(o,l[0],f);r.pasteCells(n,d).each(function(e){t.selection.setRng(e),t.focus(),i.clear(n)})}})})})}};function _r(t,e){var n=function(n){var r=e(n);if(r<=0||null===r){var i=Le(n,t);return parseFloat(i)||0}return r},r=function(t,e){return D(e,function(e,n){var r=Le(t,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?e:e+i},0)};return{set:function(e,n){if(!C(n)&&!n.match(/^[0-9]+$/))throw t+".set accepts only positive integer values. Value was "+n;var r=e.dom();He(r)&&(r.style[t]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(t,e,n){var i=r(t,n);return e>i?e-i:0}}}var Sr=_r("height",function(t){var e=t.dom();return he(t)?e.getBoundingClientRect().height:e.offsetHeight}),Tr=function(t){return Sr.get(t)},Er=function(t){return Sr.getOuter(t)},Nr=_r("width",function(t){return t.dom().offsetWidth}),Dr=function(t){return Nr.get(t)},Or=function(t){return Nr.getOuter(t)},Ar=zt.detect(),Pr=function(t,e,n){return function(t,e){var n=parseFloat(t);return isNaN(n)?e:n}(Le(t,e),n)},Mr=function(t){return Ar.browser.isIE()||Ar.browser.isEdge()?function(t){var e=Pr(t,"padding-top",0),n=Pr(t,"padding-bottom",0),r=Pr(t,"border-top-width",0),i=Pr(t,"border-bottom-width",0),o=t.dom().getBoundingClientRect().height;return"border-box"===Le(t,"box-sizing")?o:o-e-n-(r+i)}(t):Pr(t,"height",Tr(t))},Hr=/(\d+(\.\d+)?)(\w|%)*/,Br=/(\d+(\.\d+)?)%/,Ir=/(\d+(\.\d+)?)px|em/,Wr=function(t,e){Ie(t,"height",e+"px")},Lr=function(t,e,n,r){var i,o,a=parseInt(t,10);return function(t,e,n){return""===e||!(t.length<e.length)&&t.substr(n,n+e.length)===e}(i=t,o="%",i.length-o.length)&&"table"!==Qt(e)?function(t,e,n,r){var i=Ne.table(t).map(function(t){var r=n(t);return Math.floor(e/100*r)}).getOr(e);return r(t,i),i}(e,a,n,r):a},zr=function(t){var e=function(t){return Fe(t,"height").getOrThunk(function(){return Mr(t)+"px"})}(t);return e?Lr(e,t,Tr,Wr):Tr(t)},Fr=function(t,e){return ce(t,e)?parseInt(le(t,e),10):1},Ur=function(t){return Fe(t,"width").fold(function(){return p.from(le(t,"width"))},function(t){return p.some(t)})},jr=function(t,e){return t/e.pixelWidth()*100},Vr={percentageBasedSizeRegex:i(Br),pixelBasedSizeRegex:i(Ir),setPixelWidth:function(t,e){Ie(t,"width",e+"px")},setPercentageWidth:function(t,e){Ie(t,"width",e+"%")},setHeight:Wr,getPixelWidth:function(t,e){return Ur(t).fold(function(){return Dr(t)},function(n){return function(t,e,n){if(Ir.test(e)){var r=Ir.exec(e);return parseInt(r[1],10)}if(Br.test(e)){var i=Br.exec(e);return function(t,e){return t/100*e.pixelWidth()}(parseFloat(i[1]),n)}return Dr(t)}(t,n,e)})},getPercentageWidth:function(t,e){return Ur(t).fold(function(){var n=Dr(t);return jr(n,e)},function(n){return function(t,e,n){if(Br.test(e)){var r=Br.exec(e);return parseFloat(r[1])}var i=Dr(t);return jr(i,n)}(t,n,e)})},getGenericWidth:function(t){return Ur(t).bind(function(t){if(Hr.test(t)){var e=Hr.exec(t);return p.some({width:i(e[1]),unit:i(e[3])})}return p.none()})},setGenericWidth:function(t,e,n){Ie(t,"width",e+n)},getHeight:function(t){return function(t,e,n){return n(t)/Fr(t,e)}(t,"rowspan",zr)},getRawWidth:Ur},qr=function(t,e){Vr.getGenericWidth(t).each(function(n){var r=n.width()/2;Vr.setGenericWidth(t,r,n.unit()),Vr.setGenericWidth(e,r,n.unit())})},Yr=function(t,e){return{left:i(t),top:i(e),translate:function(n,r){return Yr(t+n,e+r)}}},$r=Yr,Xr=function(t,e){return void 0!==t?t:void 0!==e?e:0},Jr=function(t){var e=t.dom().ownerDocument,n=e.body,r=function(t){var e=t.dom();return e===e.window&&t instanceof Window?t:oe(t)?e.defaultView||e.parentWindow:null}(ot.fromDom(e)),i=e.documentElement,o=Xr(r.pageYOffset,i.scrollTop),a=Xr(r.pageXOffset,i.scrollLeft),s=Xr(i.clientTop,n.clientTop),u=Xr(i.clientLeft,n.clientLeft);return Kr(t).translate(a-u,o-s)},Kr=function(t){var e=t.dom(),n=e.ownerDocument,r=n.body,i=ot.fromDom(n.documentElement);return r===e?$r(r.offsetLeft,r.offsetTop):function(t,e){var n=e||ot.fromDom(document.documentElement);return xe(t,a(Ft,n)).isSome()}(t,i)?function(t){var e=t.getBoundingClientRect();return $r(e.left,e.top)}(e):$r(0,0)},Gr=V("row","y"),Zr=V("col","x"),Qr=function(t){return Jr(t).left()+Or(t)},ti=function(t){return Jr(t).left()},ei=function(t,e){return Zr(t,ti(e))},ni=function(t,e){return Zr(t,Qr(e))},ri=function(t){return Jr(t).top()},ii=function(t,e,n){if(0===n.length)return[];var r=S(n.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),i=n[n.length-1].map(function(t){return e(n.length-1,t)});return r.concat([i])},oi={delta:o,positions:a(ii,function(t,e){return Gr(t,ri(e))},function(t,e){return Gr(t,ri(e)+Er(e))}),edge:ri},ai={delta:o,edge:ti,positions:a(ii,ei,ni)},si={height:oi,rtl:{delta:function(t,e){return-t},edge:Qr,positions:a(ii,ni,ei)},ltr:ai},ui={ltr:si.ltr,rtl:si.rtl};function li(t){var e=function(e){return t(e).isRtl()?ui.rtl:ui.ltr};return{delta:function(t,n){return e(n).delta(t,n)},edge:function(t){return e(t).edge(t)},positions:function(t,n){return e(n).positions(t,n)}}}var ci,fi=function(t){var e=De(t);return Me.generate(e).grid()},di=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return di(n())}}},hi=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return X("required",e),J(e),function(r){var i=z(r);I(e,function(t){return k(i,t)})||Y(e,i),t(e,i);var o=E(e,function(t){return!n.validate(r[t],t)});return o.length>0&&function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+q(t).join(", ")+") were not.")}(o,n.label),r}},mi=function(t,e){var n=E(e,function(e){return!k(t,e)});n.length>0&&$(n)},gi=function(t){return function(t,e){return hi(t,e,{validate:x,label:"function"})}(mi,t)},pi=function(t){var e=ce(t,"colspan")?parseInt(le(t,"colspan"),10):1,n=ce(t,"rowspan")?parseInt(le(t,"rowspan"),10):1;return{element:i(t),colspan:i(e),rowspan:i(n)}},vi=gi(["cell","row","replace","gap"]),bi=function(t,e){vi(t);var n=di(p.none()),r=void 0!==e?e:pi,i=function(e){return function(e){return t.cell(e)}(r(e))},o=function(t){var e=i(t);return n.get().isNone()&&n.set(p.some(e)),a=p.some({item:t,replacement:e}),e},a=p.none();return{getOrInit:function(t,e){return a.fold(function(){return o(t)},function(n){return e(t,n.item)?n.replacement:o(t)})},cursor:n.get}},yi=function(t,e){return function(n){var r=di(p.none());vi(n);var i=[],o=function(o){var a=n.replace(o,e,{scope:t});return i.push({item:o,sub:a}),r.get().isNone()&&r.set(p.some(a)),a};return{replaceOrInit:function(t,e){return function(t,e){return O(i,function(n){return e(n.item,t)})}(t,e).fold(function(){return o(t)},function(n){return e(t,n.item)?n.sub:o(t)})},cursor:r.get}}},wi=function(t){vi(t);var e=di(p.none());return{combine:function(n){return e.get().isNone()&&e.set(p.some(n)),function(){var e=t.cell({element:i(n),colspan:i(1),rowspan:i(1)});return Ue(e,"width"),Ue(n,"width"),e}},cursor:e.get}},xi=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ci=function(t,e){var n=t.property().name(e);return k(xi,n)},Ri=function(t,e){return k(["br","img","hr","input"],t.property().name(e))},ki=Ci,_i=function(t,e){var n=t.property().name(e);return k(["ol","ul"],n)},Si=Ri,Ti=_n(),Ei=function(t){return ki(Ti,t)},Ni=function(t){return _i(Ti,t)},Di=function(t){return Si(Ti,t)},Oi=function(t){var e,n=function(t){return"br"===Qt(t)},r=function(t){return pn(t).bind(function(e){var r=Xt(e).map(function(t){return!!Ei(t)||(Di(t)?"img"!==Qt(t):void 0)}).getOr(!1);return qt(e).map(function(i){return!0===r||"li"===Qt(o=i)||xe(o,Ni).isSome()||n(e)||Ei(i)&&!Ft(t,i)?[]:[ot.fromTag("br")];var o})}).getOr([])},i=0===(e=B(t,function(t){var e=Jt(t);return function(t){return I(t,function(t){return n(t)||ie(t)&&0===ln(t).trim().length})}(e)?[]:e.concat(r(t))})).length?[ot.fromTag("br")]:e;Ke(t[0]),Je(t[0],i)},Ai=Object.prototype.hasOwnProperty,Pi=(ci=function(t,e){return e},function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<t.length;r++){var i=t[r];for(var o in i)Ai.call(i,o)&&(n[o]=ci(n[o],i[o]))}return n}),Mi=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},Hi=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return p.none()},Bi=function(t,e){return rt.rowcells(e,t.section())},Ii=function(t,e){return t.cells()[e]},Wi={addCell:function(t,e,n){var r=t.cells(),i=r.slice(0,e),o=r.slice(e),a=i.concat([n]).concat(o);return Bi(t,a)},setCells:Bi,mutateCell:function(t,e,n){t.cells()[e]=n},getCell:Ii,getCellElement:function(t,e){return Ii(t,e).element()},mapCells:function(t,e){var n=t.cells(),r=S(n,e);return rt.rowcells(r,t.section())},cellLength:function(t){return t.cells().length}},Li=function(t,e){if(0===t.length)return 0;var n=t[0];return A(t,function(t){return!e(n.element(),t.element())}).fold(function(){return t.length},function(t){return t})},zi=function(t,e,n,r){var o=function(t,e){return t[e]}(t,e).cells().slice(n),a=Li(o,r),s=function(t,e){return S(t,function(t){return Wi.getCell(t,e)})}(t,n).slice(e),u=Li(s,r);return{colspan:i(a),rowspan:i(u)}},Fi=function(t,e){var n=S(t,function(t,e){return S(t.cells(),function(t,e){return!1})});return S(t,function(r,i){var o=B(r.cells(),function(r,o){if(!1===n[i][o]){var a=zi(t,i,o,e);return function(t,e,r,i){for(var o=t;o<t+r;o++)for(var a=e;a<e+i;a++)n[o][a]=!0}(i,o,a.rowspan(),a.colspan()),[rt.detailnew(r.element(),a.rowspan(),a.colspan(),r.isNew())]}return[]});return rt.rowdetails(o,r.section())})},Ui=function(t,e,n){for(var r=[],i=0;i<t.grid().rows();i++){for(var o=[],a=0;a<t.grid().columns();a++){var s=Me.getAt(t,i,a).map(function(t){return rt.elementnew(t.element(),n)}).getOrThunk(function(){return rt.elementnew(e.gap(),!0)});o.push(s)}var u=rt.rowcells(o,t.all()[i].section());r.push(u)}return r},ji=function(t,e,n,r){n===r?fe(t,e):se(t,e,n)},Vi=function(t,e){var n=[],r=[],o=function(e,i){e.length>0?function(e,i){var o=Re(t,i).getOrThunk(function(){var e=ot.fromTag(i,Vt(t).dom());return Ye(t,e),e});Ke(o);var a=S(e,function(t){t.isNew()&&n.push(t.element());var e=t.element();return Ke(e),T(t.cells(),function(t){t.isNew()&&r.push(t.element()),ji(t.element(),"colspan",t.colspan(),1),ji(t.element(),"rowspan",t.rowspan(),1),Ye(e,t.element())}),e});Je(o,a)}(e,i):function(e){Re(t,e).each(Ge)}(i)},a=[],s=[],u=[];return T(e,function(t){switch(t.section()){case"thead":a.push(t);break;case"tbody":s.push(t);break;case"tfoot":u.push(t)}}),o(a,"thead"),o(s,"tbody"),o(u,"tfoot"),{newRows:i(n),newCells:i(r)}},qi=function(t){return S(t,function(t){var e=on(t.element());return T(t.cells(),function(t){var n=an(t.element());ji(n,"colspan",t.colspan(),1),ji(n,"rowspan",t.rowspan(),1),Ye(e,n)}),e})},Yi=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},$i=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},Xi=function(t,e){if(e<0||e>=t.length-1)return p.none();var n=t[e].fold(function(){var n=L(t.slice(0,e));return Hi(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return p.some({value:t,delta:0})}),r=t[e+1].fold(function(){var n=t.slice(e+1);return Hi(n,function(t,e){return t.map(function(t){return{value:t,delta:e+1}})})},function(t){return p.some({value:t,delta:1})});return n.bind(function(t){return r.map(function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n})})},Ji=function(t,e,n){var r=t();return O(r,e).orThunk(function(){return p.from(r[0]).orThunk(n)}).map(function(t){return t.element()})},Ki=function(t){var e=t.grid(),n=$i(0,e.columns()),r=$i(0,e.rows());return S(n,function(e){return Ji(function(){return B(r,function(n){return Me.getAt(t,n,e).filter(function(t){return t.column()===e}).fold(i([]),function(t){return[t]})})},function(t){return 1===t.colspan()},function(){return Me.getAt(t,0,e)})})},Gi=function(t){var e=t.grid(),n=$i(0,e.rows()),r=$i(0,e.columns());return S(n,function(e){return Ji(function(){return B(r,function(n){return Me.getAt(t,e,n).filter(function(t){return t.row()===e}).fold(i([]),function(t){return[t]})})},function(t){return 1===t.rowspan()},function(){return Me.getAt(t,e,0)})})},Zi=function(t,e,n,r,i){var o=ot.fromTag("div");return We(o,{position:"absolute",left:e-r/2+"px",top:n+"px",height:i+"px",width:r+"px"}),ue(o,{"data-column":t,role:"presentation"}),o},Qi=function(t,e,n,r,i){var o=ot.fromTag("div");return We(o,{position:"absolute",left:e+"px",top:n-i/2+"px",height:i+"px",width:r+"px"}),ue(o,{"data-row":t,role:"presentation"}),o},to=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},eo={resolve:to("ephox-snooker").resolve},no=function(t,e){var n=le(t,e);return void 0===n||""===n?[]:n.split(" ")},ro=function(t){return void 0!==t.dom().classList},io=function(t,e){return function(t,e,n){var r=no(t,e).concat([n]);return se(t,e,r.join(" ")),!0}(t,"class",e)},oo=function(t,e){return function(t,e,n){var r=E(no(t,e),function(t){return t!==n});return r.length>0?se(t,e,r.join(" ")):fe(t,e),!1}(t,"class",e)},ao=function(t,e){ro(t)?t.dom().classList.add(e):io(t,e)},so=function(t){0===(ro(t)?t.dom().classList:function(t){return no(t,"class")}(t)).length&&fe(t,"class")},uo=function(t,e){return ro(t)&&t.dom().classList.contains(e)},lo=eo.resolve("resizer-bar"),co=eo.resolve("resizer-rows"),fo=eo.resolve("resizer-cols"),ho=function(t){var e=ye(t.parent(),"."+lo);T(e,Ge)},mo=function(t,e,n){var r=t.origin();T(e,function(e,i){e.each(function(e){var i=n(r,e);ao(i,lo),Ye(t.parent(),i)})})},go=function(t,e,n,r,i,o){var a=Jr(e);!function(t,e,n,r){mo(t,e,function(t,e){var i=Qi(e.row(),n.left()-t.left(),e.y()-t.top(),r,7);return ao(i,co),i})}(t,n.length>0?i.positions(n,e):[],a,Or(e)),function(t,e,n,r){mo(t,e,function(t,e){var i=Zi(e.col(),e.x()-t.left(),n.top()-t.top(),7,r);return ao(i,fo),i})}(t,r.length>0?o.positions(r,e):[],a,Er(e))},po=function(t,e){var n=ye(t.parent(),"."+lo);T(n,e)},vo={refresh:function(t,e,n,r){ho(t);var i=De(e),o=Me.generate(i),a=Gi(o),s=Ki(o);go(t,e,a,s,n,r)},hide:function(t){po(t,function(t){Ie(t,"display","none")})},show:function(t){po(t,function(t){Ie(t,"display","block")})},destroy:ho,isRowBar:function(t){return uo(t,co)},isColBar:function(t){return uo(t,fo)}},bo=function(t,e){return S(t,function(t){var n=function(t){return Hi(t,function(t){return qt(t.element()).map(function(t){var e=qt(t).isNone();return rt.elementnew(t,e)})}).getOrThunk(function(){return rt.elementnew(e.row(),!0)})}(t.details());return rt.rowdatanew(n.element(),t.details(),t.section(),n.isNew())})},yo=function(t,e){var n=Fi(t,Ft);return bo(n,e)},wo=function(t,e){var n=H(S(t.all(),function(t){return t.cells()}));return O(n,function(t){return Ft(e,t.element())})},xo=function(t,e,n,r,o){return function(a,s,u,l,c){var f=De(s),d=Me.generate(f);return e(d,u).map(function(e){var n=function(t,e){return Ui(t,e,!1)}(d,l),r=t(n,e,Ft,o(l)),a=yo(r.grid(),l);return{grid:i(a),cursor:r.cursor}}).fold(function(){return p.none()},function(t){var e=Vi(s,t.grid());return n(s,t.grid(),c),r(s),vo.refresh(a,s,si.height,c),p.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})})}},Co=yo,Ro=function(t,e){return Ne.cell(e.element()).bind(function(e){return wo(t,e)})},ko=function(t,e){var n=S(e.selection(),function(e){return Ne.cell(e).bind(function(e){return wo(t,e)})}),r=Mi(n);return r.length>0?p.some(r):p.none()},_o=function(t,e){return Ne.cell(e.element()).bind(function(n){return wo(t,n).map(function(t){return Pi(t,{generators:e.generators,clipboard:e.clipboard})})})},So=function(t,e){var n=S(e.selection(),function(e){return Ne.cell(e).bind(function(e){return wo(t,e)})}),r=Mi(n);return r.length>0?p.some(Pi({cells:r},{generators:e.generators,clipboard:e.clipboard})):p.none()},To=function(t,e){return e.mergable()},Eo=function(t,e){return e.unmergable()},No=function(t){return{is:function(e){return t===e},isValue:c,isError:l,getOr:i(t),getOrThunk:i(t),getOrDie:i(t),or:function(e){return No(t)},orThunk:function(e){return No(t)},fold:function(e,n){return n(t)},map:function(e){return No(e(t))},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return p.some(t)}}},Do=function(t){return{is:l,isValue:l,isError:c,getOr:o,getOrThunk:function(t){return t()},getOrDie:function(){return(e=String(t),function(){throw new Error(e)})();var e},or:function(t){return t},orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return Do(t)},each:n,bind:function(e){return Do(t)},exists:l,forall:c,toOption:p.none}},Oo={value:No,error:Do},Ao=function(t,e){return S(t,function(){return rt.elementnew(e.cell(),!0)})},Po=function(t,e,n){return t.concat(Yi(e,function(e){return Wi.setCells(t[t.length-1],Ao(t[t.length-1].cells(),n))}))},Mo=function(t,e,n){return S(t,function(t){return Wi.setCells(t,t.cells().concat(Ao($i(0,e),n)))})},Ho=function(t,e,n){if(t.row()>=e.length||t.column()>Wi.cellLength(e[0]))return Oo.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),o=r[0].cells().slice(t.column()),a=Wi.cellLength(n[0]),s=n.length;return Oo.value({rowDelta:i(r.length-s),colDelta:i(o.length-a)})},Bo=function(t,e){var n=Wi.cellLength(t[0]),r=Wi.cellLength(e[0]);return{rowDelta:i(0),colDelta:i(n-r)}},Io=function(t,e,n){var r=e.colDelta()<0?Mo:o;return(e.rowDelta()<0?Po:o)(r(t,Math.abs(e.colDelta()),n),Math.abs(e.rowDelta()),n)},Wo=function(t,e,n,r){if(0===t.length)return t;for(var i=e.startRow();i<=e.finishRow();i++)for(var o=e.startCol();o<=e.finishCol();o++)Wi.mutateCell(t[i],o,rt.elementnew(r(),!1));return t},Lo=function(t,e,n,r){for(var i=!0,o=0;o<t.length;o++)for(var a=0;a<Wi.cellLength(t[0]);a++){var s=n(Wi.getCellElement(t[o],a),e);!0===s&&!1===i?Wi.mutateCell(t[o],a,rt.elementnew(r(),!0)):!0===s&&(i=!1)}return t},zo=function(t,e,n,r){if(e>0&&e<t.length){var i=function(t,e){return D(t,function(t,n){return _(t,function(t){return e(t.element(),n.element())})?t:t.concat([n])},[])}(t[e-1].cells(),n);T(i,function(i){for(var o=p.none(),a=e;a<t.length;a++)for(var s=0;s<Wi.cellLength(t[0]);s++){var u=t[a].cells()[s];n(u.element(),i.element())&&(o.isNone()&&(o=p.some(r())),o.each(function(e){Wi.mutateCell(t[a],s,rt.elementnew(e,!0))}))}})}return t},Fo=function(t,e,n,r){var i=Wi.getCell(t[e],n),o=a(r,i.element()),s=t[e];return t.length>1&&Wi.cellLength(s)>1&&(n>0&&o(Wi.getCellElement(s,n-1))||n<s.length-1&&o(Wi.getCellElement(s,n+1))||e>0&&o(Wi.getCellElement(t[e-1],n))||e<t.length-1&&o(Wi.getCellElement(t[e+1],n)))},Uo=function(t,e,n,r,i){return Ho(t,e,n).map(function(o){var a=Io(e,o,r);return function(t,e,n,r,i){for(var o=t.row(),a=t.column(),s=o+n.length,u=a+Wi.cellLength(n[0]),l=o;l<s;l++)for(var c=a;c<u;c++){Fo(e,l,c,i)&&Lo(e,Wi.getCellElement(e[l],c),i,r.cell);var f=Wi.getCellElement(n[l-o],c-a),d=r.replace(f);Wi.mutateCell(e[l],c,rt.elementnew(d,!0))}return e}(t,a,n,r,i)})},jo=function(t,e,n,r,i){zo(e,t,i,r.cell);var o=Bo(n,e),a=Io(n,o,r),s=Bo(e,a),u=Io(e,s,r);return u.slice(0,t).concat(a).concat(u.slice(t,u.length))},Vo=function(t,e,n,r,i){var o=t.slice(0,e),a=t.slice(e),s=Wi.mapCells(t[n],function(n,o){return e>0&&e<t.length&&r(Wi.getCellElement(t[e-1],o),Wi.getCellElement(t[e],o))?Wi.getCell(t[e],o):rt.elementnew(i(n.element(),r),!0)});return o.concat([s]).concat(a)},qo=function(t,e,n,r,i){return S(t,function(t){var o=e>0&&e<Wi.cellLength(t)&&r(Wi.getCellElement(t,e-1),Wi.getCellElement(t,e))?Wi.getCell(t,e):rt.elementnew(i(Wi.getCellElement(t,n),r),!0);return Wi.addCell(t,e,o)})},Yo=function(t,e,n,r,i){var o=n+1;return S(t,function(t,a){var s=a===e?rt.elementnew(i(Wi.getCellElement(t,n),r),!0):Wi.getCell(t,n);return Wi.addCell(t,o,s)})},$o=function(t,e,n,r,i){var o=e+1,a=t.slice(0,o),s=t.slice(o),u=Wi.mapCells(t[e],function(t,e){return e===n?rt.elementnew(i(t.element(),r),!0):t});return a.concat([u]).concat(s)},Xo=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},Jo=function(t,e,n){var r=S(t,function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return rt.rowcells(r,t.section())});return E(r,function(t){return t.cells().length>0})},Ko=function(t,e,n,r){return S(t,function(t){return Wi.mapCells(t,function(t){return function(t){return _(e,function(e){return n(t.element(),e.element())})}(t)?rt.elementnew(r(t.element(),n),!0):t})})},Go=function(t,e,n,r){return void 0!==Wi.getCellElement(t[e],n)&&e>0&&r(Wi.getCellElement(t[e-1],n),Wi.getCellElement(t[e],n))},Zo=function(t,e,n){return e>0&&n(Wi.getCellElement(t,e-1),Wi.getCellElement(t,e))},Qo=function(t,e,n,r){var i=B(t,function(r,i){return Go(t,i,e,n)||Zo(r,e,n)?[]:[Wi.getCell(r,e)]});return Ko(t,i,n,r)},ta=function(t,e,n,r){var i=t[e],o=B(i.cells(),function(r,o){return Go(t,e,o,n)||Zo(i,o,n)?[]:[r]});return Ko(t,o,n,r)},ea=function(t){return{fold:t}},na=function(){return ea(function(t,e,n,r,i){return t()})},ra=function(t){return ea(function(e,n,r,i,o){return n(t)})},ia=function(t,e){return ea(function(n,r,i,o,a){return i(t,e)})},oa=function(t,e,n){return ea(function(r,i,o,a,s){return a(t,e,n)})},aa=function(t,e){return ea(function(n,r,i,o,a){return a(t,e)})},sa=function(t,e,n,r){var o=t.slice(0),a=function(t,e){return 0===t.length?na():1===t.length?ra(0):0===e?ia(0,1):e===t.length-1?aa(e-1,e):e>0&&e<t.length-1?oa(e-1,e,e+1):na()}(t,e),s=function(t){return S(t,i(0))},u=i(s(o)),l=function(t,e){if(n>=0){var i=Math.max(r.minCellWidth(),o[e]-n);return s(o.slice(0,t)).concat([n,i-o[e]]).concat(s(o.slice(e+1)))}var a=Math.max(r.minCellWidth(),o[t]+n),u=o[t]-a;return s(o.slice(0,t)).concat([a-o[t],u]).concat(s(o.slice(e+1)))},c=l;return a.fold(u,function(t){return r.singleColumnWidth(o[t],n)},c,function(t,e,n){return l(e,n)},function(t,e){if(n>=0)return s(o.slice(0,e)).concat([n]);var i=Math.max(r.minCellWidth(),o[e]+n);return s(o.slice(0,e)).concat([i-o[e]])})},ua=function(t,e){return ce(t,e)&&parseInt(le(t,e),10)>1},la={hasColspan:function(t){return ua(t,"colspan")},hasRowspan:function(t){return ua(t,"rowspan")},minWidth:i(10),minHeight:i(10),getInt:function(t,e){return parseInt(Le(t,e),10)}},ca=function(t,e,n){return Fe(t,e).fold(function(){return n(t)+"px"},function(t){return t})},fa=function(t){return ca(t,"width",Vr.getPixelWidth)},da=function(t){return ca(t,"height",Vr.getHeight)},ha=function(t,e,n,r,i){var o=Ki(t),a=S(o,function(t){return t.map(e.edge)});return S(o,function(t,e){return t.filter(s(la.hasColspan)).fold(function(){var t=Xi(a,e);return r(t)},function(t){return n(t,i)})})},ma=function(t){return t.map(function(t){return t+"px"}).getOr("")},ga=function(t,e,n,r){var i=Gi(t),o=S(i,function(t){return t.map(e.edge)});return S(i,function(t,e){return t.filter(s(la.hasRowspan)).fold(function(){var t=Xi(o,e);return r(t)},function(t){return n(t)})})},pa={getRawWidths:function(t,e){return ha(t,e,fa,ma)},getPixelWidths:function(t,e,n){return ha(t,e,Vr.getPixelWidth,function(t){return t.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(t,e,n){return ha(t,e,Vr.getPercentageWidth,function(t){return t.fold(function(){return n.minCellWidth()},function(t){return t/n.pixelWidth()*100})},n)},getPixelHeights:function(t,e){return ga(t,e,Vr.getHeight,function(t){return t.getOrThunk(la.minHeight)})},getRawHeights:function(t,e){return ga(t,e,da,ma)}},va=function(t,e,n){for(var r=0,i=t;i<e;i++)r+=void 0!==n[i]?n[i]:0;return r},ba=function(t,e){var n=Me.justCells(t);return S(n,function(t){var n=va(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:i(n),colspan:t.colspan}})},ya=function(t,e){var n=Me.justCells(t);return S(n,function(t){var n=va(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:i(n),rowspan:t.rowspan}})},wa=function(t,e){return S(t.all(),function(t,n){return{element:t.element,height:i(e[n])}})},xa=function(t){var e=parseInt(t,10),n=o;return{width:i(e),pixelWidth:i(e),getWidths:pa.getPixelWidths,getCellDelta:n,singleColumnWidth:function(t,e){return[Math.max(la.minWidth(),t+e)-t]},minCellWidth:la.minWidth,setElementWidth:Vr.setPixelWidth,setTableWidth:function(t,e,n){var r=N(e,function(t,e){return t+e},0);Vr.setPixelWidth(t,r)}}},Ca=function(t,e){if(Vr.percentageBasedSizeRegex().test(e))return function(t,e){var n=parseFloat(t),r=Dr(e);return{width:i(n),pixelWidth:i(r),getWidths:pa.getPercentageWidths,getCellDelta:function(t){return t/r*100},singleColumnWidth:function(t,e){return[100-t]},minCellWidth:function(){return la.minWidth()/r*100},setElementWidth:Vr.setPercentageWidth,setTableWidth:function(t,e,r){var i=n+r;Vr.setPercentageWidth(t,i)}}}(Vr.percentageBasedSizeRegex().exec(e)[1],t);if(Vr.pixelBasedSizeRegex().test(e)){var n=Vr.pixelBasedSizeRegex().exec(e);return xa(n[1])}var r=Dr(t);return xa(r)},Ra=function(t){return Vr.getRawWidth(t).fold(function(){var e=Dr(t);return xa(e)},function(e){return Ca(t,e)})},ka=function(t){return Me.generate(t)},_a=function(t){var e=De(t);return ka(e)},Sa={adjustWidth:function(t,e,n,r){var i=Ra(t),o=i.getCellDelta(e),a=_a(t),s=i.getWidths(a,r,i),u=sa(s,n,o,i),l=S(u,function(t,e){return t+s[e]}),c=ba(a,l);T(c,function(t){i.setElementWidth(t.element(),t.width())}),n===a.grid().columns()-1&&i.setTableWidth(t,l,o)},adjustHeight:function(t,e,n,r){var i=_a(t),o=pa.getPixelHeights(i,r),a=S(o,function(t,r){return n===r?Math.max(e+t,la.minHeight()):t}),s=ya(i,a),u=wa(i,a);T(u,function(t){Vr.setHeight(t.element(),t.height())}),T(s,function(t){Vr.setHeight(t.element(),t.height())});var l=N(a,function(t,e){return t+e},0);Vr.setHeight(t,l)},adjustWidthTo:function(t,e,n){var r=Ra(t),i=ka(e),o=r.getWidths(i,n,r),a=ba(i,o);T(a,function(t){r.setElementWidth(t.element(),t.width())});var s=N(o,function(t,e){return e+t},0);a.length>0&&r.setElementWidth(t,s)}},Ta=function(t){0===Ne.cells(t).length&&Ge(t)},Ea=V("grid","cursor"),Na=function(t,e,n){return Da(t,e,n).orThunk(function(){return Da(t,0,0)})},Da=function(t,e,n){return p.from(t[e]).bind(function(t){return p.from(t.cells()[n]).bind(function(t){return p.from(t.element())})})},Oa=function(t,e,n){return Ea(t,Da(t,e,n))},Aa=function(t){return D(t,function(t,e){return _(t,function(t){return t.row()===e.row()})?t:t.concat([e])},[]).sort(function(t,e){return t.row()-e.row()})},Pa=function(t){return D(t,function(t,e){return _(t,function(t){return t.column()===e.column()})?t:t.concat([e])},[]).sort(function(t,e){return t.column()-e.column()})},Ma=function(t,e,n){var r=Oe(t,n),i=Me.generate(r);return Ui(i,e,!0)},Ha=Sa.adjustWidthTo,Ba={insertRowBefore:xo(function(t,e,n,r){var i=e.row(),o=e.row(),a=Vo(t,o,i,n,r.getOrInit);return Oa(a,o,e.column())},Ro,n,n,bi),insertRowsBefore:xo(function(t,e,n,r){var i=e[0].row(),o=e[0].row(),a=Aa(e),s=D(a,function(t,e){return Vo(t,o,i,n,r.getOrInit)},t);return Oa(s,o,e[0].column())},ko,n,n,bi),insertRowAfter:xo(function(t,e,n,r){var i=e.row(),o=e.row()+e.rowspan(),a=Vo(t,o,i,n,r.getOrInit);return Oa(a,o,e.column())},Ro,n,n,bi),insertRowsAfter:xo(function(t,e,n,r){var i=Aa(e),o=i[i.length-1].row(),a=i[i.length-1].row()+i[i.length-1].rowspan(),s=D(i,function(t,e){return Vo(t,a,o,n,r.getOrInit)},t);return Oa(s,a,e[0].column())},ko,n,n,bi),insertColumnBefore:xo(function(t,e,n,r){var i=e.column(),o=e.column(),a=qo(t,o,i,n,r.getOrInit);return Oa(a,e.row(),o)},Ro,Ha,n,bi),insertColumnsBefore:xo(function(t,e,n,r){var i=Pa(e),o=i[0].column(),a=i[0].column(),s=D(i,function(t,e){return qo(t,a,o,n,r.getOrInit)},t);return Oa(s,e[0].row(),a)},ko,Ha,n,bi),insertColumnAfter:xo(function(t,e,n,r){var i=e.column(),o=e.column()+e.colspan(),a=qo(t,o,i,n,r.getOrInit);return Oa(a,e.row(),o)},Ro,Ha,n,bi),insertColumnsAfter:xo(function(t,e,n,r){var i=e[e.length-1].column(),o=e[e.length-1].column()+e[e.length-1].colspan(),a=Pa(e),s=D(a,function(t,e){return qo(t,o,i,n,r.getOrInit)},t);return Oa(s,e[0].row(),o)},ko,Ha,n,bi),splitCellIntoColumns:xo(function(t,e,n,r){var i=Yo(t,e.row(),e.column(),n,r.getOrInit);return Oa(i,e.row(),e.column())},Ro,n,n,bi),splitCellIntoRows:xo(function(t,e,n,r){var i=$o(t,e.row(),e.column(),n,r.getOrInit);return Oa(i,e.row(),e.column())},Ro,n,n,bi),eraseColumns:xo(function(t,e,n,r){var i=Pa(e),o=Jo(t,i[0].column(),i[i.length-1].column()),a=Na(o,e[0].row(),e[0].column());return Ea(o,a)},ko,Ha,Ta,bi),eraseRows:xo(function(t,e,n,r){var i=Aa(e),o=Xo(t,i[0].row(),i[i.length-1].row()),a=Na(o,e[0].row(),e[0].column());return Ea(o,a)},ko,n,Ta,bi),makeColumnHeader:xo(function(t,e,n,r){var i=Qo(t,e.column(),n,r.replaceOrInit);return Oa(i,e.row(),e.column())},Ro,n,n,yi("row","th")),unmakeColumnHeader:xo(function(t,e,n,r){var i=Qo(t,e.column(),n,r.replaceOrInit);return Oa(i,e.row(),e.column())},Ro,n,n,yi(null,"td")),makeRowHeader:xo(function(t,e,n,r){var i=ta(t,e.row(),n,r.replaceOrInit);return Oa(i,e.row(),e.column())},Ro,n,n,yi("col","th")),unmakeRowHeader:xo(function(t,e,n,r){var i=ta(t,e.row(),n,r.replaceOrInit);return Oa(i,e.row(),e.column())},Ro,n,n,yi(null,"td")),mergeCells:xo(function(t,e,n,r){var o=e.cells();Oi(o);var a=Wo(t,e.bounds(),n,i(o[0]));return Ea(a,p.from(o[0]))},To,n,n,wi),unmergeCells:xo(function(t,e,n,r){var i=N(e,function(t,e){return Lo(t,e,n,r.combine(e))},t);return Ea(i,p.from(e[0]))},Eo,n,n,wi),pasteCells:xo(function(t,e,n,r){var i,o,a,s,u=(i=e.clipboard(),o=e.generators(),a=De(i),s=Me.generate(a),Ui(s,o,!0)),l=rt.address(e.row(),e.column());return Uo(l,t,u,e.generators(),n).fold(function(){return Ea(t,p.some(e.element()))},function(t){var n=Na(t,e.row(),e.column());return Ea(t,n)})},_o,Ha,n,bi),pasteRowsBefore:xo(function(t,e,n,r){var i=t[e.cells[0].row()],o=e.cells[0].row(),a=Ma(e.clipboard(),e.generators(),i),s=jo(o,t,a,e.generators(),n),u=Na(s,e.cells[0].row(),e.cells[0].column());return Ea(s,u)},So,n,n,bi),pasteRowsAfter:xo(function(t,e,n,r){var i=t[e.cells[0].row()],o=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),a=Ma(e.clipboard(),e.generators(),i),s=jo(o,t,a,e.generators(),n),u=Na(s,e.cells[0].row(),e.cells[0].column());return Ea(s,u)},So,n,n,bi)},Ia=function(t){return ot.fromDom(t.getBody())},Wa=function(t){return t.getBoundingClientRect().width},La=function(t){return t.getBoundingClientRect().height},za=function(t){return function(e){return Ft(e,Ia(t))}},Fa=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},Ua=function(t){var e=ye(t,"td[data-mce-style],th[data-mce-style]");fe(t,"data-mce-style"),T(e,function(t){fe(t,"data-mce-style")})},ja={isRtl:i(!1)},Va={isRtl:i(!0)},qa={directionAt:function(t){return"rtl"===function(t){return"rtl"===Le(t,"direction")?"rtl":"ltr"}(t)?Va:ja}},Ya=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],$a={"border-collapse":"collapse",width:"100%"},Xa={border:"1"},Ja=function(t){return t.getParam("table_default_styles",$a,"object")},Ka=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},Ga=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Za=function(t){return t.getParam("table_row_advtab",!0,"boolean")},Qa=function(t){return t.getParam("table_advtab",!0,"boolean")},ts=function(t){return t.getParam("table_style_by_css",!1,"boolean")},es=function(t){return t.getParam("table_cell_class_list",[],"array")},ns=function(t){return t.getParam("table_row_class_list",[],"array")},rs=function(t){return t.getParam("table_class_list",[],"array")},is=function(t){return!1===t.getParam("table_responsive_width")},os=function(t,e){return t.fire("newrow",{node:e})},as=function(t,e){return t.fire("newcell",{node:e})},ss=function(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})},us=function(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})},ls=function(t,e){var r=function(t){return"table"===Qt(Ia(t))},i=function(t){var e=t.getParam("table_clone_elements");return b(e)?p.some(e.split(/[ ,]/)):Array.isArray(e)?p.some(e):p.none()}(t),o=function(e,n,r,o){return function(a,s){Ua(a);var u=o(),l=ot.fromDom(t.getDoc()),c=li(qa.directionAt),f=Cn(r,l,i);return n(a)?e(u,a,s,f,c).bind(function(e){return T(e.newRows(),function(e){os(t,e.dom())}),T(e.newCells(),function(e){as(t,e.dom())}),e.cursor().map(function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n})}):p.none()}};return{deleteRow:o(Ba.eraseRows,function(e){var n=fi(e);return!1===r(t)||n.rows()>1},n,e),deleteColumn:o(Ba.eraseColumns,function(e){var n=fi(e);return!1===r(t)||n.columns()>1},n,e),insertRowsBefore:o(Ba.insertRowsBefore,c,n,e),insertRowsAfter:o(Ba.insertRowsAfter,c,n,e),insertColumnsBefore:o(Ba.insertColumnsBefore,c,qr,e),insertColumnsAfter:o(Ba.insertColumnsAfter,c,qr,e),mergeCells:o(Ba.mergeCells,c,n,e),unmergeCells:o(Ba.unmergeCells,c,n,e),pasteRowsBefore:o(Ba.pasteRowsBefore,c,n,e),pasteRowsAfter:o(Ba.pasteRowsAfter,c,n,e),pasteCells:o(Ba.pasteCells,c,n,e)}},cs=function(t,e,n){var r=De(t),i=Me.generate(r);return ko(i,e).map(function(t){var e=Ui(i,n,!1).slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),r=Co(e,n);return qi(r)})},fs=tinymce.util.Tools.resolve("tinymce.util.Tools"),ds={applyAlign:function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},applyVAlign:function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},unApplyAlign:function(t,e){fs.each("left center right".split(" "),function(n){t.formatter.remove("align"+n,{},e)})},unApplyVAlign:function(t,e){fs.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},e)})},getTDTHOverallStyle:function(t,e,n){var r;return r=function(e,r){for(var i=0;i<r.length;i++){var o=t.getStyle(r[i],n);if(void 0===e&&(e=o),e!==o)return""}return e}(r,t.select("td,th",e))}},hs=function(t,e){var n=t.dom,r=e.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);o["border-style"]=i.borderStyle,o["border-color"]=i.borderColor,o["background-color"]=i.backgroundColor,o.width=i.width?Fa(i.width):"",o.height=i.height?Fa(i.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))},ms=function(t,e){var n=t.dom,r=e.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);r.find("#borderStyle").value(o["border-style"]||""),r.find("#borderColor").value(o["border-color"]||""),r.find("#backgroundColor").value(o["background-color"]||""),r.find("#width").value(o.width||""),r.find("#height").value(o.height||"")},gs={createStyleForm:function(t){var e=function(){var e=function(t){return t.getParam("color_picker_callback")}(t);if(e)return function(n){return e.call(t,function(t){n.control.value(t).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:a(hs,t)},items:[{label:"Style",name:"style",type:"textbox",onchange:a(ms,t)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:a(hs,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},buildListItems:function(t,e,n){var r=function(t,n){return n=n||[],fs.each(t,function(t){var i={text:t.text||t.title};t.menu?i.menu=r(t.menu):(i.value=t.value,e&&e(i)),n.push(i)}),n};return r(t,n||[])},updateStyleField:hs,extractAdvancedStyles:function(t,e){var n=t.parseStyle(t.getAttrib(e,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=t.serializeStyle(n),r},updateAdvancedFields:ms,syncAdvancedStyleFields:function(t,e){e.control.rootControl.find("#style")[0].getEl().isEqualNode(document.activeElement)?ms(t,e):hs(t,e)}},ps=function(t,e,n){var r,i=t.dom;function o(t,n,r){(1===e.length||r)&&i.setAttrib(t,n,r)}function a(t,n,r){(1===e.length||r)&&i.setStyle(t,n,r)}Ga(t)&&gs.syncAdvancedStyleFields(t,n),r=n.control.rootControl.toJSON(),t.undoManager.transact(function(){fs.each(e,function(n){var s,u;o(n,"scope",r.scope),1===e.length?o(n,"style",r.style):(s=n,u=r.style,delete s.dataset.mceStyle,s.style.cssText+=";"+u),o(n,"class",r.class),a(n,"width",Fa(r.width)),a(n,"height",Fa(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=i.rename(n,r.type)),1===e.length&&(ds.unApplyAlign(t,n),ds.unApplyVAlign(t,n)),r.align&&ds.applyAlign(t,n,r.align),r.valign&&ds.applyVAlign(t,n,r.valign)}),t.focus()})},vs=function(t){var e,n,r,i=[];if(i=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!i.length&&e&&i.push(e),e=e||i[0]){n=i.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:e.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),type:e.nodeName.toLowerCase(),style:"",align:"",valign:""};return fs.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),fs.each("top middle bottom".split(" "),function(n){t.formatter.matchNode(e,"valign"+n)&&(r.valign=n)}),Ga(t)&&fs.extend(r,gs.extractAdvancedStyles(n,e)),r}(t,e),es(t).length>0&&(r={name:"class",type:"listbox",label:"Class",values:gs.buildListItems(es(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})})});var o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:a(gs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(gs.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Ga(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:o},gs.createStyleForm(t)],onsubmit:a(ps,t,i)}):t.windowManager.open({title:"Cell properties",data:n,body:o,onsubmit:a(ps,t,i)})}},bs=function(t,e,n){var r=t.getParent(e,"table"),i=e.parentNode,o=t.select(n,r)[0];o||(o=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(o,r.firstChild):r.insertBefore(o,r.firstChild):r.appendChild(o)),o.appendChild(e),i.hasChildNodes()||t.remove(i)};function ys(t,e,n,r){var i=t.dom;function o(t,n,r){(1===e.length||r)&&i.setAttrib(t,n,r)}Za(t)&&gs.syncAdvancedStyleFields(t,r);var a=r.control.rootControl.toJSON();t.undoManager.transact(function(){fs.each(e,function(r){var s,u,l;o(r,"scope",a.scope),o(r,"style",a.style),o(r,"class",a.class),s=r,u="height",l=Fa(a.height),(1===e.length||l)&&i.setStyle(s,u,l),a.type!==r.parentNode.nodeName.toLowerCase()&&bs(t.dom,r,a.type),a.align!==n.align&&(ds.unApplyAlign(t,r),ds.applyAlign(t,r,a.align))}),t.focus()})}var ws=function(t){var e,n,r,i,o,s,u=t.dom,l=[];e=u.getParent(t.selection.getStart(),"table"),n=u.getParent(t.selection.getStart(),"td,th"),fs.each(e.rows,function(t){fs.each(t.cells,function(e){if(u.getAttrib(e,"data-mce-selected")||e===n)return l.push(t),!1})}),(r=l[0])&&(o=l.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(t,e){var n=t.dom,r={height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),align:"",style:"",type:e.parentNode.nodeName.toLowerCase()};return fs.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),Za(t)&&fs.extend(r,gs.extractAdvancedStyles(n,e)),r}(t,r),ns(t).length>0&&(i={name:"class",type:"listbox",label:"Class",values:gs.buildListItems(ns(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})})}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},Za(t)?t.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},gs.createStyleForm(t)],onsubmit:a(ys,t,l,o)}):t.windowManager.open({title:"Row properties",data:o,body:s,onsubmit:a(ys,t,l,o)}))},xs=tinymce.util.Tools.resolve("tinymce.Env"),Cs={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Rs=function(t,e,n,r,i){void 0===i&&(i=Cs);var o=ot.fromTag("table");We(o,i.styles),ue(o,i.attributes);var a=ot.fromTag("tbody");Ye(o,a);for(var s=[],u=0;u<t;u++){for(var l=ot.fromTag("tr"),c=0;c<e;c++){var f=u<n||c<r?ot.fromTag("th"):ot.fromTag("td");c<r&&se(f,"scope","row"),u<n&&se(f,"scope","col"),Ye(f,ot.fromTag("br")),i.percentages&&Ie(f,"width",100/e+"%"),Ye(l,f)}s.push(l)}return Je(a,s),o},ks=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},_s=function(t,e,n){var r,i=Ja(t),o={styles:i,attributes:function(t){return t.getParam("table_default_attributes",Xa,"object")}(t),percentages:(r=i.width,b(r)&&-1!==r.indexOf("%")&&!is(t))},s=Rs(n,e,0,0,o);se(s,"data-mce-id","__mce");var u,l,c,f=(u=s,l=ot.fromTag("div"),c=ot.fromDom(u.dom().cloneNode(!0)),Ye(l,c),function(t){return t.dom().innerHTML}(l));return t.insertContent(f),ke(Ia(t),'table[data-mce-id="__mce"]').map(function(e){return is(t)&&Ie(e,"width",Le(e,"width")),fe(e,"data-mce-id"),function(t,e){T(ye(e,"tr"),function(e){os(t,e.dom()),T(ye(e,"th,td"),function(e){as(t,e.dom())})})}(t,e),function(t,e){ke(e,"td,th").each(a(ks,t))}(t,e),e.dom()}).getOr(null)};function Ss(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)t.setStyle(e,n,r);else if(e.children)for(var i=0;i<e.children.length;i++)Ss(t,e.children[i],n,r)}var Ts=function(t,e,n){var r,i,o=t.dom;Qa(t)&&gs.syncAdvancedStyleFields(t,n),!1===(i=n.control.rootControl.toJSON()).class&&delete i.class,t.undoManager.transact(function(){e||(e=_s(t,i.cols||1,i.rows||1)),function(t,e,n){var r,i=t.dom,o={},a={};if(o.class=n.class,a.height=Fa(n.height),i.getAttrib(e,"width")&&!ts(t)?o.width=(r=n.width)?r.replace(/px$/,""):"":a.width=Fa(n.width),ts(t)?(a["border-width"]=Fa(n.border),a["border-spacing"]=Fa(n.cellspacing),fs.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):fs.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),ts(t)&&e.children)for(var s=0;s<e.children.length;s++)Ss(i,e.children[s],{"border-width":Fa(n.border),"border-color":n.borderColor,padding:Fa(n.cellpadding)});n.style?fs.extend(a,i.parseStyle(n.style)):a=fs.extend({},i.parseStyle(i.getAttrib(e,"style")),a),o.style=i.serializeStyle(a),i.setAttribs(e,o)}(t,e,i),(r=o.select("caption",e)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=xs.ie?" ":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),ds.unApplyAlign(t,e),i.align&&ds.applyAlign(t,e,i.align),t.focus(),t.addVisual()})},Es=function(t,e){var n,r,i,o,s,u=t.dom,l={};!0===e?(n=u.getParent(t.selection.getStart(),"table"))&&(l=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),cellspacing:n.getStyle(e,"border-spacing")||n.getAttrib(e,"cellspacing"),cellpadding:n.getAttrib(e,"data-mce-cell-padding")||n.getAttrib(e,"cellpadding")||ds.getTDTHOverallStyle(t.dom,e,"padding"),border:n.getAttrib(e,"data-mce-border")||n.getAttrib(e,"border")||ds.getTDTHOverallStyle(t.dom,e,"border"),borderColor:n.getAttrib(e,"data-mce-border-color"),caption:!!n.select("caption",e)[0],class:n.getAttrib(e,"class")};return fs.each("left center right".split(" "),function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)}),Qa(t)&&fs.extend(r,gs.extractAdvancedStyles(n,e)),r}(t,n)):(r={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),rs(t).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),o={name:"class",type:"listbox",label:"Class",values:gs.buildListItems(rs(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})})}),s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[r,i,{label:"Width",name:"width",onchange:a(gs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(gs.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,i,{label:"Width",name:"width",onchange:a(gs.updateStyleField,t)},{label:"Height",name:"height",onchange:a(gs.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},o]},Qa(t)?t.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},gs.createStyleForm(t)],onsubmit:a(Ts,t,n)}):t.windowManager.open({title:"Table properties",data:l,body:s,onsubmit:a(Ts,t,n)})},Ns=fs.each,Ds={registerCommands:function(t,e,r,i,o){var u=za(t),l=function(){return ot.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"))},c=function(t){return Ne.table(t,u)},f=function(t){return{width:Wa(t.dom()),height:Wa(t.dom())}},d=function(e){var n=l();c(n).each(function(o){var a=Rr.forMenu(i,o,n),s=f(o);e(o,a).each(function(e){!function(t,e,n){var r=f(n);e.width===r.width&&e.height===r.height||(ss(t,n.dom(),e.width,e.height),us(t,n.dom(),r.width,r.height))}(t,s,o),t.selection.setRng(e),t.focus(),r.clear(o),Ua(o)})})},h=function(e){var r=l();return c(r).bind(function(e){var o=ot.fromDom(t.getDoc()),a=Rr.forMenu(i,e,r),s=Cn(n,o,p.none());return cs(e,a,s)})},m=function(e){o.get().each(function(n){var o=S(n,function(t){return an(t)}),a=l();c(a).bind(function(n){var s=ot.fromDom(t.getDoc()),u=Rn(s),l=Rr.pasteRows(i,n,a,o,u);e(n,l).each(function(e){t.selection.setRng(e),t.focus(),r.clear(n)})})})};Ns({mceTableSplitCells:function(){d(e.unmergeCells)},mceTableMergeCells:function(){d(e.mergeCells)},mceTableInsertRowBefore:function(){d(e.insertRowsBefore)},mceTableInsertRowAfter:function(){d(e.insertRowsAfter)},mceTableInsertColBefore:function(){d(e.insertColumnsBefore)},mceTableInsertColAfter:function(){d(e.insertColumnsAfter)},mceTableDeleteCol:function(){d(e.deleteColumn)},mceTableDeleteRow:function(){d(e.deleteRow)},mceTableCutRow:function(t){o.set(h()),d(e.deleteRow)},mceTableCopyRow:function(t){o.set(h())},mceTablePasteRowBefore:function(t){m(e.pasteRowsBefore)},mceTablePasteRowAfter:function(t){m(e.pasteRowsAfter)},mceTableDelete:function(){var e=ot.fromDom(t.dom.getParent(t.selection.getStart(),"th,td"));Ne.table(e,u).filter(s(u)).each(function(e){var n=ot.fromText("");Ve(e,n),Ge(e);var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r)})}},function(e,n){t.addCommand(n,e)}),Ns({mceInsertTable:a(Es,t),mceTableProps:a(Es,t,!0),mceTableRowProps:a(ws,t),mceTableCellProps:a(vs,t)},function(e,n){t.addCommand(n,function(t,n){e(n)})})}},Os=function(t){var e=p.from(t.dom().documentElement).map(ot.fromDom).getOr(t);return{parent:i(e),view:i(t),origin:i($r(0,0))}},As=function(t,e){return{parent:i(e),view:i(t),origin:i($r(0,0))}};function Ps(t){var e=V.apply(null,t),n=[];return{bind:function(t){if(void 0===t)throw"Event bind error: undefined handler";n.push(t)},unbind:function(t){n=E(n,function(e){return e!==t})},trigger:function(){var t=e.apply(null,arguments);T(n,function(e){e(t)})}}}var Ms={create:function(t){return{registry:U(t,function(t){return{bind:t.bind,unbind:t.unbind}}),trigger:U(t,function(t){return t.trigger})}}},Hs={mode:gi(["compare","extract","mutate","sink"]),sink:gi(["element","start","stop","destroy"]),api:gi(["forceDrop","drop","move","delayDrop"])},Bs={resolve:to("ephox-dragster").resolve},Is=function(t,e){return function(n){if(t(n)){var o=ot.fromDom(n.target),a=function(){n.stopPropagation()},s=function(){n.preventDefault()},u=r(s,a),l=function(t,e,n,r,o,a,s){return{target:i(t),x:i(e),y:i(n),stop:r,prevent:o,kill:a,raw:i(s)}}(o,n.clientX,n.clientY,a,s,u,n);e(l)}}},Ws=function(t,e,n,r){return function(t,e,n,r,i){var o=Is(n,r);return t.dom().addEventListener(e,o,i),{unbind:a(Ls,t,e,o,i)}}(t,e,n,r,!1)},Ls=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},zs=i(!0),Fs=function(t,e,n){return Ws(t,e,zs,n)},Us=Hs.mode({compare:function(t,e){return $r(e.left()-t.left(),e.top()-t.top())},extract:function(t){return p.some($r(t.x(),t.y()))},sink:function(t,e){var n=function(t){var e=Pi({layerClass:Bs.resolve("blocker")},t),n=ot.fromTag("div");return se(n,"role","presentation"),We(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),ao(n,Bs.resolve("blocker")),ao(n,e.layerClass),{element:function(){return n},destroy:function(){Ge(n)}}}(e),r=Fs(n.element(),"mousedown",t.forceDrop),i=Fs(n.element(),"mouseup",t.drop),o=Fs(n.element(),"mousemove",t.move),a=Fs(n.element(),"mouseout",t.delayDrop);return Hs.sink({element:n.element,start:function(t){Ye(t,n.element())},stop:function(){Ge(n.element())},destroy:function(){n.destroy(),i.unbind(),o.unbind(),a.unbind(),r.unbind()}})},mutate:function(t,e){t.mutate(e.left(),e.top())}});function js(){var t=p.none(),e=Ms.create({move:Ps(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){(function(e,n){var r=t.map(function(t){return e.compare(t,n)});return t=p.some(n),r})(r,n).each(function(t){e.trigger.move(t)})})},reset:function(){t=p.none()},events:e.registry}}function Vs(){var t={onEvent:function(t,e){},reset:n},e=js(),r=t;return{on:function(){r.reset(),r=e},off:function(){r.reset(),r=t},isOn:function(){return r===e},onEvent:function(t,e){r.onEvent(t,e)},events:e.events}}var qs=function(t,e,n){var r,i,o,a=!1,s=Ms.create({start:Ps([]),stop:Ps([])}),u=Vs(),l=function(){d.stop(),u.isOn()&&(u.off(),s.trigger.stop())},c=(r=l,i=200,o=null,{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!==o&&clearTimeout(o),o=setTimeout(function(){r.apply(null,t),o=null},i)}});u.events.move.bind(function(n){e.mutate(t,n.info())});var f=function(t){return function(){var e=Array.prototype.slice.call(arguments,0);if(a)return t.apply(null,e)}},d=e.sink(Hs.api({forceDrop:l,drop:f(l),move:f(function(t,n){c.cancel(),u.onEvent(t,e)}),delayDrop:f(c.throttle)}),n);return{element:d.element,go:function(t){d.start(t),u.on(),s.trigger.start()},on:function(){a=!0},off:function(){a=!1},destroy:function(){d.destroy()},events:s.registry}},Ys={transform:function(t,e){var n=void 0!==e?e:{},r=void 0!==n.mode?n.mode:Us;return qs(t,r,e)}};function $s(){var t=Ms.create({drag:Ps(["xDelta","yDelta","target"])}),e=p.none(),n=function(){var t=Ms.create({drag:Ps(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}();return n.events.drag.bind(function(n){e.each(function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)})}),{assign:function(t){e=p.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}}var Xs=function(t,e,n){return _e(t,e,n).isSome()},Js=eo.resolve("resizer-bar-dragging");function Ks(t,e){var n=si.height,r=function(t,e,n){var r=$s(),i=Ys.transform(r,{}),o=p.none(),s=function(t,e){return p.from(le(t,e))};r.events.drag.bind(function(t){s(t.target(),"data-row").each(function(e){var n=la.getInt(t.target(),"top");Ie(t.target(),"top",n+t.yDelta()+"px")}),s(t.target(),"data-column").each(function(e){var n=la.getInt(t.target(),"left");Ie(t.target(),"left",n+t.xDelta()+"px")})});var u=function(t,e){return la.getInt(t,e)-parseInt(le(t,"data-initial-"+e),10)};i.events.stop.bind(function(){r.get().each(function(r){o.each(function(i){s(r,"data-row").each(function(t){var e=u(r,"top");fe(r,"data-initial-top"),h.trigger.adjustHeight(i,e,parseInt(t,10))}),s(r,"data-column").each(function(t){var e=u(r,"left");fe(r,"data-initial-left"),h.trigger.adjustWidth(i,e,parseInt(t,10))}),vo.refresh(t,i,n,e)})})});var l=function(e,n){h.trigger.startAdjust(),r.assign(e),se(e,"data-initial-"+n,parseInt(Le(e,n),10)),ao(e,Js),Ie(e,"opacity","0.2"),i.go(t.parent())},c=Fs(t.parent(),"mousedown",function(t){vo.isRowBar(t.target())&&l(t.target(),"top"),vo.isColBar(t.target())&&l(t.target(),"left")}),f=function(e){return Ft(e,t.view())},d=Fs(t.view(),"mouseover",function(r){"table"===Qt(r.target())||Xs(r.target(),"table",f)?(o="table"===Qt(r.target())?p.some(r.target()):Ce(r.target(),"table",f)).each(function(r){vo.refresh(t,r,n,e)}):he(r.target())&&vo.destroy(t)}),h=Ms.create({adjustHeight:Ps(["table","delta","row"]),adjustWidth:Ps(["table","delta","column"]),startAdjust:Ps([])});return{destroy:function(){c.unbind(),d.unbind(),i.destroy(),vo.destroy(t)},refresh:function(r){vo.refresh(t,r,n,e)},on:i.on,off:i.off,hideBars:a(vo.hide,t),showBars:a(vo.show,t),events:h.registry}}(t,e,n),i=Ms.create({beforeResize:Ps(["table"]),afterResize:Ps(["table"]),startDrag:Ps([])});return r.events.adjustHeight.bind(function(t){i.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());Sa.adjustHeight(t.table(),e,t.row(),n),i.trigger.afterResize(t.table())}),r.events.startAdjust.bind(function(t){i.trigger.startDrag()}),r.events.adjustWidth.bind(function(t){i.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());Sa.adjustWidth(t.table(),n,t.column(),e),i.trigger.afterResize(t.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:i.registry}}var Gs=function(t,e){return t.inline?As(Ia(t),function(){var t=ot.fromTag("div");return We(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ye(me(),t),t}()):Os(ot.fromDom(t.getDoc()))},Zs=function(t,e){t.inline&&Ge(e.parent())},Qs=function(t){var e,n,r=p.none(),i=p.none(),o=p.none(),a=/(\d+(\.\d+)?)%/,s=function(t){return"TABLE"===t.nodeName};return t.on("init",function(){var e=li(qa.directionAt),n=Gs(t);if(o=p.some(n),function(t){var e=t.getParam("object_resizing",!0);return"table"===e||e}(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var a=Ks(n,e);a.on(),a.events.startDrag.bind(function(e){r=p.some(t.selection.getRng())}),a.events.beforeResize.bind(function(e){var n=e.table().dom();ss(t,n,Wa(n),La(n))}),a.events.afterResize.bind(function(e){var n=e.table(),i=n.dom();Ua(n),r.each(function(e){t.selection.setRng(e),t.focus()}),us(t,i,Wa(i),La(i)),t.undoManager.add()}),i=p.some(a)}}),t.on("ObjectResizeStart",function(r){var i,o=r.target;s(o)&&(e=r.width,i=o,n=t.dom.getStyle(i,"width")||t.dom.getAttrib(i,"width"))}),t.on("ObjectResized",function(r){var i=r.target;if(s(i)){var o=i;if(a.test(n)){var u=parseFloat(a.exec(n)[1]),l=r.width*u/e;t.dom.setStyle(o,"width",l+"%")}else{var c=[];fs.each(o.rows,function(e){fs.each(e.cells,function(e){var n=t.dom.getStyle(e,"width",!0);c.push({cell:e,width:n})})}),fs.each(c,function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)})}}}),{lazyResize:function(){return i},lazyWire:function(){return o.getOr(Os(ot.fromDom(t.getBody())))},destroy:function(){i.each(function(t){t.destroy()}),o.each(function(e){Zs(t,e)})}}},tu=function(t){return{fold:t}},eu=function(t){return tu(function(e,n,r,i){return e(t)})},nu=function(t){return tu(function(e,n,r,i){return n(t)})},ru=function(t,e){return tu(function(n,r,i,o){return i(t,e)})},iu=function(t){return tu(function(e,n,r,i){return i(t)})},ou=function(t,e){return Ne.table(t,e).bind(function(e){var n=Ne.cells(e);return A(n,function(e){return Ft(t,e)}).map(function(t){return{index:i(t),all:i(n)}})})},au=function(t,e){return ou(t,e).fold(function(){return eu(t)},function(e){return e.index()+1<e.all().length?ru(t,e.all()[e.index()+1]):iu(t)})},su=function(t,e){return ou(t,e).fold(function(){return eu()},function(e){return e.index()-1>=0?ru(t,e.all()[e.index()-1]):nu(t)})},uu=mr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lu={before:uu.before,on:uu.on,after:uu.after,cata:function(t,e,n,r){return t.fold(e,n,r)},getStart:function(t){return t.fold(o,o,o)}},cu=mr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fu=V("start","soffset","finish","foffset"),du=function(t){return function(t){var e=t.dom().ownerDocument.defaultView;return ot.fromDom(e)}(function(t){return t.match({domRange:function(t){return ot.fromDom(t.startContainer)},relative:function(t,e){return lu.getStart(t)},exact:function(t,e,n,r){return t}})}(t))},hu=cu.relative,mu=cu.exact,gu=function(t,e,n,r){var i=function(t,e,n,r){var i=Vt(t).dom().createRange();return i.setStart(t.dom(),e),i.setEnd(n.dom(),r),i}(t,e,n,r),o=Ft(t,n)&&e===r;return i.collapsed&&!o},pu=function(t,e){t.selectNodeContents(e.dom())},vu=function(t,e,n){var r,i=t.document.createRange();return r=i,e.fold(function(t){r.setStartBefore(t.dom())},function(t,e){r.setStart(t.dom(),e)},function(t){r.setStartAfter(t.dom())}),function(t,e){e.fold(function(e){t.setEndBefore(e.dom())},function(e,n){t.setEnd(e.dom(),n)},function(e){t.setEndAfter(e.dom())})}(i,n),i},bu=function(t,e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom(),n),o.setEnd(r.dom(),i),o},yu=function(t){return{left:i(t.left),top:i(t.top),right:i(t.right),bottom:i(t.bottom),width:i(t.width),height:i(t.height)}},wu=mr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),xu=function(t,e,n){return e(ot.fromDom(n.startContainer),n.startOffset,ot.fromDom(n.endContainer),n.endOffset)},Cu=function(t,e){return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return wu.rtl(ot.fromDom(t.endContainer),t.endOffset,ot.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return xu(0,wu.ltr,n)}):xu(0,wu.ltr,n)}(0,function(t,e){return e.match({domRange:function(t){return{ltr:i(t),rtl:p.none}},relative:function(e,n){return{ltr:wt(function(){return vu(t,e,n)}),rtl:wt(function(){return p.some(vu(t,n,e))})}},exact:function(e,n,r,i){return{ltr:wt(function(){return bu(t,e,n,r,i)}),rtl:wt(function(){return p.some(bu(t,r,i,e,n))})}}})}(t,e))},Ru=function(t,e){return Cu(t,e).match({ltr:function(e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom(),n),o.setEnd(r.dom(),i),o},rtl:function(e,n,r,i){var o=t.document.createRange();return o.setStart(r.dom(),i),o.setEnd(e.dom(),n),o}})},ku=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},_u=function(t,e,n,r,i){var o=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},a=ln(e).length,s=function(t,e,n,r,i){if(0===i)return 0;if(e===r)return i-1;for(var o=r,a=1;a<i;a++){var s=t(a),u=Math.abs(e-s.left);if(n<=s.bottom){if(n<s.top||u>o)return a-1;o=u}}return 0}(function(t){return o(t).getBoundingClientRect()},n,r,i.right,a);return o(s)},Su=function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getClientRects();return Hi(o,function(t){return ku(t,n,r)?p.some(t):p.none()}).map(function(i){return _u(t,e,n,r,i)})},Tu=function(t,e,n,r){var i=t.dom().createRange(),o=Jt(e);return Hi(o,function(e){return i.selectNode(e.dom()),ku(i.getBoundingClientRect(),n,r)?Eu(t,e,n,r):p.none()})},Eu=function(t,e,n,r){return(ie(e)?Su:Tu)(t,e,n,r)},Nu=function(t,e){return e-t.left<t.right-e},Du=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},Ou=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var i=r.getBoundingClientRect(),o=Nu(i,n);return(!0===o?gn:pn)(e).map(function(e){return Du(t,e,o)})},Au=function(t,e,n){var r=e.dom().getBoundingClientRect(),i=Nu(r,n);return p.some(Du(t,e,i))},Pu=function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getBoundingClientRect();return function(t,e,n,r){var i=t.dom().createRange();i.selectNode(e.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return Eu(t,e,a,s)}(t,e,Math.max(o.left,Math.min(o.right,n)),Math.max(o.top,Math.min(o.bottom,r)))},Mu=document.caretPositionFromPoint?function(t,e,n){return p.from(t.dom().caretPositionFromPoint(e,n)).bind(function(e){if(null===e.offsetNode)return p.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),p.some(n)})}:document.caretRangeFromPoint?function(t,e,n){return p.from(t.dom().caretRangeFromPoint(e,n))}:function(t,e,n){return ot.fromPoint(t,e,n).bind(function(r){var i=function(){return function(t,e,n){return(0===Jt(e).length?Au:Ou)(t,e,n)}(t,r,e)};return 0===Jt(r).length?i():Pu(t,r,e,n).orThunk(i)})},Hu=function(t,e){var n=Qt(t);return"input"===n?lu.after(t):k(["br","img"],n)?0===e?lu.before(t):lu.after(t):lu.on(t,e)},Bu=function(t,e){var n=t.fold(lu.before,Hu,lu.after),r=e.fold(lu.before,Hu,lu.after);return hu(n,r)},Iu=function(t,e,n,r){var i=Hu(t,e),o=Hu(n,r);return hu(i,o)},Wu=function(t,e){p.from(t.getSelection()).each(function(t){t.removeAllRanges(),t.addRange(e)})},Lu=function(t,e,n,r,i){var o=bu(t,e,n,r,i);Wu(t,o)},zu=function(t,e){return Cu(t,e).match({ltr:function(e,n,r,i){Lu(t,e,n,r,i)},rtl:function(e,n,r,i){var o=t.getSelection();if(o.setBaseAndExtent)o.setBaseAndExtent(e.dom(),n,r.dom(),i);else if(o.extend)try{!function(t,e,n,r,i,o){e.collapse(n.dom(),r),e.extend(i.dom(),o)}(0,o,e,n,r,i)}catch(o){Lu(t,r,i,e,n)}else Lu(t,r,i,e,n)}})},Fu=function(t,e,n,r,i){var o=Iu(e,n,r,i);zu(t,o)},Uu=function(t,e,n){var r=Bu(e,n);zu(t,r)},ju=function(t){var e=du(t).dom(),n=function(t,n,r,i){return bu(e,t,n,r,i)},r=function(t){return t.match({domRange:function(t){var e=ot.fromDom(t.startContainer),n=ot.fromDom(t.endContainer);return Iu(e,t.startOffset,n,t.endOffset)},relative:Bu,exact:Iu})}(t);return Cu(e,r).match({ltr:n,rtl:n})},Vu=function(t){var e=ot.fromDom(t.anchorNode),n=ot.fromDom(t.focusNode);return gu(e,t.anchorOffset,n,t.focusOffset)?p.some(fu(ot.fromDom(t.anchorNode),t.anchorOffset,ot.fromDom(t.focusNode),t.focusOffset)):function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return p.some(fu(ot.fromDom(e.startContainer),e.startOffset,ot.fromDom(n.endContainer),n.endOffset))}return p.none()}(t)},qu=function(t,e){var n=function(t,e){var n=t.document.createRange();return pu(n,e),n}(t,e);Wu(t,n)},Yu=function(t){return function(t){return p.from(t.getSelection()).filter(function(t){return t.rangeCount>0}).bind(Vu)}(t).map(function(t){return mu(t.start(),t.soffset(),t.finish(),t.foffset())})},$u=function(t,e){return function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?p.some(n).map(yu):p.none()}(Ru(t,e))},Xu=function(t,e,n){return function(t,e,n){var r=ot.fromDom(t.document);return Mu(r,e,n).map(function(t){return fu(ot.fromDom(t.startContainer),t.startOffset,ot.fromDom(t.endContainer),t.endOffset)})}(t,e,n)},Ju=function(t){t.getSelection().removeAllRanges()},Ku=tinymce.util.Tools.resolve("tinymce.util.VK"),Gu=function(t,e,n,r){return el(t,e,au(n),r)},Zu=function(t,e,n,r){return el(t,e,su(n),r)},Qu=function(t,e){var n=mu(e,0,e,0);return ju(n)},tl=function(t,e){var n,r=ye(e,"tr");return(n=r,0===n.length?p.none():p.some(n[n.length-1])).bind(function(t){return ke(t,"td,th").map(function(t){return Qu(0,t)})})},el=function(t,e,n,r,i){return n.fold(p.none,p.none,function(t,e){return gn(e).map(function(t){return Qu(0,t)})},function(n){return Ne.table(n,e).bind(function(e){var i=Rr.noMenu(n);return t.undoManager.transact(function(){r.insertRowsAfter(e,i)}),tl(0,e)})})},nl=["table","li","dl"],rl={handle:function(t,e,n,r){if(t.keyCode===Ku.TAB){var i=Ia(e),o=function(t){var e=Qt(t);return Ft(t,i)||k(nl,e)},a=e.selection.getRng();if(a.collapsed){var s=ot.fromDom(a.startContainer);Ne.cell(s,o).each(function(i){t.preventDefault(),(t.shiftKey?Zu:Gu)(e,o,i,n,r).each(function(t){e.selection.setRng(t)})})}}}},il={response:V("selection","kill")},ol=function(t){return function(e){return e===t}},al=ol(38),sl=ol(40),ul={ltr:{isBackward:ol(37),isForward:ol(39)},rtl:{isBackward:ol(39),isForward:ol(37)},isUp:al,isDown:sl,isNavigation:function(t){return t>=37&&t<=40}},ll={convertToRange:function(t,e){var n=Ru(t,e);return{start:i(ot.fromDom(n.startContainer)),soffset:i(n.startOffset),finish:i(ot.fromDom(n.endContainer)),foffset:i(n.endOffset)}},makeSitus:function(t,e,n,r){return{start:i(lu.on(t,e)),finish:i(lu.on(n,r))}}},cl=(zt.detect().browser.isSafari(),function(t){var e=void 0!==t?t.dom():document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return $r(n,r)}),fl=function(t,e,n){(void 0!==n?n.dom():document).defaultView.scrollBy(t,e)};function dl(t){return{elementFromPoint:function(e,n){return ot.fromPoint(ot.fromDom(t.document),e,n)},getRect:function(t){return t.dom().getBoundingClientRect()},getRangedRect:function(e,n,r,i){var o=mu(e,n,r,i);return $u(t,o).map(function(t){return U(t,u)})},getSelection:function(){return Yu(t).map(function(e){return ll.convertToRange(t,e)})},fromSitus:function(e){var n=hu(e.start(),e.finish());return ll.convertToRange(t,n)},situsFromPoint:function(e,n){return Xu(t,e,n).map(function(t){return{start:i(lu.on(t.start(),t.soffset())),finish:i(lu.on(t.finish(),t.foffset()))}})},clearSelection:function(){Ju(t)},setSelection:function(e){Fu(t,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,n){Uu(t,e,n)},selectContents:function(e){qu(t,e)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){return cl(ot.fromDom(t.document)).top()},scrollBy:function(e,n){fl(e,n,ot.fromDom(t.document))}}}var hl=function(t,e,n,r,i){return Ft(n,r)?p.none():lr.identify(n,r,e).bind(function(e){var r=e.boxes().getOr([]);return r.length>0?(i(t,r,e.start(),e.finish()),p.some(il.response(p.some(ll.makeSitus(n,0,n,dn(n))),!0))):p.none()})},ml={sync:function(t,e,n,r,i,o,a){return Ft(n,i)&&r===o?p.none():_e(n,"td,th",e).bind(function(n){return _e(i,"td,th",e).bind(function(r){return hl(t,e,n,r,a)})})},detect:hl,update:function(t,e,n,r,i){return lr.shiftSelection(r,t,e,i.firstSelectedSelector(),i.lastSelectedSelector()).map(function(t){return i.clear(n),i.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()})}},gl=K(["left","top","right","bottom"],[]),pl={nu:gl,moveUp:function(t,e){return gl({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},moveDown:function(t,e){return gl({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},moveBottomTo:function(t,e){var n=t.bottom()-t.top();return gl({left:t.left(),top:e-n,right:t.right(),bottom:e})},moveTopTo:function(t,e){var n=t.bottom()-t.top();return gl({left:t.left(),top:e,right:t.right(),bottom:e+n})},getTop:function(t){return t.top()},getBottom:function(t){return t.bottom()},translate:function(t,e,n){return gl({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},toString:function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"}},vl=function(t){return pl.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},bl=function(t,e){return p.some(t.getRect(e))},yl=function(t,e,n){return re(e)?bl(t,e).map(vl):ie(e)?function(t,e,n){return n>=0&&n<dn(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):p.none()}(t,e,n).map(vl):p.none()},wl=function(t,e){return re(e)?bl(t,e).map(vl):ie(e)?t.getRangedRect(e,0,e,dn(e)).map(vl):p.none()},xl=V("item","mode"),Cl=function(t,e,n,r){var i=void 0!==r?r:Rl;return t.property().parent(e).map(function(t){return xl(t,i)})},Rl=function(t,e,n,r){var i=void 0!==r?r:kl;return n.sibling(t,e).map(function(t){return xl(t,i)})},kl=function(t,e,n,r){var i=void 0!==r?r:kl,o=t.property().children(e);return n.first(o).map(function(t){return xl(t,i)})},_l=[{current:Cl,next:Rl,fallback:p.none()},{current:Rl,next:kl,fallback:p.some(Cl)},{current:kl,next:kl,fallback:p.some(Rl)}],Sl=function(t,e,n,r,i){return O(i=void 0!==i?i:_l,function(t){return t.current===n}).bind(function(n){return n.current(t,e,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return Sl(t,e,n,r)})})})},Tl={backtrack:Cl,sidestep:Rl,advance:kl,go:Sl},El={left:function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?p.some(t[t.length-1]):p.none()}}},right:function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?p.some(t[0]):p.none()}}}},Nl=function(t,e,n,r,i,o){return Tl.go(t,e,r,i).bind(function(e){return o(e.item())?p.none():n(e.item())?p.some(e.item()):Nl(t,e.item(),n,e.mode(),i,o)})},Dl=function(t,e,n,r){return Nl(t,e,n,Tl.sidestep,El.left(),r)},Ol=function(t,e,n,r){return Nl(t,e,n,Tl.sidestep,El.right(),r)},Al=function(t,e){return 0===t.property().children(e).length},Pl=function(t,e,n,r){return Dl(t,e,n,r)},Ml=function(t,e,n,r){return Ol(t,e,n,r)},Hl={before:function(t,e,n){return Pl(t,e,a(Al,t),n)},after:function(t,e,n){return Ml(t,e,a(Al,t),n)},seekLeft:Pl,seekRight:Ml,walkers:function(){return{left:El.left,right:El.right}},walk:function(t,e,n,r,i){return Tl.go(t,e,n,r,i)},backtrack:Tl.backtrack,sidestep:Tl.sidestep,advance:Tl.advance},Bl=_n(),Il={gather:function(t,e,n){return Hl.gather(Bl,t,e,n)},before:function(t,e){return Hl.before(Bl,t,e)},after:function(t,e){return Hl.after(Bl,t,e)},seekLeft:function(t,e,n){return Hl.seekLeft(Bl,t,e,n)},seekRight:function(t,e,n){return Hl.seekRight(Bl,t,e,n)},walkers:function(){return Hl.walkers()},walk:function(t,e,n,r){return Hl.walk(Bl,t,e,n,r)}},Wl=mr([{none:[]},{retry:["caret"]}]),Ll=function(t,e,n){return(r=e,o=Ei,we(function(t){return o(t)},xe,r,o,a)).fold(i(!1),function(e){return wl(t,e).exists(function(t){return function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()}(n,t)})});var r,o,a},zl={point:pl.getTop,adjuster:function(t,e,n,r,i){var o=pl.moveUp(i,5);return Math.abs(n.top()-r.top())<1?Wl.retry(o):n.bottom()<i.top()?Wl.retry(o):n.bottom()===i.top()?Wl.retry(pl.moveUp(i,1)):Ll(t,e,i)?Wl.retry(pl.translate(o,5,0)):Wl.none()},move:pl.moveUp,gather:Il.before},Fl={point:pl.getBottom,adjuster:function(t,e,n,r,i){var o=pl.moveDown(i,5);return Math.abs(n.bottom()-r.bottom())<1?Wl.retry(o):n.top()>i.bottom()?Wl.retry(o):n.top()===i.bottom()?Wl.retry(pl.moveDown(i,1)):Ll(t,e,i)?Wl.retry(pl.translate(o,5,0)):Wl.none()},move:pl.moveDown,gather:Il.after},Ul=function(t,e,n,r,i){return 0===i?p.some(r):function(t,e,n){return t.elementFromPoint(e,n).filter(function(t){return"table"===Qt(t)}).isSome()}(t,r.left(),e.point(r))?function(t,e,n,r,i){return Ul(t,e,n,e.move(r,5),i)}(t,e,n,r,i-1):t.situsFromPoint(r.left(),e.point(r)).bind(function(o){return o.start().fold(p.none,function(o,a){return wl(t,o,a).bind(function(a){return e.adjuster(t,o,a,n,r).fold(p.none,function(r){return Ul(t,e,n,r,i-1)})}).orThunk(function(){return p.some(r)})},p.none)})},jl=function(t,e,n){var r=t.move(n,5),i=Ul(e,t,n,r,100).getOr(r);return function(t,e,n){return t.point(e)>n.getInnerHeight()?p.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?p.some(-t.point(e)):p.none()}(t,i,e).fold(function(){return e.situsFromPoint(i.left(),t.point(i))},function(n){return e.scrollBy(0,n),e.situsFromPoint(i.left(),t.point(i)-n)})},Vl={tryUp:a(jl,zl),tryDown:a(jl,Fl),ieTryUp:function(t,e){return t.situsFromPoint(e.left(),e.top()-5)},ieTryDown:function(t,e){return t.situsFromPoint(e.left(),e.bottom()+5)},getJumpSize:i(5)},ql=mr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Yl=function(t){return _e(t,"tr")},$l={verify:function(t,e,n,r,i,o,a){return _e(r,"td,th",a).bind(function(n){return _e(e,"td,th",a).map(function(e){return Ft(n,e)?Ft(r,n)&&dn(n)===i?o(e):ql.none("in same cell"):qn.sharedOne(Yl,[n,e]).fold(function(){return function(t,e,n){var r=t.getRect(e),i=t.getRect(n);return i.right>r.left&&i.left<r.right}(t,e,n)?ql.success():o(e)},function(t){return o(e)})})}).getOr(ql.none("default"))},cata:function(t,e,n,r,i){return t.fold(e,n,r,i)},adt:ql},Xl={point:V("element","offset"),delta:V("element","deltaOffset"),range:V("element","start","finish"),points:V("begin","end"),text:V("element","text")},Jl=(V("ancestor","descendants","element","index"),V("parent","children","element","index")),Kl=function(t,e){return A(t,a(Ft,e))},Gl=function(t){return"br"===Qt(t)},Zl=function(t,e,n){return e(t,n).bind(function(t){return ie(t)&&0===ln(t).trim().length?Zl(t,e,n):p.some(t)})},Ql=function(t,e,n,r){return function(t,e){return Kt(t,e).filter(Gl).orThunk(function(){return Kt(t,e-1).filter(Gl)})}(e,n).bind(function(e){return r.traverse(e).fold(function(){return Zl(e,r.gather,t).map(r.relative)},function(t){return(e=t,qt(e).bind(function(t){var n=Jt(t);return Kl(n,e).map(function(r){return Jl(t,n,e,r)})})).map(function(t){return lu.on(t.parent(),t.index())});var e})})},tc=function(t,e,n,r){return(Gl(e)?function(t,e,n){return n.traverse(e).orThunk(function(){return Zl(e,n.gather,t)}).map(n.relative)}(t,e,r):Ql(t,e,n,r)).map(function(t){return{start:i(t),finish:i(t)}})},ec=function(t){return $l.cata(t,function(t){return p.none()},function(){return p.none()},function(t){return p.some(Xl.point(t,0))},function(t){return p.some(Xl.point(t,dn(t)))})},nc=zt.detect(),rc=function(t,e,n,r,i,o){return 0===o?p.none():ac(t,e,n,r,i).bind(function(a){var s=t.fromSitus(a),u=$l.verify(t,n,r,s.finish(),s.foffset(),i.failure,e);return $l.cata(u,function(){return p.none()},function(){return p.some(a)},function(a){return Ft(n,a)&&0===r?ic(t,n,r,pl.moveUp,i):rc(t,e,a,0,i,o-1)},function(a){return Ft(n,a)&&r===dn(a)?ic(t,n,r,pl.moveDown,i):rc(t,e,a,dn(a),i,o-1)})})},ic=function(t,e,n,r,i){return yl(t,e,n).bind(function(e){return oc(t,i,r(e,Vl.getJumpSize()))})},oc=function(t,e,n){return nc.browser.isChrome()||nc.browser.isSafari()||nc.browser.isFirefox()||nc.browser.isEdge()?e.otherRetry(t,n):nc.browser.isIE()?e.ieRetry(t,n):p.none()},ac=function(t,e,n,r,i){return yl(t,n,r).bind(function(e){return oc(t,i,e)})},sc=function(t,e,n){return function(t,e,n){return t.getSelection().bind(function(r){return tc(e,r.finish(),r.foffset(),n).fold(function(){return p.some(Xl.point(r.finish(),r.foffset()))},function(i){var o=t.fromSitus(i),a=$l.verify(t,r.finish(),r.foffset(),o.finish(),o.foffset(),n.failure,e);return ec(a)})})}(t,e,n).bind(function(r){return rc(t,e,r.element(),r.offset(),n,20).map(t.fromSitus)})},uc=zt.detect(),lc=function(t,e){return xe(t,function(t){return qt(t).exists(function(t){return Ft(t,e)})},n).isSome();var n},cc=function(t,e,n,r,o){return _e(r,"td,th",e).bind(function(r){return _e(r,"table",e).bind(function(a){return lc(o,a)?sc(t,e,n).bind(function(t){return _e(t.finish(),"td,th",e).map(function(e){return{start:i(r),finish:i(e),range:i(t)}})}):p.none()})})},fc=function(t,e,n,r,i,o){return uc.browser.isIE()?p.none():o(r,e).orThunk(function(){return cc(t,e,n,r,i).map(function(t){var e=t.range();return il.response(p.some(ll.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)})})},dc=function(t,e,n,r,i,o,a){return cc(t,n,r,i,o).bind(function(t){return ml.detect(e,n,t.start(),t.finish(),a)})},hc=function(t,e){return _e(t,"tr",e).bind(function(t){return _e(t,"table",e).bind(function(n){var r=ye(n,"tr");return Ft(t,r[0])?Il.seekLeft(n,function(t){return pn(t).isSome()},e).map(function(t){var e=dn(t);return il.response(p.some(ll.makeSitus(t,e,t,e)),!0)}):p.none()})})},mc=function(t,e){return _e(t,"tr",e).bind(function(t){return _e(t,"table",e).bind(function(n){var r=ye(n,"tr");return Ft(t,r[r.length-1])?Il.seekRight(n,function(t){return gn(t).isSome()},e).map(function(t){return il.response(p.some(ll.makeSitus(t,0,t,0)),!0)}):p.none()})})},gc=function(t,e){return _e(t,"td,th",e)},pc={down:{traverse:Xt,gather:Il.after,relative:lu.before,otherRetry:Vl.tryDown,ieRetry:Vl.ieTryDown,failure:$l.adt.failedDown},up:{traverse:$t,gather:Il.before,relative:lu.before,otherRetry:Vl.tryUp,ieRetry:Vl.ieTryUp,failure:$l.adt.failedUp}},vc=V("rows","cols"),bc={mouse:function(t,e,n,r){var i=function(t,e,n,r){var i=p.none(),o=function(){i=p.none()};return{mousedown:function(t){r.clear(e),i=gc(t.target(),n)},mouseover:function(o){i.each(function(i){r.clear(e),gc(o.target(),n).each(function(o){lr.identify(i,o,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!Ft(i,o))&&(r.selectRange(e,a,n.start(),n.finish()),t.selectContents(o))})})})},mouseup:function(){i.each(o)}}}(dl(t),e,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},keyboard:function(t,e,n,r){var i=dl(t),o=function(){return r.clear(e),p.none()};return{keydown:function(t,s,u,l,c,f){var d=t.raw().which,h=!0===t.raw().shiftKey;return lr.retrieve(e,r.selectedSelector()).fold(function(){return ul.isDown(d)&&h?a(dc,i,e,n,pc.down,l,s,r.selectRange):ul.isUp(d)&&h?a(dc,i,e,n,pc.up,l,s,r.selectRange):ul.isDown(d)?a(fc,i,n,pc.down,l,s,mc):ul.isUp(d)?a(fc,i,n,pc.up,l,s,hc):p.none},function(t){var n=function(n){return function(){return Hi(n,function(n){return ml.update(n.rows(),n.cols(),e,t,r)}).fold(function(){return lr.getEdges(e,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(t){var n=ul.isDown(d)||f.isForward(d)?lu.after:lu.before;return i.setRelativeSelection(lu.on(t.first(),0),n(t.table())),r.clear(e),il.response(p.none(),!0)})},function(t){return p.some(il.response(p.none(),!0))})}};return ul.isDown(d)&&h?n([vc(1,0)]):ul.isUp(d)&&h?n([vc(-1,0)]):f.isBackward(d)&&h?n([vc(0,-1),vc(-1,0)]):f.isForward(d)&&h?n([vc(0,1),vc(1,0)]):ul.isNavigation(d)&&!1===h?o:p.none})()},keyup:function(t,i,o,a,s){return lr.retrieve(e,r.selectedSelector()).fold(function(){var u=t.raw().which;return 0==(!0===t.raw().shiftKey)?p.none():ul.isNavigation(u)?ml.sync(e,n,i,o,a,s,r.selectRange):p.none()},p.none)}}}},yc=function(t,e){T(e,function(e){!function(t,e){ro(t)?t.dom().classList.remove(e):oo(t,e),so(t)}(t,e)})},wc={byClass:function(t){var e,n,r=(e=t.selected(),function(t){ao(t,e)}),i=(n=[t.selected(),t.lastSelected(),t.firstSelected()],function(t){yc(t,n)}),o=function(e){var n=ye(e,t.selectedSelector());T(n,i)};return{clear:o,selectRange:function(e,n,i,a){o(e),T(n,r),ao(i,t.firstSelected()),ao(a,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(t){var e=function(e){fe(e,t.selected()),fe(e,t.firstSelected()),fe(e,t.lastSelected())},n=function(e){se(e,t.selected(),"1")},r=function(n){var r=ye(n,t.selectedSelector());T(r,e)};return{clear:r,selectRange:function(e,i,o,a){r(e),T(i,n),se(o,t.firstSelected(),"1"),se(a,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}}},xc=function(t){return!1===uo(ot.fromDom(t.target),"ephox-snooker-resizer-bar")},Cc=function(t){return{get:function(){var e=Ia(t);return cr(e,hr.selectedSelector()).fold(function(){return void 0===t.selection.getStart()?pr.none():pr.single(t.selection)},function(t){return pr.multiple(t)})}}},Rc=fs.each,kc={addButtons:function(t){var e=[];function n(e){return function(){t.execCommand(e)}}Rc("inserttable tableprops deletetable | cell row column".split(" "),function(n){"|"===n?e.push({text:"-"}):e.push(t.menuItems[n])}),t.addButton("table",{type:"menubutton",title:"Table",menu:e}),t.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},addToolbars:function(t){var e=function(t){var e=t.getParam("table_toolbar",Ya);return""===e||!1===e?[]:b(e)?e.split(/[ ,]/):y(e)?e:[]}(t);e.length>0&&t.addContextToolbar(function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},e.join(" "))}},_c={addMenuItems:function(t,e){var n=p.none(),r=[],i=[],o=[],a=[],s=function(t){t.disabled(!0)},u=function(t){t.disabled(!1)},l=function(){var t=this;r.push(t),n.fold(function(){s(t)},function(e){u(t)})},c=function(){var t=this;i.push(t),n.fold(function(){s(t)},function(e){u(t)})};t.on("init",function(){t.on("nodechange",function(l){var c=p.from(t.dom.getParent(t.selection.getStart(),"th,td"));(n=c.bind(function(t){var n=ot.fromDom(t);return Ne.table(n).map(function(t){return Rr.forMenu(e,t,n)})})).fold(function(){T(r,s),T(i,s),T(o,s),T(a,s)},function(t){T(r,u),T(i,u),T(o,function(e){e.disabled(t.mergable().isNone())}),T(a,function(e){e.disabled(t.unmergable().isNone())})})})});var f=function(t,e,n,r){var i,o,a,s,u,l=r.getEl().getElementsByTagName("table")[0],c=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=e+1+" x "+(n+1),c&&(e=9-e),o=0;o<10;o++)for(i=0;i<10;i++)s=l.rows[o].childNodes[i].firstChild,u=(c?i>=e:i<=e)&&o<=n,t.dom.toggleClass(s,"mce-active",u),u&&(a=s);return a.parentNode},d=!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?{text:"Table",icon:"table",context:"table",onclick:h("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),t.execCommand("mceInsertTable"))},onshow:function(){f(t,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(e,"mce-active"),t.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return t+="</table>",t+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,r,i=e.target;"A"===i.tagName.toUpperCase()&&(n=parseInt(i.getAttribute("data-mce-x"),10),r=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(f(t,n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(e){var n=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),t.undoManager.transact(function(){_s(t,n.lastX+1,n.lastY+1)}),t.addVisual())}}]};function h(e){return function(){t.execCommand(e)}}var m={text:"Table properties",context:"table",onPostRender:l,onclick:h("mceTableProps")},g={text:"Delete table",context:"table",onPostRender:l,cmd:"mceTableDelete"},v={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:h("mceTableInsertRowBefore"),onPostRender:c},{text:"Insert row after",onclick:h("mceTableInsertRowAfter"),onPostRender:c},{text:"Delete row",onclick:h("mceTableDeleteRow"),onPostRender:c},{text:"Row properties",onclick:h("mceTableRowProps"),onPostRender:c},{text:"-"},{text:"Cut row",onclick:h("mceTableCutRow"),onPostRender:c},{text:"Copy row",onclick:h("mceTableCopyRow"),onPostRender:c},{text:"Paste row before",onclick:h("mceTablePasteRowBefore"),onPostRender:c},{text:"Paste row after",onclick:h("mceTablePasteRowAfter"),onPostRender:c}]},b={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:h("mceTableInsertColBefore"),onPostRender:c},{text:"Insert column after",onclick:h("mceTableInsertColAfter"),onPostRender:c},{text:"Delete column",onclick:h("mceTableDeleteCol"),onPostRender:c}]},y={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:h("mceTableCellProps"),onPostRender:c},{text:"Merge cells",onclick:h("mceTableMergeCells"),onPostRender:function(){var t=this;o.push(t),n.fold(function(){s(t)},function(e){t.disabled(e.mergable().isNone())})}},{text:"Split cell",onclick:h("mceTableSplitCells"),onPostRender:function(){var t=this;a.push(t),n.fold(function(){s(t)},function(e){t.disabled(e.unmergable().isNone())})}}]};t.addMenuItem("inserttable",d),t.addMenuItem("tableprops",m),t.addMenuItem("deletetable",g),t.addMenuItem("row",v),t.addMenuItem("column",b),t.addMenuItem("cell",y)}},Sc=function(t,e){return{insertTable:function(e,n){return _s(t,e,n)},setClipboardRows:function(t){return function(t,e){var n=S(t,ot.fromDom);e.set(p.from(n))}(t,e)},getClipboardRows:function(){return function(t){return t.get().fold(function(){},function(t){return S(t,function(t){return t.dom()})})}(e)}}};e.add("table",function(t){var e=Qs(t),o=function(t,e){var o=K(["mousedown","mouseover","mouseup","keyup","keydown"],[]),a=p.none(),s=wc.byAttr(hr);return t.on("init",function(u){var l=t.getWin(),c=Ia(t),f=za(t),d=bc.mouse(l,c,f,s),h=bc.keyboard(l,c,f,s),m=function(e,n){(function(t){return!0===t.raw().shiftKey})(e)&&(n.kill()&&e.kill(),n.selection().each(function(e){var n=hu(e.start(),e.finish()),r=Ru(l,n);t.selection.setRng(r)}))},g=function(e){var n=y(e);if(n.raw().shiftKey&&ul.isNavigation(n.raw().which)){var r=t.selection.getRng(),i=ot.fromDom(r.startContainer),o=ot.fromDom(r.endContainer);h.keyup(n,i,r.startOffset,o,r.endOffset).each(function(t){m(n,t)})}},v=function(n){var r=y(n);e().each(function(t){t.hideBars()});var i=t.selection.getRng(),o=ot.fromDom(t.selection.getStart()),a=ot.fromDom(i.startContainer),s=ot.fromDom(i.endContainer),u=qa.directionAt(o).isRtl()?ul.rtl:ul.ltr;h.keydown(r,a,i.startOffset,s,i.endOffset,u).each(function(t){m(r,t)}),e().each(function(t){t.showBars()})},b=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},y=function(t){var e=ot.fromDom(t.target),n=function(){t.stopPropagation()},o=function(){t.preventDefault()},a=r(o,n);return{target:i(e),x:i(b(t)?t.x:null),y:i(b(t)?t.y:null),stop:n,prevent:o,kill:a,raw:i(t)}},w=function(t){return 0===t.button},x=function(t){w(t)&&xc(t)&&d.mousedown(y(t))},C=function(t){var e;void 0!==(e=t).buttons&&0==(1&e.buttons)||!xc(t)||d.mouseover(y(t))},R=function(t){w(t)&&xc(t)&&d.mouseup(y(t))};t.on("mousedown",x),t.on("mouseover",C),t.on("mouseup",R),t.on("keyup",g),t.on("keydown",v),t.on("nodechange",function(){var e=t.selection,r=ot.fromDom(e.getStart()),i=ot.fromDom(e.getEnd());qn.sharedOne(Ne.table,[r,i]).fold(function(){s.clear(c)},n)}),a=p.some(o({mousedown:x,mouseover:C,mouseup:R,keyup:g,keydown:v}))}),{clear:s.clear,destroy:function(){a.each(function(t){})}}}(t,e.lazyResize),a=ls(t,e.lazyWire),s=Cc(t),u=di(p.none());return Ds.registerCommands(t,a,o,s,u),kr.registerEvents(t,s,a,o),_c.addMenuItems(t,s),kc.addButtons(t),kc.addToolbars(t),t.on("PreInit",function(){t.serializer.addTempAttr(hr.firstSelected()),t.serializer.addTempAttr(hr.lastSelected())}),Ka(t)&&t.on("keydown",function(n){rl.handle(n,t,a,e.lazyWire)}),t.on("remove",function(){e.destroy(),o.destroy()}),Sc(t,u)})}()}).call(window)},Z3om:function(t,e){(function(){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),r=tinymce.util.Tools.resolve("tinymce.util.VK"),i=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(t){return t&&"BR"===t.nodeName},u=function(t){return t&&3===t.nodeType},l=function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)},c=function(t){return t&&/^(LI|DT|DD)$/.test(t.nodeName)},f=function(t){return t&&/^(TH|TD)$/.test(t.nodeName)},d=s,h=function(t){return t.parentNode.firstChild===t},m=function(t){return t.parentNode.lastChild===t},g=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},p=function(t,e){return t&&t.nodeName in e},v=function(t,e){return!!s(e)&&!(!t.isBlock(e.nextSibling)||s(e.previousSibling))},b=function(t,e,n){var r=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&r},y=function(t,e){return t.isChildOf(e,t.getRoot())},w=function(t,n){var r=e.getNode(t,n);return c(t)&&u(r)?{container:r,offset:n>=t.childNodes.length?r.data.length:0}:{container:t,offset:n}},x=function(t){var e=t.cloneRange(),n=w(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var r=w(t.endContainer,t.endOffset);return e.setEnd(r.container,r.offset),e},C=a.DOM,R=function(t){var e={},n=function(n){var r,i,o;i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(r=C.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(o=Math.min(o,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[o]):C.insertAfter(r,i.childNodes[o])):i.appendChild(r),i=r,o=0),e[n?"startContainer":"endContainer"]=i,e[n?"startOffset":"endOffset"]=o};return n(!0),t.collapsed||n(),e},k=function(t){function e(e){var n,r,i;n=i=t[e?"startContainer":"endContainer"],r=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(n),n=n.parentNode,C.remove(i),!n.hasChildNodes()&&C.isBlock(n)&&n.appendChild(C.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=r)}e(!0),e();var n=C.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),x(n)},_=a.DOM,S=function(t,e){var n,r=e.parentNode;"LI"===r.nodeName&&r.firstChild===e&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),b(t,r)&&_.remove(r)):_.setStyle(r,"listStyleType","none")),l(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)},T=function(t,e){o.each(o.grep(t.select("ol,ul",e)),function(e){S(t,e)})},E=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),N=function(t){var e=t.selection.getStart(!0);return t.dom.getParent(e,"OL,UL,DL",D(t,e))},D=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},O={getParentList:N,getSelectedSubLists:function(t){var e=N(t),n=t.selection.getSelectedBlocks();return function(t,e){return t&&1===e.length&&e[0]===t}(e,n)?function(t){return o.grep(t.querySelectorAll("ol,ul,dl"),function(t){return l(t)})}(e):o.grep(n,function(t){return l(t)&&e!==t})},getSelectedListItems:function(t){var e=t.selection.getSelectedBlocks();return o.grep(function(t,e){var n=o.map(e,function(e){var n=t.dom.getParent(e,"li,dd,dt",D(t,e));return n||e});return E.unique(n)}(t,e),function(t){return c(t)})},getClosestListRootElm:D},A=tinymce.util.Tools.resolve("tinymce.Env"),P=a.DOM,M=function(t,e,n){var r,i,o,a=P.createFragment(),s=t.schema.getBlockElements();if(t.settings.forced_root_block&&(n=n||t.settings.forced_root_block),n&&((i=P.create(n)).tagName===t.settings.forced_root_block&&P.setAttribs(i,t.settings.forced_root_block_attrs),p(e.firstChild,s)||a.appendChild(i)),e)for(;r=e.firstChild;){var u=r.nodeName;o||"SPAN"===u&&"bookmark"===r.getAttribute("data-mce-type")||(o=!0),p(r,s)?(a.appendChild(r),i=null):n?(i||(i=P.create(n),a.appendChild(i)),i.appendChild(r)):a.appendChild(r)}return t.settings.forced_root_block?o||A.ie&&!(A.ie>10)||i.appendChild(P.create("br",{"data-mce-bogus":"1"})):a.appendChild(P.create("br")),a},H=a.DOM,B=function(t,e,n,r){var i,a,s,u,l;for(s=H.select('span[data-mce-type="bookmark"]',e),r=r||M(t,n),(i=H.createRng()).setStartAfter(n),i.setEndAfter(e),u=(a=i.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&t.dom.isEmpty(u)){H.remove(u);break}t.dom.isEmpty(a)||H.insertAfter(a,e),H.insertAfter(r,e),b(t.dom,n.parentNode)&&(l=n.parentNode,o.each(s,function(t){l.parentNode.insertBefore(t,n.parentNode)}),H.remove(l)),H.remove(n),b(t.dom,e)&&H.remove(e)},I=a.DOM,W=function(t,e){b(t,e)&&I.remove(e)},L=function(t,e){var n,r,i=e.parentNode;return i?(n=i.parentNode,!(i!==t.getBody()&&("DD"===e.nodeName?(I.rename(e,"DT"),0):h(e)&&m(e)?("LI"===n.nodeName?(I.insertAfter(e,n),W(t.dom,n),I.remove(i)):l(n)?I.remove(i,!0):(n.insertBefore(M(t,e),i),I.remove(i)),0):h(e)?("LI"===n.nodeName?(I.insertAfter(e,n),e.appendChild(i),W(t.dom,n)):l(n)?n.insertBefore(e,i):(n.insertBefore(M(t,e),i),I.remove(e)),0):m(e)?("LI"===n.nodeName?I.insertAfter(e,n):l(n)?I.insertAfter(e,i):(I.insertAfter(M(t,e),i),I.remove(e)),0):("LI"===n.nodeName?(i=n,r=M(t,e,"LI")):r=l(n)?M(t,e,"LI"):M(t,e),B(t,i,e,r),T(t.dom,i.parentNode),0)))):(W(t.dom,e),!0)},z=L,F=function(t){var e=O.getSelectedListItems(t);if(e.length){var n=R(t.selection.getRng()),r=void 0,i=void 0,o=O.getClosestListRootElm(t,t.selection.getStart(!0));for(r=e.length;r--;)for(var a=e[r].parentNode;a&&a!==o;){for(i=e.length;i--;)if(e[i]===a){e.splice(r,1);break}a=a.parentNode}for(r=0;r<e.length&&(L(t,e[r])||0!==r);r++);return t.selection.setRng(k(n)),t.nodeChanged(),!0}},U=function(t,e){o.each(e,function(e,n){t.setAttribute(n,e)})},j=function(t,e,n){!function(t,e,n){var r=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",r)}(t,e,n),function(t,e,n){U(e,n["list-attributes"]),o.each(t.select("li",e),function(t){U(t,n["list-item-attributes"])})}(t,e,n)},V=function(t,e,n,r){var i,o;for(i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i),!n&&d(i.nextSibling)&&(i=i.nextSibling);i.parentNode!==r;){if(g(t,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},q=function(t,e,n){void 0===n&&(n={});var r,a=t.selection.getRng(!0),s="LI",u=O.getClosestListRootElm(t,t.selection.getStart(!0)),c=t.dom;"false"!==c.getContentEditable(t.selection.getNode())&&("DL"===(e=e.toUpperCase())&&(s="DT"),r=R(a),o.each(function(t,e,n){for(var r,a=[],s=t.dom,u=V(t,e,!0,n),l=V(t,e,!1,n),c=[],f=u;f&&(c.push(f),f!==l);f=f.nextSibling);return o.each(c,function(e){if(g(t,e))return a.push(e),void(r=null);if(s.isBlock(e)||d(e))return d(e)&&s.remove(e),void(r=null);var o=e.nextSibling;i.isBookmarkNode(e)&&(g(t,o)||!o&&e.parentNode===n)?r=null:(r||(r=s.create("p"),e.parentNode.insertBefore(r,e),a.push(r)),r.appendChild(e))}),a}(t,a,u),function(r){var i,a;(a=r.previousSibling)&&l(a)&&a.nodeName===e&&function(t,e,n){var r=t.getStyle(e,"list-style-type"),i=n?n["list-style-type"]:"";return r===(i=null===i?"":i)}(c,a,n)?(i=a,r=c.rename(r,s),a.appendChild(r)):(i=c.create(e),r.parentNode.insertBefore(i,r),i.appendChild(r),r=c.rename(r,s)),function(t,e,n){o.each(n,function(n){var r;return t.setStyle(e,((r={})[n]="",r))})}(c,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),j(c,i,n),X(t.dom,i)}),t.selection.setRng(k(r)))},Y=function(t){var e=R(t.selection.getRng(!0)),n=O.getClosestListRootElm(t,t.selection.getStart(!0)),r=O.getSelectedListItems(t),i=o.grep(r,function(e){return t.dom.isEmpty(e)});r=o.grep(r,function(e){return!t.dom.isEmpty(e)}),o.each(i,function(e){b(t.dom,e)&&z(t,e)}),o.each(r,function(e){var r,i;if(e.parentNode!==t.getBody()){for(r=e;r&&r!==n;r=r.parentNode)l(r)&&(i=r);B(t,i,e),T(t.dom,i.parentNode)}}),t.selection.setRng(k(e))},$=function(t,e,n){return function(t,e){return t&&e&&l(t)&&t.nodeName===e.nodeName}(e,n)&&function(t,e,n){return t.getStyle(e,"list-style-type",!0)===t.getStyle(n,"list-style-type",!0)}(t,e,n)&&(r=n,e.className===r.className);var r},X=function(t,e){var n,r;if(n=e.nextSibling,$(t,e,n)){for(;r=n.firstChild;)e.appendChild(r);t.remove(n)}if(n=e.previousSibling,$(t,e,n)){for(;r=n.lastChild;)e.insertBefore(r,e.firstChild);t.remove(n)}},J=function(t,e,n,r,i){if(e.nodeName!==r||K(i)){var a=R(t.selection.getRng(!0));o.each([e].concat(n),function(e){!function(t,e,n,r){if(e.nodeName!==n){var i=t.rename(e,n);j(t,i,r)}else j(t,e,r)}(t.dom,e,r,i)}),t.selection.setRng(k(a))}else Y(t)},K=function(t){return"list-style-type"in t},G={toggleList:function(t,e,n){var r=O.getParentList(t),i=O.getSelectedSubLists(t);n=n||{},r&&i.length>0?J(t,r,i,e,n):function(t,e,n,r){if(e!==t.getBody())if(e)if(e.nodeName!==n||K(r)){var i=R(t.selection.getRng(!0));j(t.dom,e,r),X(t.dom,t.dom.rename(e,n)),t.selection.setRng(k(i))}else Y(t);else q(t,n,r)}(t,r,e,n)},removeList:Y,mergeWithAdjacentLists:X},Z=function(t,r,i,o){var a,s,u=r.startContainer,l=r.startOffset;if(3===u.nodeType&&(i?l<u.data.length:l>0))return u;for(a=t.schema.getNonEmptyElements(),1===u.nodeType&&(u=e.getNode(u,l)),s=new n(u,o),i&&v(t.dom,u)&&s.next();u=s[i?"next":"prev2"]();){if("LI"===u.nodeName&&!u.hasChildNodes())return u;if(a[u.nodeName])return u;if(3===u.nodeType&&u.data.length>0)return u}},Q=function(t,e){var n=e.childNodes;return 1===n.length&&!l(n[0])&&t.isBlock(n[0])},tt=function(t,e,n){var r,i;if(i=Q(t,n)?n.firstChild:n,function(t,e){Q(t,e)&&t.remove(e.firstChild,!0)}(t,e),!b(t,e,!0))for(;r=e.firstChild;)i.appendChild(r)},et=function(t,e,n){var r,i,o=e.parentNode;y(t,e)&&y(t,n)&&(l(n.lastChild)&&(i=n.lastChild),o===n.lastChild&&d(o.previousSibling)&&t.remove(o.previousSibling),(r=n.lastChild)&&d(r)&&e.hasChildNodes()&&t.remove(r),b(t,n,!0)&&t.$(n).empty(),tt(t,e,n),i&&n.appendChild(i),t.remove(e),b(t,o)&&o!==t.getRoot()&&t.remove(o))},nt=function(t,e,n,r){var i=t.dom;if(i.isEmpty(r))!function(t,e,n){t.dom.$(n).empty(),et(t.dom,e,n),t.selection.setCursorLocation(n)}(t,n,r);else{var o=R(e);et(i,n,r),t.selection.setRng(k(o))}},rt=function(t,e){var n,r,i,o=t.dom,a=t.selection,s=a.getStart(),u=O.getClosestListRootElm(t,s),l=o.getParent(a.getStart(),"LI",u);if(l){if((n=l.parentNode)===t.getBody()&&b(o,n))return!0;if(r=x(a.getRng(!0)),(i=o.getParent(Z(t,r,e,u),"LI",u))&&i!==l)return e?nt(t,r,i,l):function(t,e,n,r){var i=R(e);et(t.dom,n,r);var o=k(i);t.selection.setRng(o)}(t,r,l,i),!0;if(!i&&!e)return G.removeList(t),!0}return!1},it=function(t,e){return rt(t,e)||function(t,e){var n=t.dom,r=t.selection.getStart(),i=O.getClosestListRootElm(t,r),o=n.getParent(r,n.isBlock,i);if(o&&n.isEmpty(o)){var a=x(t.selection.getRng(!0)),s=n.getParent(Z(t,a,e,i),"LI",i);if(s)return t.undoManager.transact(function(){!function(t,e,n){var r=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),r&&t.isEmpty(r)&&t.remove(r)}(n,o,i),G.mergeWithAdjacentLists(n,s.parentNode),t.selection.select(s,!0),t.selection.collapse(e)}),!0}return!1}(t,e)},ot=function(t,e){return t.selection.isCollapsed()?it(t,e):function(t){var e=t.selection.getStart(),n=O.getClosestListRootElm(t,e);return!!(t.dom.getParent(e,"LI,DT,DD",n)||O.getSelectedListItems(t).length>0)&&(t.undoManager.transact(function(){t.execCommand("Delete"),T(t.dom,t.getBody())}),!0)}(t)},at=function(t){t.on("keydown",function(e){e.keyCode===r.BACKSPACE?ot(t,!1)&&e.preventDefault():e.keyCode===r.DELETE&&ot(t,!0)&&e.preventDefault()})},st=ot,ut=function(t){return{backspaceDelete:function(e){st(t,e)}}},lt=a.DOM,ct=function(t,e){var n;if(l(t)){for(;n=t.firstChild;)e.appendChild(n);lt.remove(t)}},ft=function(t){var e,n,r,i,o=O.getSelectedListItems(t);if(o.length){for(var a=R(t.selection.getRng(!0)),s=0;s<o.length&&(e=o[s],n=void 0,r=void 0,i=void 0,("DT"===e.nodeName?(lt.rename(e,"DD"),1):(n=e.previousSibling)&&l(n)?(n.appendChild(e),1):n&&"LI"===n.nodeName&&l(n.lastChild)?(n.lastChild.appendChild(e),ct(e.lastChild,n.lastChild),1):(n=e.nextSibling)&&l(n)?(n.insertBefore(e,n.firstChild),1):(n=e.previousSibling)&&"LI"===n.nodeName&&(r=lt.create(e.parentNode.nodeName),(i=lt.getStyle(e.parentNode,"listStyleType"))&&lt.setStyle(r,"listStyleType",i),n.appendChild(r),r.appendChild(e),ct(e.lastChild,r),1))||0!==s);s++);return t.selection.setRng(k(a)),t.nodeChanged(),!0}},dt=function(t,e){return function(){var n=t.dom.getParent(t.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===e}},ht=function(t){t.on("BeforeExecCommand",function(e){var n,r=e.command.toLowerCase();if("indent"===r?ft(t)&&(n=!0):"outdent"===r&&F(t)&&(n=!0),n)return t.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}),t.addCommand("InsertUnorderedList",function(e,n){G.toggleList(t,"UL",n)}),t.addCommand("InsertOrderedList",function(e,n){G.toggleList(t,"OL",n)}),t.addCommand("InsertDefinitionList",function(e,n){G.toggleList(t,"DL",n)}),t.addQueryStateHandler("InsertUnorderedList",dt(t,"UL")),t.addQueryStateHandler("InsertOrderedList",dt(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",dt(t,"DL"))},mt=function(t){return t.getParam("lists_indent_on_tab",!0)},gt=function(t){mt(t)&&function(t){t.on("keydown",function(e){e.keyCode!==r.TAB||r.metaKeyPressed(e)||t.dom.getParent(t.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?F(t):ft(t))})}(t),at(t)},pt=function(t,e){return function(n){var r=n.control;t.on("NodeChange",function(t){var n=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}(t.parents,f),i=-1!==n?t.parents.slice(0,n):t.parents,a=o.grep(i,l);r.active(a.length>0&&a[0].nodeName===e)})}},vt=function(t){(function(t,e){var n=t.settings.plugins?t.settings.plugins:"";return-1!==o.inArray(n.split(/[ ,]/),e)})(t,"advlist")||(t.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:pt(t,"OL")}),t.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:pt(t,"UL")})),t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){return function(e){var n=e.control;t.on("nodechange",function(){var e=O.getSelectedListItems(t),r=e.length>0&&h(e[0]);n.disabled(r)})}}(t)})};t.add("lists",function(t){return gt(t),vt(t),ht(t),ut(t)})}()}).call(window)},Z594:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("TbPv"),i=n.n(r),o=(n("o5MN"),n("BzBW"),n("+uI+"),n("m/OW"),n("Z3om"),{props:["value","disabled","placeholder","name","height"],data:function(){return{editor:null}},watch:{disabled:function(t){this.editor.getBody().setAttribute("contenteditable",!t)}},mounted:function(){var t=this,e={target:this.$el.children[0],skin_url:"/css/skins/lightgray",plugins:"table charmap link lists",content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i"],link_title:!1,charmap:[[643,"esh"],[353,"s (hacek)"],[269,"c (hacek)"],[952,"theta"],[331,"eng"],[638,"alveolar tap"],[240,"eth"],[660,"glottal stop"],[8709,"null"],[593,"script a"],[230,"ash"],[596,"open o"],[603,"epsilon"],[601,"schwa"],[769,"acute accent"],[768,"grave accent"],[770,"circumflex"],[774,"breve"],[772,"macron"],[771,"tilde"],[720,"IPA length symbol"],[183,"Algonquianist length symbol"]],toolbar:"undo redo | bold italic underline | link | charmap | bullist numlist outdent indent | table | clearformatting",menubar:!1,statusbar:!1,setup:function(e){e.on("change",function(n){t.updateValue(e.getContent())}),e.on("input",function(n){t.updateValue(e.getContent())}),e.on("click",function(e){i.a.remove(t.$el.children[0])}),e.addButton("clearformatting",{image:"https://cdn4.iconfinder.com/data/icons/text-editor-3/100/Minio_Text_Editor_Bold-16-512.png",tooltip:"Clear Formatting",onclick:function(){var t=e.getContent({format:"raw"});t=(t=t.replace(/(?:<|<\/)(?!p|\/p|ul|\/ul|li|\/li|ol|\/ol)(?:.|\n)*?>/gm,"")).replace(/style=['"][^>]*['"]/gm,""),e.setContent(t)}})}};this.height&&(e.height=this.height),i.a.init(e).then(function(e){t.editor=e[0]})},methods:{updateValue:function(t){this.$emit("input",t.trim())}}}),a=n("K1/g"),s=Object(a.a)(o,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control",class:{"mce-disabled":this.disabled}},[e("textarea",{staticClass:"textarea",attrs:{name:this.name,id:this.name,placeholder:this.placeholder,disabled:this.disabled},domProps:{value:this.value}})])},[],!1,null,null,null);s.options.__file="Textarea.vue";e.default=s.exports},"m/OW":function(t,e){(function(){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.util.VK"),n=function(t){return t.target_list},r=function(t){return t.rel_list},i=function(t){return t.link_class_list},o=function(t){return"boolean"==typeof t.link_assume_external_targets&&t.link_assume_external_targets},a=function(t){return"boolean"==typeof t.link_context_toolbar&&t.link_context_toolbar},s=function(t){return t.link_list},u=function(t){return"string"==typeof t.default_link_target},l=function(t){return t.default_link_target},c=n,f=function(t,e){t.settings.target_list=e},d=function(t){return!1!==n(t)},h=r,m=function(t){return void 0!==r(t)},g=i,p=function(t){return void 0!==i(t)},v=function(t){return!1!==t.link_title},b=function(t){return"boolean"==typeof t.allow_unsafe_link_target&&t.allow_unsafe_link_target},y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),w=tinymce.util.Tools.resolve("tinymce.Env"),x=function(t){if(!w.ie||w.ie>10){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var i=r.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+y.DOM.encode(t)+'">'),i.close()}}},C=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=function(t,e){var n=["noopener"],r=t?t.split(/\s+/):[],i=function(t){return t.filter(function(t){return-1===C.inArray(n,t)})};return(r=e?function(t){return(t=i(t)).length?t.concat(n):n}(r):i(r)).length?function(t){return C.trim(t.sort().join(" "))}(r):null},k=function(t,e){return e=e||t.selection.getNode(),S(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},_=function(t){return t&&"A"===t.nodeName&&t.href},S=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},T=function(t,e){var n,r;(r=t.dom.select("img",e)[0])&&(n=t.dom.getParents(r,"a[href]",e)[0])&&(n.parentNode.insertBefore(r,n),t.dom.remove(n))},E=function(t,e,n){var r,i;(i=t.dom.select("img",e)[0])&&(r=t.dom.create("a",n),i.parentNode.insertBefore(r,i),r.appendChild(i))},N=function(t,e){return function(n){t.undoManager.transact(function(){var r=t.selection.getNode(),i=k(t,r),o={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};m(t.settings)||!1!==b(t.settings)||(o.rel=R(o.rel,"_blank"===o.target)),n.href===e.href&&(e.attach(),e={}),i?(t.focus(),n.hasOwnProperty("text")&&("innerText"in i?i.innerText=n.text:i.textContent=n.text),t.dom.setAttribs(i,o),t.selection.select(i),t.undoManager.add()):S(r)?E(t,r,o):n.hasOwnProperty("text")?t.insertContent(t.dom.createHTML("a",o,t.dom.encode(n.text))):t.execCommand("mceInsertLink",!1,o)})}},D=function(t){return function(){t.undoManager.transact(function(){var e=t.selection.getNode();S(e)?T(t,e):t.execCommand("unlink")})}},O=_,A=function(t){return C.grep(t,_).length>0},P=function(t){return!(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1===t.indexOf("href=")))},M=k,H=function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},B=R,I=tinymce.util.Tools.resolve("tinymce.util.Delay"),W=tinymce.util.Tools.resolve("tinymce.util.XHR"),L={},z=function(t,e,n){var r=function(t,n){return n=n||[],C.each(t,function(t){var i={text:t.text||t.title};t.menu?i.menu=r(t.menu):(i.value=t.value,e&&e(i)),n.push(i)}),n};return r(t,n||[])},F=function(t,e,n){var r=t.selection.getRng();I.setEditorTimeout(t,function(){t.windowManager.confirm(e,function(e){t.selection.setRng(r),n(e)})})},U=function(t,e){var n,r,i,a,s,y,w,x,R,k,_,S={},T=t.selection,E=t.dom,O=function(t){var e=i.find("#text");(!e.value()||t.lastControl&&e.value()===t.lastControl.text())&&e.value(t.control.text()),i.find("#href").value(t.control.value())},A=function(){r||!a||S.text||this.parent().parent().find("#text")[0].value(this.value())};a=P(T.getContent()),n=M(t),S.text=r=H(t.selection,n),S.href=n?E.getAttrib(n,"href"):"",n?S.target=E.getAttrib(n,"target"):u(t.settings)&&(S.target=l(t.settings)),(_=E.getAttrib(n,"rel"))&&(S.rel=_),(_=E.getAttrib(n,"class"))&&(S.class=_),(_=E.getAttrib(n,"title"))&&(S.title=_),a&&(s={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){S.text=this.value()}}),e&&(y={type:"listbox",label:"Link list",values:z(e,function(e){e.value=t.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:O,value:t.convertURL(S.href,"href"),onPostRender:function(){y=this}}),d(t.settings)&&(void 0===c(t.settings)&&f(t,[{text:"None",value:""},{text:"New window",value:"_blank"}]),x={name:"target",type:"listbox",label:"Target",values:z(c(t.settings))}),m(t.settings)&&(w={name:"rel",type:"listbox",label:"Rel",values:z(h(t.settings),function(e){!1===b(t.settings)&&(e.value=B(e.value,"_blank"===S.target))})}),p(t.settings)&&(R={name:"class",type:"listbox",label:"Class",values:z(g(t.settings),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"a",classes:[e.value]})})})}),v(t.settings)&&(k={name:"title",type:"textbox",label:"Title",value:S.title}),i=t.windowManager.open({title:"Insert link",data:S,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var n=e.meta||{};y&&y.value(t.convertURL(this.value(),"href")),C.each(e.meta,function(t,e){var n=i.find("#"+e);"text"===e?0===r.length&&(n.value(t),S.text=t):n.value(t)}),n.attach&&(L={href:this.value(),attach:n.attach}),n.text||A.call(this)},onkeyup:A,onpaste:A,onbeforecall:function(t){t.meta=i.toJSON()}},s,k,function(e){var n=[];if(C.each(t.dom.select("a:not([href])"),function(t){var r=t.name||t.id;r&&n.push({text:r,value:"#"+r,selected:-1!==e.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:O}}(S.href),y,w,x,R],onSubmit:function(e){var n=o(t.settings),i=N(t,L),s=D(t),u=C.extend({},S,e.data),l=u.href;l?(a&&u.text!==r||delete u.text,l.indexOf("@")>0&&-1===l.indexOf("//")&&-1===l.indexOf("mailto:")?F(t,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(t){t&&(u.href="mailto:"+l),i(u)}):!0===n&&!/^\w+:/i.test(l)||!1===n&&/^\s*www[\.|\d\.]/i.test(l)?F(t,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){t&&(u.href="http://"+l),i(u)}):i(u)):s()}})},j=function(t){!function(t,e){var n=s(t.settings);"string"==typeof n?W.send({url:n,success:function(n){e(t,JSON.parse(n))}}):"function"==typeof n?n(function(n){e(t,n)}):e(t,n)}(t,U)},V=function(t,e){return t.dom.getParent(e,"a[href]")},q=function(t){return V(t,t.selection.getStart())},Y=function(t,e){if(e){var n=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")}(e);if(/^#/.test(n)){var r=t.$(n);r.length&&t.selection.scrollIntoView(r[0],!0)}else x(e.href)}},$=function(t){return function(){j(t)}},X=function(t){return function(){Y(t,q(t))}},J=function(t){return function(e){var n,r,i;return!!(a(t.settings)&&!function(t){var e=t.plugins.contextmenu;return!!e&&e.isContextMenuVisible()}(t)&&O(e)&&3===(i=(r=(n=t.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length)}},K=function(t){t.on("click",function(n){var r=V(t,n.target);r&&e.metaKeyPressed(n)&&(n.preventDefault(),Y(t,r))}),t.on("keydown",function(e){var n=q(t);n&&13===e.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(e)&&(e.preventDefault(),Y(t,n))})},G=function(t){return function(){var e=this;t.on("nodechange",function(n){e.active(!t.readonly&&!!M(t,n.element))})}},Z=function(t){return function(){var e=this,n=function(t){A(t.parents)?e.show():e.hide()};A(t.dom.getParents(t.selection.getStart()))||e.hide(),t.on("nodechange",n),e.on("remove",function(){t.off("nodechange",n)})}},Q=function(t){t.addCommand("mceLink",$(t))},tt=function(t){t.addShortcut("Meta+K","",$(t))},et=function(t){t.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:$(t),onpostrender:G(t)}),t.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:D(t),onpostrender:G(t)}),t.addContextToolbar&&t.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:X(t)})},nt=function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:X(t),onPostRender:Z(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:$(t),stateSelector:"a[href]",context:"insert",prependToContext:!0}),t.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:D(t),stateSelector:"a[href]"})},rt=function(t){t.addContextToolbar&&t.addContextToolbar(J(t),"openlink | link unlink")};t.add("link",function(t){et(t),nt(t),rt(t),K(t),Q(t),tt(t)})}()}).call(window)},o5MN:function(t,e){(function(){!function(){"use strict";var t,e,n,r,i,o=tinymce.util.Tools.resolve("tinymce.ThemeManager"),a=tinymce.util.Tools.resolve("tinymce.EditorManager"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(t){return!1!==l(t)},l=function(t){return t.getParam("menubar")},c=function(t){return t.getParam("toolbar_items_size")},f=function(t){return t.getParam("menu")},d=function(t){return!1===t.settings.skin},h=function(t){var e=t.getParam("resize","vertical");return!1===e?"none":"both"===e?"both":"vertical"},m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=tinymce.util.Tools.resolve("tinymce.ui.Factory"),p=tinymce.util.Tools.resolve("tinymce.util.I18n"),v=function(t){return t.fire("SkinLoaded")},b=function(t){return t.fire("ResizeEditor")},y=function(t){return t.fire("BeforeRenderUI")},w=function(t,e){return function(){var n=t.find(e)[0];n&&n.focus(!0)}},x=function(t,e){t.shortcuts.add("Alt+F9","",w(e,"menubar")),t.shortcuts.add("Alt+F10,F10","",w(e,"toolbar")),t.shortcuts.add("Alt+F11","",w(e,"elementpath")),e.on("cancel",function(){t.focus()})},C=tinymce.util.Tools.resolve("tinymce.geom.Rect"),R=tinymce.util.Tools.resolve("tinymce.util.Delay"),k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},_=function(t){return function(){return t}},S=_(!1),T=_(!0),E=function(){return N},N=(r={fold:function(t,e){return t()},is:S,isSome:S,isNone:T,getOr:n=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:n,orThunk:e,map:E,ap:E,each:function(){},bind:E,flatten:E,exists:S,forall:T,filter:E,equals:t=function(t){return t.isNone()},equals_:t,toArray:function(){return[]},toString:_("none()")},Object.freeze&&Object.freeze(r),r),D=function(t){var e=function(){return t},n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:T,isNone:S,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return D(e(t))},ap:function(e){return e.fold(E,function(e){return D(e(t))})},each:function(e){e(t)},bind:r,flatten:e,exists:r,forall:r,filter:function(e){return e(t)?i:N},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(S,function(e){return n(t,e)})},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},O={some:D,none:E,from:function(t){return null===t||void 0===t?N:D(t)}},A=function(t){return t?t.getRoot().uiContainer:null},P={getUiContainerDelta:function(t){var e=A(t);if(e&&"static"!==m.DOM.getStyle(e,"position",!0)){var n=m.DOM.getPos(e),r=e.scrollLeft-n.x,i=e.scrollTop-n.y;return O.some({x:r,y:i})}return O.none()},setUiContainer:function(t,e){var n=m.DOM.select(t.settings.ui_container)[0];e.getRoot().uiContainer=n},getUiContainer:A,inheritUiContainer:function(t,e){return e.uiContainer=A(t)}},M=function(t,e,n){var r,i=[];if(e)return s.each(e.split(/[ ,]/),function(e){var o,a=function(){var n=t.selection;e.settings.stateSelector&&n.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&n.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"===e?r=null:(r||(r={type:"buttongroup",items:[]},i.push(r)),t.buttons[e]&&(o=e,"function"==typeof(e=t.buttons[o])&&(e=e()),e.type=e.type||"button",e.size=n,e=g.create(e),r.items.push(e),t.initialized?a():t.on("init",a)))}),{type:"toolbar",layout:"flow",items:i}},H=M,B=function(t,e){var n=[];if(s.each(function(t){var e=t.getParam("toolbar");return!1===e?[]:s.isArray(e)?s.grep(e,function(t){return t.length>0}):function(t,e){for(var n=[],r=1;r<10;r++){var i=t["toolbar"+r];if(!i)break;n.push(i)}var o=t.toolbar?[t.toolbar]:[e];return n.length>0?n:o}(t.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")}(t),function(r){var i;(i=r)&&n.push(M(t,i,e))}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},I=m.DOM,W=function(t){return{left:t.x,top:t.y,width:t.w,height:t.h,right:t.x+t.w,bottom:t.y+t.h}},L=function(t,e){t.moveTo(e.left,e.top)},z=function(t,e,n,r,i,o){return o=W({x:e,y:n,w:o.w,h:o.h}),t&&(o=t({elementRect:W(r),contentAreaRect:W(i),panelRect:o})),o},F=function(t){var e,n=function(){return t.contextToolbars||[]},r=function(e,n){var r,i,o,a,u,l,c,f=function(t){return t.getParam("inline_toolbar_position_handler")}(t);if(!t.removed)if(e&&e.toolbar.panel){var d,h,m,g;c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],u=e.toolbar.panel,n&&u.show(),d=e.element,h=I.getPos(t.getContentAreaContainer()),m=t.dom.getRect(d),"BODY"===(g=t.dom.getRoot()).nodeName&&(m.x-=g.ownerDocument.documentElement.scrollLeft||g.scrollLeft,m.y-=g.ownerDocument.documentElement.scrollTop||g.scrollTop),m.x+=h.x,m.y+=h.y,o=m,i=I.getRect(u.getEl()),a=I.getRect(t.getContentAreaContainer()||t.getBody());var p=P.getUiContainerDelta(u).getOr({x:0,y:0});if(o.x+=p.x,o.y+=p.y,i.x+=p.x,i.y+=p.y,a.x+=p.x,a.y+=p.y,"inline"!==I.getStyle(e.element,"display",!0)){var v=e.element.getBoundingClientRect();o.w=v.width,o.h=v.height}t.inline||(a.w=t.getDoc().documentElement.offsetWidth),t.selection.controlSelection.isResizable(e.element)&&o.w<25&&(o=C.inflate(o,0,8)),r=C.findBestRelativePosition(i,o,a,c),o=C.clamp(o,a),r?(l=C.relativePosition(i,o,r),L(u,z(f,l.x,l.y,o,a,i))):(a.h+=i.h,(o=C.intersect(a,o))?(r=C.findBestRelativePosition(i,o,a,["bc-tc","bl-tl","br-tr"]))?(l=C.relativePosition(i,o,r),L(u,z(f,l.x,l.y,o,a,i))):L(u,z(f,o.x,o.y,o,a,i)):u.hide()),function(t,e,n){e=e?e.substr(0,2):"",s.each({t:"down",b:"up"},function(r,i){t.classes.toggle("arrow-"+r,n(i,e.substr(0,1)))}),s.each({l:"left",r:"right"},function(r,i){t.classes.toggle("arrow-"+r,n(i,e.substr(1,1)))})}(u,r,function(t,e){return t===e})}else!function(t){s.each(t.contextToolbars,function(t){t.panel&&t.panel.hide()})}(t)},i=function(e){return function(){R.requestAnimationFrame(function(){t.selection&&r(u(t.selection.getNode()),e)})}},o=function(n){var o;if(n.toolbar.panel)return n.toolbar.panel.show(),void r(n);o=g.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:H(t,n.toolbar.items),oncancel:function(){t.focus()}}),P.setUiContainer(t,o),function(n){if(!e){var r=i(!0),o=P.getUiContainer(n);e=t.selection.getScrollContainer()||t.getWin(),I.bind(e,"scroll",r),I.bind(o,"scroll",r),t.on("remove",function(){I.unbind(e,"scroll",r),I.unbind(o,"scroll",r)})}}(o),n.toolbar.panel=o,o.renderTo().reflow(),r(n)},a=function(){s.each(n(),function(t){t.panel&&t.panel.hide()})},u=function(e){var r,i,o,a=n();for(r=(o=t.$(e).parents().add(e)).length-1;r>=0;r--)for(i=a.length-1;i>=0;i--)if(a[i].predicate(o[r]))return{toolbar:a[i],element:o[r]};return null};t.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&R.setEditorTimeout(t,function(){var e;(e=u(t.selection.getNode()))?(a(),o(e)):a()})}),t.on("blur hide contextmenu",a),t.on("ObjectResizeStart",function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),t.on("ResizeEditor ResizeWindow",i(!0)),t.on("nodeChange",i(!1)),t.on("remove",function(){s.each(n(),function(t){t.panel&&t.panel.remove()}),t.contextToolbars={}}),t.shortcuts.add("ctrl+F9","",function(){var e=u(t.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})},U=function(t){return function(e){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(e)===t}},j=U("function"),V=U("number"),q=void 0===(i=Array.prototype.indexOf)?function(t,e){return G(t,e)}:function(t,e){return i.call(t,e)},Y=function(t,e){return K(t,e).isSome()},$=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i,t)}return r},X=function(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n,t)},J=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r,t)&&n.push(o)}return n},K=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n,t))return O.some(n);return O.none()},G=function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},Z=Array.prototype.push,Q=(Array.prototype.slice,j(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),tt=function(t,e){return"|"===t?{name:"|",item:{text:"|"}}:e?{name:t,item:e}:null},et=function(t){return t&&"|"===t.item.text},nt=function(t,e,n,r){var i,o,a,u;return e?(o=e[r],u=!0):o=Q[r],o&&(i={text:o.title},a=[],s.each((o.items||"").split(/[ ,]/),function(e){var n=tt(e,t[e]);n&&a.push(n)}),u||s.each(t,function(t,e){t.context!==r||function(t,e){return K(t,function(t){return t.name===e}).isSome()}(a,e)||("before"===t.separator&&a.push({name:"|",item:{text:"|"}}),t.prependToContext?a.unshift(tt(e,t)):a.push(tt(e,t)),"after"===t.separator&&a.push({name:"|",item:{text:"|"}}))}),i.menu=$(function(t,e){var n=J(t,function(t){return!1===e.hasOwnProperty(t.name)}),r=J(n,function(t,e,n){return!et(t)||!et(n[e-1])});return J(r,function(t,e,n){return!et(t)||e>0&&e<n.length-1})}(a,n),function(t){return t.item}),!i.menu.length)?null:i},rt=function(t){for(var e=[],n=function(t){var e,n=[],r=f(t);if(r)for(e in r)n.push(e);else for(e in Q)n.push(e);return n}(t),r=s.makeMap(function(t){return t.getParam("removed_menuitems","")}(t).split(/[ ,]/)),i=l(t),o="string"==typeof i?i.split(/[ ,]/):n,a=0;a<o.length;a++){var u=o[a],c=nt(t.menuItems,f(t),r,u);c&&e.push(c)}return e},it=m.DOM,ot=function(t){return{width:t.clientWidth,height:t.clientHeight}},at=function(t,e,n){var r,i,o,a;r=t.getContainer(),i=t.getContentAreaContainer().firstChild,o=ot(r),a=ot(i),null!==e&&(e=Math.max(function(t){return t.getParam("min_width",100,"number")}(t),e),e=Math.min(function(t){return t.getParam("max_width",65535,"number")}(t),e),it.setStyle(r,"width",e+(o.width-a.width)),it.setStyle(i,"width",e)),n=Math.max(function(t){return t.getParam("min_height",100,"number")}(t),n),n=Math.min(function(t){return t.getParam("max_height",65535,"number")}(t),n),it.setStyle(i,"height",n),b(t)},st=at,ut=function(t,e,n){var r=t.getContentAreaContainer();at(t,r.clientWidth+e,r.clientHeight+n)},lt=tinymce.util.Tools.resolve("tinymce.Env"),ct=function(t,e,n){var r,i=t.settings[n];i&&i((r=e.getEl("body"),{element:function(){return r}}))},ft=function(t,e,n){return function(r){var i=r.control,o=i.parents().filter("panel")[0],a=o.find("#"+e)[0],u=function(t,e){return s.grep(t,function(t){return t.name===e})[0]}(n,e);!function(t,e,n){s.each(n,function(n){var r=e.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==t&&(ct(n,r,"onhide"),r.visible(!1))})}(e,o,n),i.parent().items().each(function(t){t.active(!1)}),a&&a.visible()?(ct(u,a,"onhide"),a.hide(),i.active(!1)):(a?(a.show(),ct(u,a,"onshow")):(a=g.create({type:"container",name:e,layout:"stack",classes:"sidebar-panel",html:""}),o.prepend(a),ct(u,a,"onrender"),ct(u,a,"onshow")),i.active(!0)),b(t)}},dt=function(t){return!(lt.ie&&!(lt.ie>=11)||!t.sidebars)&&t.sidebars.length>0},ht=function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:s.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:ft(t,e.name,t.sidebars)}})}]}},mt=function(t){var e=function(){t._skinLoaded=!0,v(t)};return function(){t.initialized?e():t.on("init",e)}},gt=m.DOM,pt=function(t){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:t,html:""}},vt=function(t,e,n){var r,i,o;if(!1===d(t)&&n.skinUiCss?gt.styleSheetLoader.load(n.skinUiCss,mt(t)):mt(t)(),r=e.panel=g.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===u(t)?null:{type:"menubar",border:"0 0 1 0",items:rt(t)},B(t,c(t))]},dt(t)?function(t){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[pt("0"),ht(t)]}}(t):pt("1 0 0 0")]}),P.setUiContainer(t,r),"none"!==h(t)&&(i={type:"resizehandle",direction:h(t),onResizeStart:function(){var e=t.getContentAreaContainer().firstChild;o={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"===h(t)?st(t,o.width+e.deltaX,o.height+e.deltaY):st(t,null,o.height+e.deltaY)}}),function(t){return t.getParam("statusbar",!0,"boolean")}(t)){var a=p.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),s=function(t){return t.getParam("branding",!0,"boolean")}(t)?{type:"label",classes:"branding",html:" "+a}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:t},i,s]})}return y(t),t.on("SwitchMode",function(t){return function(e){t.find("*").disabled("readonly"===e.mode)}}(r)),r.renderBefore(n.targetNode).reflow(),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly"),n.width&&gt.setStyle(r.getEl(),"width",n.width),t.on("remove",function(){r.remove(),r=null}),x(t,r),F(t),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},bt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),yt=0,wt={id:function(){return"mceu_"+yt++},create:function(t,e,n){var r=document.createElement(t);return m.DOM.setAttribs(r,e),"string"==typeof n?r.innerHTML=n:s.each(n,function(t){t.nodeType&&r.appendChild(t)}),r},createFragment:function(t){return m.DOM.createFragment(t)},getWindowSize:function(){return m.DOM.getViewPort()},getSize:function(t){var e,n;if(t.getBoundingClientRect){var r=t.getBoundingClientRect();e=Math.max(r.width||r.right-r.left,t.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,t.offsetHeight)}else e=t.offsetWidth,n=t.offsetHeight;return{width:e,height:n}},getPos:function(t,e){return m.DOM.getPos(t,e||wt.getContainer())},getContainer:function(){return lt.container?lt.container:document.body},getViewPort:function(t){return m.DOM.getViewPort(t)},get:function(t){return document.getElementById(t)},addClass:function(t,e){return m.DOM.addClass(t,e)},removeClass:function(t,e){return m.DOM.removeClass(t,e)},hasClass:function(t,e){return m.DOM.hasClass(t,e)},toggleClass:function(t,e,n){return m.DOM.toggleClass(t,e,n)},css:function(t,e,n){return m.DOM.setStyle(t,e,n)},getRuntimeStyle:function(t,e){return m.DOM.getStyle(t,e,!0)},on:function(t,e,n,r){return m.DOM.bind(t,e,n,r)},off:function(t,e,n){return m.DOM.unbind(t,e,n)},fire:function(t,e,n){return m.DOM.fire(t,e,n)},innerHtml:function(t,e){m.DOM.setHTML(t,e)}},xt=function(t){return"static"===wt.getRuntimeStyle(t,"position")},Ct=function(t){return t.state.get("fixed")};function Rt(t,e,n){var r,i,o,a,s,u,l,c,f,d;return f=kt(),o=(i=wt.getPos(e,P.getUiContainer(t))).x,a=i.y,Ct(t)&&xt(document.body)&&(o-=f.x,a-=f.y),r=t.getEl(),s=(d=wt.getSize(r)).width,u=d.height,l=(d=wt.getSize(e)).width,c=d.height,"b"===(n=(n||"").split(""))[0]&&(a+=c),"r"===n[1]&&(o+=l),"c"===n[0]&&(a+=Math.round(c/2)),"c"===n[1]&&(o+=Math.round(l/2)),"b"===n[3]&&(a-=u),"r"===n[4]&&(o-=s),"c"===n[3]&&(a-=Math.round(u/2)),"c"===n[4]&&(o-=Math.round(s/2)),{x:o,y:a,w:s,h:u}}var kt=function(){var t=window;return{x:Math.max(t.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),y:Math.max(t.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop),w:t.innerWidth||document.documentElement.clientWidth,h:t.innerHeight||document.documentElement.clientHeight}},_t=function(t){var e=P.getUiContainer(t);return e&&!Ct(t)?function(t){return{x:0,y:0,w:t.scrollWidth-1,h:t.scrollHeight-1}}(e):kt()},St={testMoveRel:function(t,e){for(var n=_t(this),r=0;r<e.length;r++){var i=Rt(this,t,e[r]);if(Ct(this)){if(i.x>0&&i.x+i.w<n.w&&i.y>0&&i.y+i.h<n.h)return e[r]}else if(i.x>n.x&&i.x+i.w<n.w+n.x&&i.y>n.y&&i.y+i.h<n.h+n.y)return e[r]}return e[0]},moveRel:function(t,e){"string"!=typeof e&&(e=this.testMoveRel(t,e));var n=Rt(this,t,e);return this.moveTo(n.x,n.y)},moveBy:function(t,e){var n=this.layoutRect();return this.moveTo(n.x+t,n.y+e),this},moveTo:function(t,e){function n(t,e,n){return t<0?0:t+n>e&&(t=e-n)<0?0:t}if(this.settings.constrainToViewport){var r=_t(this),i=this.layoutRect();t=n(t,r.w+r.x,i.w),e=n(e,r.h+r.y,i.h)}var o=P.getUiContainer(this);return o&&xt(o)&&!Ct(this)&&(t-=o.scrollLeft,e-=o.scrollTop),o&&(t+=1,e+=1),this.state.get("rendered")?this.layoutRect({x:t,y:e}).repaint():(this.settings.x=t,this.settings.y=e),this.fire("move",{x:t,y:e}),this}},Tt=tinymce.util.Tools.resolve("tinymce.util.Class"),Et=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Nt=function(t){var e;if(t)return"number"==typeof t?{top:t=t||0,left:t,bottom:t,right:t}:(1===(e=(t=t.split(" ")).length)?t[1]=t[2]=t[3]=t[0]:2===e?(t[2]=t[0],t[3]=t[1]):3===e&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0})},Dt=function(t,e){function n(e){var n=parseFloat(function(e){var n=t.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(t,null);return r?(e=e.replace(/[A-Z]/g,function(t){return"-"+t}),r.getPropertyValue(e)):null}return t.currentStyle[e]}(e));return isNaN(n)?0:n}return{top:n(e+"TopWidth"),right:n(e+"RightWidth"),bottom:n(e+"BottomWidth"),left:n(e+"LeftWidth")}};function Ot(){}function At(t){this.cls=[],this.cls._map={},this.onchange=t||Ot,this.prefix=""}s.extend(At.prototype,{add:function(t){return t&&!this.contains(t)&&(this.cls._map[t]=!0,this.cls.push(t),this._change()),this},remove:function(t){if(this.contains(t)){var e=void 0;for(e=0;e<this.cls.length&&this.cls[e]!==t;e++);this.cls.splice(e,1),delete this.cls._map[t],this._change()}return this},toggle:function(t,e){var n=this.contains(t);return n!==e&&(n?this.remove(t):this.add(t),this._change()),this},contains:function(t){return!!this.cls._map[t]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),At.prototype.toString=function(){var t;if(this.clsValue)return this.clsValue;t="";for(var e=0;e<this.cls.length;e++)e>0&&(t+=" "),t+=this.prefix+this.cls[e];return t};var Pt,Mt,Ht,Bt=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,It=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Wt=/^\s*|\s*$/g,Lt=Tt.extend({init:function(t){var e=this.match;function n(t,n,i){var o;function a(t){t&&n.push(t)}return a(function(t){if(t)return t=t.toLowerCase(),function(e){return"*"===t||e.type===t}}((o=Bt.exec(t.replace(Wt,"")))[1])),a(function(t){if(t)return function(e){return e._name===t}}(o[2])),a(function(t){if(t)return t=t.split("."),function(e){for(var n=t.length;n--;)if(!e.classes.contains(t[n]))return!1;return!0}}(o[3])),a(function(t,e,n){if(t)return function(r){var i=r[t]?r[t]():"";return e?"="===e?i===n:"*="===e?i.indexOf(n)>=0:"~="===e?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===e?i!==n:"^="===e?0===i.indexOf(n):"$="===e&&i.substr(i.length-n.length)===n:!!n}}(o[4],o[5],o[6])),a(function(t){var n;if(t)return(t=/(?:not\((.+)\))|(.+)/i.exec(t))[1]?(n=r(t[1],[]),function(t){return!e(t,n)}):(t=t[2],function(e,n,r){return"first"===t?0===n:"last"===t?n===r-1:"even"===t?n%2==0:"odd"===t?n%2==1:!!e[t]&&e[t]()})}(o[7])),n.pseudo=!!o[7],n.direct=i,n}function r(t,e){var i,o,a,s=[];do{if(It.exec(""),(o=It.exec(t))&&(t=o[3],s.push(o[1]),o[2])){i=o[3];break}}while(o);for(i&&r(i,e),t=[],a=0;a<s.length;a++)">"!==s[a]&&t.push(n(s[a],[],">"===s[a-1]));return e.push(t),e}this._selectors=r(t,[])},match:function(t,e){var n,r,i,o,a,s,u,l,c,f,d,h,m;for(n=0,r=(e=e||this._selectors).length;n<r;n++){for(m=t,h=0,i=(o=(a=e[n]).length)-1;i>=0;i--)for(l=a[i];m;){if(l.pseudo)for(c=f=(d=m.parent().items()).length;c--&&d[c]!==m;);for(s=0,u=l.length;s<u;s++)if(!l[s](m,c,f)){s=u+1;break}if(s===u){h++;break}if(i===o-1)break;m=m.parent()}if(h===o)return!0}return!1},find:function(t){var e,n,r=[],i=this._selectors;function o(t,e,n){var i,a,s,u,l,c=e[n];for(i=0,a=t.length;i<a;i++){for(l=t[i],s=0,u=c.length;s<u;s++)if(!c[s](l,i,a)){s=u+1;break}if(s===u)n===e.length-1?r.push(l):l.items&&o(l.items(),e,n+1);else if(c.direct)return;l.items&&o(l.items(),e,n)}}if(t.items){for(e=0,n=i.length;e<n;e++)o(t.items(),i[e],0);n>1&&(r=function(t){for(var e,n=[],r=t.length;r--;)(e=t[r]).__checked||(n.push(e),e.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return Pt||(Pt=Lt.Collection),new Pt(r)}}),zt=Array.prototype.push,Ft=Array.prototype.slice;Ht={length:0,init:function(t){t&&this.add(t)},add:function(t){return s.isArray(t)?zt.apply(this,t):t instanceof Mt?this.add(t.toArray()):zt.call(this,t),this},set:function(t){var e,n=this.length;for(this.length=0,this.add(t),e=this.length;e<n;e++)delete this[e];return this},filter:function(t){var e,n,r,i,o=[];for("string"==typeof t?(t=new Lt(t),i=function(e){return t.match(e)}):i=t,e=0,n=this.length;e<n;e++)i(r=this[e])&&o.push(r);return new Mt(o)},slice:function(){return new Mt(Ft.apply(this,arguments))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},each:function(t){return s.each(this,t),this},toArray:function(){return s.toArray(this)},indexOf:function(t){for(var e=this.length;e--&&this[e]!==t;);return e},reverse:function(){return new Mt(s.toArray(this).reverse())},hasClass:function(t){return!!this[0]&&this[0].classes.contains(t)},prop:function(t,e){var n;return void 0!==e?(this.each(function(n){n[t]&&n[t](e)}),this):(n=this[0])&&n[t]?n[t]():void 0},exec:function(t){var e=s.toArray(arguments).slice(1);return this.each(function(n){n[t]&&n[t].apply(n,e)}),this},remove:function(){for(var t=this.length;t--;)this[t].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}},s.each("fire on off show hide append prepend before after reflow".split(" "),function(t){Ht[t]=function(){var e=s.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,e)}),this}}),s.each("text name disabled active selected checked visible parent value data".split(" "),function(t){Ht[t]=function(e){return this.prop(t,e)}}),Mt=Tt.extend(Ht),Lt.Collection=Mt;var Ut=Mt,jt=function(t){this.create=t.create};jt.create=function(t,e){return new jt({create:function(n,r){var i,o=function(t){n.set(r,t.value)};return n.on("change:"+r,function(n){t.set(e,n.value)}),t.on("change:"+e,o),(i=n._bindings)||(i=n._bindings=[],n.on("destroy",function(){for(var t=i.length;t--;)i[t]()})),i.push(function(){t.off("change:"+e,o)}),t.get(e)}})};var Vt=tinymce.util.Tools.resolve("tinymce.util.Observable");function qt(t){return t.nodeType>0}var Yt,$t,Xt=Tt.extend({Mixins:[Vt],init:function(t){var e,n;for(e in t=t||{})(n=t[e])instanceof jt&&(t[e]=n.create(this,e));this.data=t},set:function(t,e){var n,r,i=this.data[t];if(e instanceof jt&&(e=e.create(this,t)),"object"==typeof t){for(n in t)this.set(n,t[n]);return this}return function t(e,n){var r,i;if(e===n)return!0;if(null===e||null===n)return e===n;if("object"!=typeof e||"object"!=typeof n)return e===n;if(s.isArray(n)){if(e.length!==n.length)return!1;for(r=e.length;r--;)if(!t(e[r],n[r]))return!1}if(qt(e)||qt(n))return e===n;for(r in i={},n){if(!t(e[r],n[r]))return!1;i[r]=!0}for(r in e)if(!i[r]&&!t(e[r],n[r]))return!1;return!0}(i,e)||(this.data[t]=e,r={target:this,name:t,value:e,oldValue:i},this.fire("change:"+t,r),this.fire("change",r)),this},get:function(t){return this.data[t]},has:function(t){return t in this.data},bind:function(t){return jt.create(this,t)},destroy:function(){this.fire("destroy")}}),Jt={},Kt={add:function(t){var e=t.parent();if(e){if(!e._layout||e._layout.isNative())return;Jt[e._id]||(Jt[e._id]=e),Yt||(Yt=!0,R.requestAnimationFrame(function(){var t,e;for(t in Yt=!1,Jt)(e=Jt[t]).state.get("rendered")&&e.reflow();Jt={}},document.body))}},remove:function(t){Jt[t._id]&&delete Jt[t._id]}},Gt="onmousewheel"in document,Zt=!1,Qt=0,te={Statics:{classPrefix:"mce-"},isRtl:function(){return $t.rtl},classPrefix:"mce-",init:function(t){var e,n,r=this;function i(t){var e;for(t=t.split(" "),e=0;e<t.length;e++)r.classes.add(t[e])}r.settings=t=s.extend({},r.Defaults,t),r._id=t.id||"mceu_"+Qt++,r._aria={role:t.role},r._elmCache={},r.$=bt,r.state=new Xt({visible:!0,active:!1,disabled:!1,value:""}),r.data=new Xt(t.data),r.classes=new At(function(){r.state.get("rendered")&&(r.getEl().className=this.toString())}),r.classes.prefix=r.classPrefix,(e=t.classes)&&(r.Defaults&&(n=r.Defaults.classes)&&e!==n&&i(n),i(e)),s.each("title text name visible disabled active value".split(" "),function(e){e in t&&r[e](t[e])}),r.on("click",function(){if(r.disabled())return!1}),r.settings=t,r.borderBox=Nt(t.border),r.paddingBox=Nt(t.padding),r.marginBox=Nt(t.margin),t.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var t=P.getUiContainer(this);return t||wt.getContainer()},getParentCtrl:function(t){for(var e,n=this.getRoot().controlIdLookup;t&&n&&!(e=n[t.id]);)t=t.parentNode;return e},initLayoutRect:function(){var t,e,n,r,i,o,a,s,u,l,c=this.settings,f=this.getEl();t=this.borderBox=this.borderBox||Dt(f,"border"),this.paddingBox=this.paddingBox||Dt(f,"padding"),this.marginBox=this.marginBox||Dt(f,"margin"),l=wt.getSize(f),s=c.minWidth,u=c.minHeight,i=s||l.width,o=u||l.height,n=c.width,r=c.height,a=void 0!==(a=c.autoResize)?a:!n&&!r,n=n||i,r=r||o;var d=t.left+t.right,h=t.top+t.bottom,m=c.maxWidth||65535,g=c.maxHeight||65535;return this._layoutRect=e={x:c.x||0,y:c.y||0,w:n,h:r,deltaW:d,deltaH:h,contentW:n-d,contentH:r-h,innerW:n-d,innerH:r-h,startMinWidth:s||0,startMinHeight:u||0,minW:Math.min(i,m),minH:Math.min(o,g),maxW:m,maxH:g,autoResize:a,scrollW:0},this._lastLayoutRect={},e},layoutRect:function(t){var e,n,r,i,o,a=this._layoutRect;return a||(a=this.initLayoutRect()),t?(r=a.deltaW,i=a.deltaH,void 0!==t.x&&(a.x=t.x),void 0!==t.y&&(a.y=t.y),void 0!==t.minW&&(a.minW=t.minW),void 0!==t.minH&&(a.minH=t.minH),void 0!==(n=t.w)&&(n=(n=n<a.minW?a.minW:n)>a.maxW?a.maxW:n,a.w=n,a.innerW=n-r),void 0!==(n=t.h)&&(n=(n=n<a.minH?a.minH:n)>a.maxH?a.maxH:n,a.h=n,a.innerH=n-i),void 0!==(n=t.innerW)&&(n=(n=n<a.minW-r?a.minW-r:n)>a.maxW-r?a.maxW-r:n,a.innerW=n,a.w=n+r),void 0!==(n=t.innerH)&&(n=(n=n<a.minH-i?a.minH-i:n)>a.maxH-i?a.maxH-i:n,a.innerH=n,a.h=n+i),void 0!==t.contentW&&(a.contentW=t.contentW),void 0!==t.contentH&&(a.contentH=t.contentH),(e=this._lastLayoutRect).x===a.x&&e.y===a.y&&e.w===a.w&&e.h===a.h||((o=$t.repaintControls)&&o.map&&!o.map[this._id]&&(o.push(this),o.map[this._id]=!0),e.x=a.x,e.y=a.y,e.w=a.w,e.h=a.h),this):a},repaint:function(){var t,e,n,r,i,o,a,s,u,l;u=document.createRange?function(t){return t}:Math.round,t=this.getEl().style,r=this._layoutRect,s=this._lastRepaintRect||{},o=(i=this.borderBox).left+i.right,a=i.top+i.bottom,r.x!==s.x&&(t.left=u(r.x)+"px",s.x=r.x),r.y!==s.y&&(t.top=u(r.y)+"px",s.y=r.y),r.w!==s.w&&(l=u(r.w-o),t.width=(l>=0?l:0)+"px",s.w=r.w),r.h!==s.h&&(l=u(r.h-a),t.height=(l>=0?l:0)+"px",s.h=r.h),this._hasBody&&r.innerW!==s.innerW&&(l=u(r.innerW),(n=this.getEl("body"))&&((e=n.style).width=(l>=0?l:0)+"px"),s.innerW=r.innerW),this._hasBody&&r.innerH!==s.innerH&&(l=u(r.innerH),(n=n||this.getEl("body"))&&((e=e||n.style).height=(l>=0?l:0)+"px"),s.innerH=r.innerH),this._lastRepaintRect=s,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,wt.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(t,e){var n=this;return ee(n).on(t,function(t){var e,r;return"string"!=typeof t?t:function(i){return e||n.parentsAndSelf().each(function(n){var i=n.settings.callbacks;if(i&&(e=i[t]))return r=n,!1}),e?e.call(r,i):(i.action=t,void this.fire("execute",i))}}(e)),n},off:function(t,e){return ee(this).off(t,e),this},fire:function(t,e,n){if((e=e||{}).control||(e.control=this),e=ee(this).fire(t,e),!1!==n&&this.parent)for(var r=this.parent();r&&!e.isPropagationStopped();)r.fire(t,e,!1),r=r.parent();return e},hasEventListeners:function(t){return ee(this).has(t)},parents:function(t){var e,n=new Ut;for(e=this.parent();e;e=e.parent())n.add(e);return t&&(n=n.filter(t)),n},parentsAndSelf:function(t){return new Ut(this).add(this.parents(t))},next:function(){var t=this.parent().items();return t[t.indexOf(this)+1]},prev:function(){var t=this.parent().items();return t[t.indexOf(this)-1]},innerHtml:function(t){return this.$el.html(t),this},getEl:function(t){var e=t?this._id+"-"+t:this._id;return this._elmCache[e]||(this._elmCache[e]=bt("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(t){}return this},blur:function(){return this.getEl().blur(),this},aria:function(t,e){var n=this.getEl(this.ariaTarget);return void 0===e?this._aria[t]:(this._aria[t]=e,this.state.get("rendered")&&n.setAttribute("role"===t?t:"aria-"+t,e),this)},encode:function(t,e){return!1!==e&&(t=this.translate(t)),(t||"").replace(/[&<>"]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},translate:function(t){return $t.translate?$t.translate(t):t},before:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this),!0),this},after:function(t){var e=this.parent();return e&&e.insert(t,e.items().indexOf(this)),this},remove:function(){var t,e,n=this,r=n.getEl(),i=n.parent();if(n.items){var o=n.items().toArray();for(e=o.length;e--;)o[e].remove()}i&&i.items&&(t=[],i.items().each(function(e){e!==n&&t.push(e)}),i.items().set(t),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&bt(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(t){return bt(t).before(this.renderHtml()),this.postRender(),this},renderTo:function(t){return bt(t||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var t,e,n,r,i,o=this,a=o.settings;for(r in o.$el=bt(o.getEl()),o.state.set("rendered",!0),a)0===r.indexOf("on")&&o.on(r.substr(2),a[r]);if(o._eventsRoot){for(n=o.parent();!i&&n;n=n.parent())i=n._eventsRoot;if(i)for(r in i._nativeEvents)o._nativeEvents[r]=!0}ne(o),a.style&&(t=o.getEl())&&(t.setAttribute("style",a.style),t.style.cssText=a.style),o.settings.border&&(e=o.borderBox,o.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left}));var s=o.getRoot();for(var u in s.controlIdLookup||(s.controlIdLookup={}),s.controlIdLookup[o._id]=o,o._aria)o.aria(u,o._aria[u]);!1===o.state.get("visible")&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",function(t){var e,n=t.value;o.state.get("rendered")&&(o.getEl().style.display=!1===n?"none":"",o.getEl().getBoundingClientRect()),(e=o.parent())&&(e._lastRect=null),o.fire(n?"show":"hide"),Kt.add(o)}),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(t){var e,n,r,i,o,a,s=this.getEl(),u=s.parentNode,l=function(t,e){var n,r,i=t;for(n=r=0;i&&i!==e&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(s,u);return e=l.x,n=l.y,r=s.offsetWidth,i=s.offsetHeight,o=u.clientWidth,a=u.clientHeight,"end"===t?(e-=o-r,n-=a-i):"center"===t&&(e-=o/2-r/2,n-=a/2-i/2),u.scrollLeft=e,u.scrollTop=n,this},getRoot:function(){for(var t,e=this,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var r=n.length;r--;)n[r].rootControl=t;return t},reflow:function(){Kt.remove(this);var t=this.parent();return t&&t._layout&&!t._layout.isNative()&&t.reflow(),this}};function ee(t){return t._eventDispatcher||(t._eventDispatcher=new Et({scope:t,toggleEvent:function(e,n){n&&Et.isNative(e)&&(t._nativeEvents||(t._nativeEvents={}),t._nativeEvents[e]=!0,t.state.get("rendered")&&ne(t))}})),t._eventDispatcher}function ne(t){var e,n,r,i,o,a;function s(e){var n=t.getParentCtrl(e.target);n&&n.fire(e.type,e)}function u(){var t=i._lastHoverCtrl;t&&(t.fire("mouseleave",{target:t.getEl()}),t.parents().each(function(t){t.fire("mouseleave",{target:t.getEl()})}),i._lastHoverCtrl=null)}function l(e){var n,r,o,a=t.getParentCtrl(e.target),s=i._lastHoverCtrl,u=0;if(a!==s){if(i._lastHoverCtrl=a,(r=a.parents().toArray().reverse()).push(a),s){for((o=s.parents().toArray().reverse()).push(s),u=0;u<o.length&&r[u]===o[u];u++);for(n=o.length-1;n>=u;n--)(s=o[n]).fire("mouseleave",{target:s.getEl()})}for(n=u;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function c(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=t.fire("wheel",e)}if(o=t._nativeEvents){for((r=t.parents().toArray()).unshift(t),e=0,n=r.length;!i&&e<n;e++)i=r[e]._eventsRoot;for(i||(i=r[r.length-1]||t),t._eventsRoot=i,n=e,e=0;e<n;e++)r[e]._eventsRoot=i;var f=i._delegates;for(a in f||(f=i._delegates={}),o){if(!o)return!1;"wheel"!==a||Zt?("mouseenter"===a||"mouseleave"===a?i._hasMouseEnter||(bt(i.getEl()).on("mouseleave",u).on("mouseover",l),i._hasMouseEnter=1):f[a]||(bt(i.getEl()).on(a,s),f[a]=!0),o[a]=!1):Gt?bt(t.getEl()).on("mousewheel",c):bt(t.getEl()).on("DOMMouseScroll",c)}}}s.each("text title visible disabled active value".split(" "),function(t){te[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}});var re=$t=Tt.extend(te),ie=function(t){return!!t.getAttribute("data-mce-tabstop")};function oe(t){var e,n,r=t.root;function i(t){return t&&1===t.nodeType}try{e=document.activeElement}catch(t){e=document.body}function o(t){return i(t=t||e)?t.getAttribute("role"):null}function a(t){for(var n,r=t||e;r=r.parentNode;)if(n=o(r))return n}function s(t){var n=e;if(i(n))return n.getAttribute("aria-"+t)}function u(t){var e=t.tagName.toUpperCase();return"INPUT"===e||"TEXTAREA"===e||"SELECT"===e}function l(t){var e=[];return function t(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(t){return!(!u(t)||t.hidden)||!!ie(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(t))})(n)&&e.push(n);for(var r=0;r<n.childNodes.length;r++)t(n.childNodes[r])}}(t||r.getEl()),e}function c(t){var e,r;(r=(t=t||n).parents().toArray()).unshift(t);for(var i=0;i<r.length&&!(e=r[i]).settings.ariaRoot;i++);return e}function f(t,e){return t<0?t=e.length-1:t>=e.length&&(t=0),e[t]&&e[t].focus(),t}function d(t,n){var r=-1,i=c();n=n||l(i.getEl());for(var o=0;o<n.length;o++)n[o]===e&&(r=o);r+=t,i.lastAriaIndex=f(r,n)}function h(){"tablist"===a()?d(-1,l(e.parentNode)):n.parent().submenu?v():d(-1)}function m(){var t=o(),n=a();"tablist"===n?d(1,l(e.parentNode)):"menuitem"===t&&"menu"===n&&s("haspopup")?b():d(1)}function g(){d(-1)}function p(){var t=o(),e=a();"menuitem"===t&&"menubar"===e?b():"button"===t&&s("haspopup")?b({key:"down"}):d(1)}function v(){n.fire("cancel")}function b(t){t=t||{},n.fire("click",{target:e,aria:t})}return n=r.getParentCtrl(e),r.on("keydown",function(t){function r(t,n){u(e)||ie(e)||"slider"!==o(e)&&!1!==n(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:r(t,h);break;case 39:r(t,m);break;case 38:r(t,g);break;case 40:r(t,p);break;case 27:v();break;case 14:case 13:case 32:r(t,b);break;case 9:!function(t){if("tablist"===a()){var e=l(n.getEl("body"))[0];e&&e.focus()}else d(t.shiftKey?-1:1)}(t),t.preventDefault()}}),r.on("focusin",function(t){e=t.target,n=t.control}),{focusFirst:function(t){var e=c(t),n=l(e.getEl());e.settings.ariaRemember&&"lastAriaIndex"in e?f(e.lastAriaIndex,n):f(0,n)}}}var ae={},se=re.extend({init:function(t){var e=this;e._super(t),(t=e.settings).fixed&&e.state.set("fixed",!0),e._items=new Ut,e.isRtl()&&e.classes.add("rtl"),e.bodyClasses=new At(function(){e.state.get("rendered")&&(e.getEl("body").className=this.toString())}),e.bodyClasses.prefix=e.classPrefix,e.classes.add("container"),e.bodyClasses.add("container-body"),t.containerCls&&e.classes.add(t.containerCls),e._layout=g.create((t.layout||"")+"layout"),e.settings.items?e.add(e.settings.items):e.add(e.render()),e._hasBody=!0},items:function(){return this._items},find:function(t){return(t=ae[t]=ae[t]||new Lt(t)).find(this)},add:function(t){return this.items().add(this.create(t)).parent(this),this},focus:function(t){var e,n,r;if(!t||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return r=this.find("*"),this.statusbar&&r.add(this.statusbar.items()),r.each(function(t){if(t.settings.autofocus)return e=null,!1;t.canFocus&&(e=e||t)}),e&&e.focus(),this;n.focusFirst(this)},replace:function(t,e){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===t){r[i]=e;break}i>=0&&((n=e.getEl())&&n.parentNode.removeChild(n),(n=t.getEl())&&n.parentNode.removeChild(n)),e.parent(this)},create:function(t){var e,n=this,r=[];return s.isArray(t)||(t=[t]),s.each(t,function(t){t&&(t instanceof re||("string"==typeof t&&(t={type:t}),e=s.extend({},n.settings.defaults,t),t.type=e.type=e.type||t.type||n.settings.defaultType||(e.defaults?e.defaults.type:null),t=g.create(e)),r.push(t))}),r},renderNew:function(){var t=this;return t.items().each(function(e,n){var r;e.parent(t),e.state.get("rendered")||((r=t.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?bt(r.childNodes[n]).before(e.renderHtml()):bt(r).append(e.renderHtml()),e.postRender(),Kt.add(e))}),t._layout.applyClasses(t.items().filter(":visible")),t._lastRect=null,t},append:function(t){return this.add(t).renderNew()},prepend:function(t){return this.items().set(this.create(t).concat(this.items().toArray())),this.renderNew()},insert:function(t,e,n){var r,i,o;return t=this.create(t),r=this.items(),!n&&e<r.length-1&&(e+=1),e>=0&&e<r.length&&(i=r.slice(0,e).toArray(),o=r.slice(e).toArray(),r.set(i.concat(t,o))),this.renderNew()},fromJSON:function(t){for(var e in t)this.find("#"+e).value(t[e]);return this},toJSON:function(){var t={};return this.find("*").each(function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)}),t},renderHtml:function(){var t=this._layout,e=this.settings.role;return this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(e?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"},postRender:function(){var t;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(t=this.borderBox,this.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),this.parent()||(this.keyboardNav=oe({root:this})),this},initLayoutRect:function(){var t=this._super();return this._layout.recalc(this),t},recalc:function(){var t=this._layoutRect,e=this._lastRect;if(!e||e.w!==t.w||e.h!==t.h)return this._layout.recalc(this),t=this.layoutRect(),this._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(Kt.remove(this),this.visible()){for(re.repaintControls=[],re.repaintControls.map={},this.recalc(),t=re.repaintControls.length;t--;)re.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),re.repaintControls=[]}return this}});function ue(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function le(t,e){var n,r,i,o,a,s,u,l=e.document||document;e=e||{};var c=l.getElementById(e.handle||t);i=function(t){var i,f,d=function(t){var e,n,r,i,o,a,s,u,l=Math.max;return e=t.documentElement,n=t.body,r=l(e.scrollWidth,n.scrollWidth),i=l(e.clientWidth,n.clientWidth),o=l(e.offsetWidth,n.offsetWidth),a=l(e.scrollHeight,n.scrollHeight),s=l(e.clientHeight,n.clientHeight),u=l(e.offsetHeight,n.offsetHeight),{width:r<o?i:r,height:a<u?s:a}}(l);ue(t),t.preventDefault(),r=t.button,i=c,s=t.screenX,u=t.screenY,f=window.getComputedStyle?window.getComputedStyle(i,null).getPropertyValue("cursor"):i.runtimeStyle.cursor,n=bt("<div></div>").css({position:"absolute",top:0,left:0,width:d.width,height:d.height,zIndex:2147483647,opacity:1e-4,cursor:f}).appendTo(l.body),bt(l).on("mousemove touchmove",a).on("mouseup touchend",o),e.start(t)},a=function(t){if(ue(t),t.button!==r)return o(t);t.deltaX=t.screenX-s,t.deltaY=t.screenY-u,t.preventDefault(),e.drag(t)},o=function(t){ue(t),bt(l).off("mousemove touchmove",a).off("mouseup touchend",o),n.remove(),e.stop&&e.stop(t)},this.destroy=function(){bt(c).off()},bt(c).on("mousedown touchstart",i)}var ce,fe,de,he,me={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var t=this,e=2;function n(){var n,r,i;function o(i,o,a,s,u,l){var c,f,d,h,m,g,p,v;if(f=t.getEl("scroll"+i)){if(p=o.toLowerCase(),v=a.toLowerCase(),bt(t.getEl("absend")).css(p,t.layoutRect()[s]-1),!u)return void bt(f).css("display","none");bt(f).css("display","block"),c=t.getEl("body"),d=t.getEl("scroll"+i+"t"),h=c["client"+a]-2*e,m=(h-=n&&r?f["client"+l]:0)/c["scroll"+a],(g={})[p]=c["offset"+o]+e,g[v]=h,bt(f).css(g),(g={})[p]=c["scroll"+o]*m,g[v]=h*m,bt(d).css(g)}}i=t.getEl("body"),n=i.scrollWidth>i.clientWidth,r=i.scrollHeight>i.clientHeight,o("h","Left","Width","contentW",n,"Height"),o("v","Top","Height","contentH",r,"Width")}t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function n(n,r,i,o,a){var s,u=t._id+"-scroll"+n,l=t.classPrefix;bt(t.getEl()).append('<div id="'+u+'" class="'+l+"scrollbar "+l+"scrollbar-"+n+'"><div id="'+u+'t" class="'+l+'scrollbar-thumb"></div></div>'),t.draghelper=new le(u+"t",{start:function(){s=t.getEl("body")["scroll"+r],bt("#"+u).addClass(l+"active")},drag:function(u){var l,c,f,d,h=t.layoutRect();c=h.contentW>h.innerW,f=h.contentH>h.innerH,d=t.getEl("body")["client"+i]-2*e,l=(d-=c&&f?t.getEl("scroll"+n)["client"+a]:0)/t.getEl("body")["scroll"+i],t.getEl("body")["scroll"+r]=s+u["delta"+o]/l},stop:function(){bt("#"+u).removeClass(l+"active")}})}t.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),t.on("wheel",function(e){var r=t.getEl("body");r.scrollLeft+=10*(e.deltaX||0),r.scrollTop+=10*e.deltaY,n()}),bt(t.getEl("body")).on("scroll",n)),n())}},ge=se.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[me],renderHtml:function(){var t=this._layout,e=this.settings.html;return this.preRender(),t.preRender(this),void 0===e?e='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+t.renderHtml(this)+"</div>":("function"==typeof e&&(e=e.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+e+"</div>"}}),pe={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,e){if(t<=1||e<=1){var n=wt.getWindowSize();t=t<=1?t*n.w:t,e=e<=1?e*n.h:e}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:e,w:t,h:e}).reflow()},resizeBy:function(t,e){var n=this.layoutRect();return this.resizeTo(n.w+t,n.h+e)}},ve=[],be=[];function ye(t,e){for(;t;){if(t===e)return!0;t=t.parent()}}function we(){ce||(ce=function(t){2!==t.button&&function(t){for(var e=ve.length;e--;){var n=ve[e],r=n.getParentCtrl(t.target);if(n.settings.autohide){if(r&&(ye(r,n)||n.parent()===r))continue;(t=n.fire("autohide",{target:t.target})).isDefaultPrevented()||n.hide()}}}(t)},bt(document).on("click touchstart",ce))}function xe(t){var e=wt.getViewPort().y;function n(e,n){for(var r,i=0;i<ve.length;i++)if(ve[i]!==t)for(r=ve[i].parent();r&&(r=r.parent());)r===t&&ve[i].fixed(e).moveBy(0,n).repaint()}t.settings.autofix&&(t.state.get("fixed")?t._autoFixY>e&&(t.fixed(!1).layoutRect({y:t._autoFixY}).repaint(),n(!1,t._autoFixY-e)):(t._autoFixY=t.layoutRect().y,t._autoFixY<e&&(t.fixed(!0).layoutRect({y:0}).repaint(),n(!0,e-t._autoFixY))))}function Ce(t,e){var n,r,i=Re.zIndex||65535;if(t)be.push(e);else for(n=be.length;n--;)be[n]===e&&be.splice(n,1);if(be.length)for(n=0;n<be.length;n++)be[n].modal&&(i++,r=be[n]),be[n].getEl().style.zIndex=i,be[n].zIndex=i,i++;var o=bt("#"+e.classPrefix+"modal-block",e.getContainerElm())[0];r?bt(o).css("z-index",r.zIndex-1):o&&(o.parentNode.removeChild(o),he=!1),Re.currentZIndex=i}var Re=ge.extend({Mixins:[St,pe],init:function(t){var e=this;e._super(t),e._eventsRoot=e,e.classes.add("floatpanel"),t.autohide&&(we(),function(){if(!de){var t=document.documentElement,e=t.clientWidth,n=t.clientHeight;de=function(){document.all&&e===t.clientWidth&&n===t.clientHeight||(e=t.clientWidth,n=t.clientHeight,Re.hideAll())},bt(window).on("resize",de)}}(),ve.push(e)),t.autofix&&(fe||(fe=function(){var t;for(t=ve.length;t--;)xe(ve[t])},bt(window).on("scroll",fe)),e.on("move",function(){xe(this)})),e.on("postrender show",function(t){if(t.control===e){var n,r=e.classPrefix;e.modal&&!he&&((n=bt("#"+r+"modal-block",e.getContainerElm()))[0]||(n=bt('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(e.getContainerElm())),R.setTimeout(function(){n.addClass(r+"in"),bt(e.getEl()).addClass(r+"in")}),he=!0),Ce(!0,e)}}),e.on("show",function(){e.parents().each(function(t){if(t.state.get("fixed"))return e.fixed(!0),!1})}),t.popover&&(e._preBodyHtml='<div class="'+e.classPrefix+'arrow"></div>',e.classes.add("popover").add("bottom").add(e.isRtl()?"end":"start")),e.aria("label",t.ariaLabel),e.aria("labelledby",e._id),e.aria("describedby",e.describedBy||e._id+"-none")},fixed:function(t){if(this.state.get("fixed")!==t){if(this.state.get("rendered")){var e=wt.getViewPort();t?this.layoutRect().y-=e.y:this.layoutRect().y+=e.y}this.classes.toggle("fixed",t),this.state.set("fixed",t)}return this},show:function(){var t,e=this._super();for(t=ve.length;t--&&ve[t]!==this;);return-1===t&&ve.push(this),e},hide:function(){return ke(this),Ce(!1,this),this._super()},hideAll:function(){Re.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),Ce(!1,this)),this},remove:function(){ke(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function ke(t){var e;for(e=ve.length;e--;)ve[e]===t&&ve.splice(e,1);for(e=be.length;e--;)be[e]===t&&be.splice(e,1)}Re.hideAll=function(){for(var t=ve.length;t--;){var e=ve[t];e&&e.settings.autohide&&(e.hide(),ve.splice(t,1))}};var _e=function(t,e,n){var r,i,o=m.DOM,a=function(t){return t.getParam("fixed_toolbar_container")}(t);a&&(i=o.select(a)[0]);var s=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var e=t.selection.getScrollContainer(),n=t.getBody(),i=0,a=0;if(e){var s=o.getPos(n),u=o.getPos(e);i=Math.max(0,u.x-s.x),a=Math.max(0,u.y-s.y)}r.fixed(!1).moveRel(n,t.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,a)}},l=function(){r&&(r.show(),s(),o.addClass(t.getBody(),"mce-edit-focus"))},f=function(){r&&(r.hide(),Re.hideAll(),o.removeClass(t.getBody(),"mce-edit-focus"))},h=function(){r?r.visible()||l():(r=e.panel=g.create({type:i?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:function(t,e){return!(!t||e.settings.ui_container)}(i,t),border:1,items:[!1===u(t)?null:{type:"menubar",border:"0 0 1 0",items:rt(t)},B(t,c(t))]}),P.setUiContainer(t,r),y(t),i?r.renderTo(i).reflow():r.renderTo().reflow(),x(t,r),l(),F(t),t.on("nodeChange",s),t.on("ResizeWindow",s),t.on("activate",l),t.on("deactivate",f),t.nodeChanged())};return t.settings.content_editable=!0,t.on("focus",function(){!1===d(t)&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,h,h):h()}),t.on("blur hide",f),t.on("remove",function(){r&&(r.remove(),r=null)}),!1===d(t)&&n.skinUiCss?o.styleSheetLoader.load(n.skinUiCss,mt(t)):mt(t)(),{}};function Se(t,e){var n,r,i=this,o=re.classPrefix;i.show=function(a,s){function u(){n&&(bt(t).append('<div class="'+o+"throbber"+(e?" "+o+"throbber-inline":"")+'"></div>'),s&&s())}return i.hide(),n=!0,a?r=R.setTimeout(u,a):u(),i},i.hide=function(){var e=t.lastChild;return R.clearTimeout(r),e&&-1!==e.className.indexOf("throbber")&&e.parentNode.removeChild(e),n=!1,i}}var Te=function(t,e){var n;t.on("ProgressState",function(t){n=n||new Se(e.panel.getEl("body")),t.state?n.show(t.time):n.hide()})},Ee=function(t,e,n){var r=function(t){var e=t.settings,n=e.skin,r=e.skin_url;if(!1!==n){var i=n||"lightgray";r=r?t.documentBaseURI.toAbsolute(r):a.baseURL+"/skins/"+i}return r}(t);return r&&(n.skinUiCss=r+"/skin.min.css",t.contentCSS.push(r+"/content"+(t.inline?".inline":"")+".min.css")),Te(t,e),function(t){return t.getParam("inline",!1,"boolean")}(t)?_e(t,e,n):vt(t,e,n)},Ne=re.extend({Mixins:[St],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=131070}}),De=re.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.canFocus=!0,t.tooltip&&!1!==De.tooltips&&(e.on("mouseenter",function(n){var r=e.tooltip().moveTo(-65535);if(n.control===e){var i=r.text(t.tooltip).show().testMoveRel(e.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===i),r.classes.toggle("tooltip-nw","bc-tl"===i),r.classes.toggle("tooltip-ne","bc-tr"===i),r.moveRel(e.getEl(),i)}else r.hide()}),e.on("mouseleave mousedown click",function(){e.tooltip().remove(),e._tooltip=null})),e.aria("label",t.ariaLabel||t.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Ne({type:"tooltip"}),P.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var t=this.settings;this._super(),this.parent()||!t.width&&!t.height||(this.initLayoutRect(),this.repaint()),t.autofocus&&this.focus()},bindStates:function(){var t=this;function e(e){t.aria("disabled",e),t.classes.toggle("disabled",e)}function n(e){t.aria("pressed",e),t.classes.toggle("active",e)}return t.state.on("change:disabled",function(t){e(t.value)}),t.state.on("change:active",function(t){n(t.value)}),t.state.get("disabled")&&e(!0),t.state.get("active")&&n(!0),t._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Oe=De.extend({Defaults:{value:0},init:function(t){this._super(t),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(t){return Math.round(t)})},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+e+'bar-container"><div class="'+e+'bar"></div></div><div class="'+e+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var t=this;function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),Ae=function(t,e){t.getEl().lastChild.textContent=e+(t.progressBar?" "+t.progressBar.value()+"%":"")},Pe=re.extend({Mixins:[St],Defaults:{classes:"widget notification"},init:function(t){var e=this;e._super(t),e.maxWidth=t.maxWidth,t.text&&e.text(t.text),t.icon&&(e.icon=t.icon),t.color&&(e.color=t.color),t.type&&e.classes.add("notification-"+t.type),t.timeout&&(t.timeout<0||t.timeout>0)&&!t.closeButton?e.closeButton=!1:(e.classes.add("has-close"),e.closeButton=!0),t.progressBar&&(e.progressBar=new Oe),e.on("click",function(t){-1!==t.target.className.indexOf(e.classPrefix+"close")&&e.close()})},renderHtml:function(){var t,e=this.classPrefix,n="",r="",i="";return this.icon&&(n='<i class="'+e+"ico "+e+"i-"+this.icon+'"></i>'),t=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(r='<button type="button" class="'+e+'close" aria-hidden="true">×</button>'),this.progressBar&&(i=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+t+' role="presentation">'+n+'<div class="'+e+'notification-inner">'+this.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var t=this;return R.setTimeout(function(){t.$el.addClass(t.classPrefix+"in"),Ae(t,t.state.get("text"))},100),t._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().firstChild.innerHTML=e.value,Ae(t,e.value)}),t.progressBar&&(t.progressBar.bindStates(),t.progressBar.state.on("change:value",function(e){Ae(t,t.state.get("text"))})),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var t,e;t=this.getEl().style,e=this._layoutRect,t.left=e.x+"px",t.top=e.y+"px",t.zIndex=65534}});function Me(t){var e=function(t){return t.inline?t.getElement():t.getContentAreaContainer()};return{open:function(n,r){var i,o=s.extend(n,{maxWidth:(i=e(t),wt.getSize(i).width)}),a=new Pe(o);return a.args=o,o.timeout>0&&(a.timer=setTimeout(function(){a.close(),r()},o.timeout)),a.on("close",function(){r()}),a.renderTo(),a},close:function(t){t.close()},reposition:function(n){!function(t){X(t,function(t){t.moveTo(0,0)})}(n),function(n){if(n.length>0){var r=n.slice(0,1)[0],i=e(t);r.moveRel(i,"tc-tc"),X(n,function(t,e){e>0&&t.moveRel(n[e-1].getEl(),"bc-tc")})}}(n)},getArgs:function(t){return t.args}}}var He=[],Be="";function Ie(t){var e,n=bt("meta[name=viewport]")[0];!1!==lt.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(e=n.getAttribute("content"))&&void 0!==Be&&(Be=e),n.setAttribute("content",t?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Be))}function We(t,e){(function(){for(var t=0;t<He.length;t++)if(He[t]._fullscreen)return!0;return!1})()&&!1===e&&bt([document.documentElement,document.body]).removeClass(t+"fullscreen")}var Le=Re.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(t){var e=this;e._super(t),e.isRtl()&&e.classes.add("rtl"),e.classes.add("window"),e.bodyClasses.add("window-body"),e.state.set("fixed",!0),t.buttons&&(e.statusbar=new ge({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:e.isRtl()?"start":"end",defaults:{type:"button"},items:t.buttons}),e.statusbar.classes.add("foot"),e.statusbar.parent(e)),e.on("click",function(t){var n=e.classPrefix+"close";(wt.hasClass(t.target,n)||wt.hasClass(t.target.parentNode,n))&&e.close()}),e.on("cancel",function(){e.close()}),e.on("move",function(t){t.control===e&&Re.hideAll()}),e.aria("describedby",e.describedBy||e._id+"-none"),e.aria("label",t.title),e._fullscreen=!1},recalc:function(){var t,e,n,r,i=this.statusbar;this._fullscreen&&(this.layoutRect(wt.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),t=this.layoutRect(),this.settings.title&&!this._fullscreen&&(e=t.headerW)>t.w&&(n=t.x-Math.max(0,e/2),this.layoutRect({w:e,x:n}),r=!0),i&&(i.layoutRect({w:this.layoutRect().innerW}).recalc(),(e=i.layoutRect().minW+t.deltaW)>t.w&&(n=t.x-Math.max(0,e-t.w),this.layoutRect({w:e,x:n}),r=!0)),r&&this.recalc()},initLayoutRect:function(){var t,e=this._super(),n=0;if(this.settings.title&&!this._fullscreen){t=this.getEl("head");var r=wt.getSize(t);e.headerW=r.width,e.headerH=r.height,n+=e.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),e.deltaH+=n,e.minH+=n,e.h+=n;var i=wt.getWindowSize();return e.x=this.settings.x||Math.max(0,i.w/2-e.w/2),e.y=this.settings.y||Math.max(0,i.h/2-e.h/2),e},renderHtml:function(){var t=this._layout,e=this._id,n=this.classPrefix,r=this.settings,i="",o="",a=r.html;return this.preRender(),t.preRender(this),r.title&&(i='<div id="'+e+'-head" class="'+n+'window-head"><div id="'+e+'-title" class="'+n+'title">'+this.encode(r.title)+'</div><div id="'+e+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),void 0===a&&(a=t.renderHtml(this)),this.statusbar&&(o=this.statusbar.renderHtml()),'<div id="'+e+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+i+'<div id="'+e+'-body" class="'+this.bodyClasses+'">'+a+"</div>"+o+"</div></div>"},fullscreen:function(t){var e,n,r=this,i=document.documentElement,o=r.classPrefix;if(t!==r._fullscreen)if(bt(window).on("resize",function(){var t;if(r._fullscreen)if(e)r._timer||(r._timer=R.setTimeout(function(){var t=wt.getWindowSize();r.moveTo(0,0).resizeTo(t.w,t.h),r._timer=0},50));else{t=(new Date).getTime();var n=wt.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-t>50&&(e=!0)}}),n=r.layoutRect(),r._fullscreen=t,t){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=Nt("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,bt([i,document.body]).addClass(o+"fullscreen"),r.classes.add("fullscreen");var a=wt.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=Nt(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,bt([i,document.body]).removeClass(o+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var t,e=this;setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new le(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),He.push(e),Ie(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),We(this.classPrefix,!1),t=He.length;t--;)He[t]===this&&He.splice(t,1);Ie(He.length>0)},getContentWindow:function(){var t=this.getEl().getElementsByTagName("iframe")[0];return t?t.contentWindow:null}});!function(){if(!lt.desktop){var t={w:window.innerWidth,h:window.innerHeight};R.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},bt(window).trigger("resize"))},100)}bt(window).on("resize",function(){var t,e,n=wt.getWindowSize();for(t=0;t<He.length;t++)e=He[t].layoutRect(),He[t].moveTo(He[t].settings.x||Math.max(0,n.w/2-e.w/2),He[t].settings.y||Math.max(0,n.h/2-e.h/2))})}();var ze,Fe,Ue,je=Le.extend({init:function(t){t={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(t)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(t){var e,n=t.callback||function(){};function r(t,e,r){return{type:"button",text:t,subtype:r?"primary":"",onClick:function(t){t.control.parents()[1].close(),n(e)}}}switch(t.buttons){case je.OK_CANCEL:e=[r("Ok",!0,!0),r("Cancel",!1)];break;case je.YES_NO:case je.YES_NO_CANCEL:e=[r("Yes",1,!0),r("No",0)],t.buttons===je.YES_NO_CANCEL&&e.push(r("Cancel",-1));break;default:e=[r("Ok",!0,!0)]}return new Le({padding:20,x:t.x,y:t.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:e,title:t.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:t.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:t.onClose,onCancel:function(){n(!1)}}).renderTo(document.body).reflow()},alert:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,je.msgBox(t)},confirm:function(t,e){return"string"==typeof t&&(t={text:t}),t.callback=e,t.buttons=je.OK_CANCEL,je.msgBox(t)}}}),Ve=function(t){return{renderUI:function(e){return Ee(t,this,e)},resizeTo:function(e,n){return st(t,e,n)},resizeBy:function(e,n){return ut(t,e,n)},getNotificationManagerImpl:function(){return Me(t)},getWindowManagerImpl:function(){return{open:function(t,e,n){var r;return t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new Le(t)).on("close",function(){n(r)}),t.data&&r.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),r.features=t||{},r.params=e||{},r=r.renderTo(document.body).reflow()},alert:function(t,e,n){var r;return(r=je.alert(t,function(){e()})).on("close",function(){n(r)}),r},confirm:function(t,e,n){var r;return(r=je.confirm(t,function(t){e(t)})).on("close",function(){n(r)}),r},close:function(t){t.close()},getParams:function(t){return t.params},setParams:function(t,e){t.params=e}}}}},qe=Tt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=s.extend({},this.Defaults,t)},preRender:function(t){t.bodyClasses.add(this.settings.containerClass)},applyClasses:function(t){var e,n,r,i,o=this.settings;e=o.firstControlClass,n=o.lastControlClass,t.each(function(t){t.classes.remove(e).remove(n).add(o.controlClass),t.visible()&&(r||(r=t),i=t)}),r&&r.classes.add(e),i&&i.classes.add(n)},renderHtml:function(t){var e="";return this.applyClasses(t.items()),t.items().each(function(t){e+=t.renderHtml()}),e},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Ye=qe.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(t){t.items().filter(":visible").each(function(t){var e=t.settings;t.layoutRect({x:e.x,y:e.y,w:e.w,h:e.h}),t.recalc&&t.recalc()})},renderHtml:function(t){return'<div id="'+t._id+'-absend" class="'+t.classPrefix+'abs-end"></div>'+this._super(t)}}),$e=De.extend({Defaults:{classes:"widget btn",role:"button"},init:function(t){var e,n=this;n._super(t),t=n.settings,e=n.settings.size,n.on("click mousedown",function(t){t.preventDefault()}),n.on("touchstart",function(t){n.fire("click",t),t.preventDefault()}),t.subtype&&n.classes.add(t.subtype),e&&n.classes.add("btn-"+e),t.icon&&n.icon(t.icon)},icon:function(t){return arguments.length?(this.state.set("icon",t),this):this.state.get("icon")},repaint:function(){var t,e=this.getEl().firstChild;e&&((t=e.style).width=t.height="100%"),this._super()},renderHtml:function(){var t,e,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a="",s=this.settings;return(t=s.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",o&&(this.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+this.encode(o)+"</span>"),i=i?r+"ico "+r+"i-"+i:"",e="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+e+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+a+"</button></div>"},bindStates:function(){var t=this,e=t.$,n=t.classPrefix+"txt";function r(r){var i=e("span."+n,t.getEl());r?(i[0]||(e("button:first",t.getEl()).append('<span class="'+n+'"></span>'),i=e("span."+n,t.getEl())),i.html(t.encode(r))):i.remove(),t.classes.toggle("btn-has-text",!!r)}return t.state.on("change:text",function(t){r(t.value)}),t.state.on("change:icon",function(e){var n=e.value,i=t.classPrefix;t.settings.icon=n,n=n?i+"ico "+i+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,a=o.getElementsByTagName("i")[0];n?(a&&a===o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=n):a&&o.removeChild(a),r(t.state.get("text"))}),t._super()}}),Xe=$e.extend({init:function(t){t=s.extend({text:"Browse...",multiple:!1,accept:null},t),this._super(t),this.classes.add("browsebutton"),t.multiple&&this.classes.add("multiple")},postRender:function(){var t=this,e=wt.create("input",{type:"file",id:t._id+"-browse",accept:t.settings.accept});t._super(),bt(e).on("change",function(e){var n=e.target.files;t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},e.preventDefault(),n.length&&t.fire("change",e)}),bt(e).on("click",function(t){t.stopPropagation()}),bt(t.getEl("button")).on("click",function(t){t.stopPropagation(),e.click()}),t.getEl().appendChild(e)},remove:function(){bt(this.getEl("button")).off(),bt(this.getEl("input")).off(),this._super()}}),Je=se.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var t=this._layout;return this.classes.add("btn-group"),this.preRender(),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),Ke=De.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(t){var e=this;e._super(t),e.on("click mousedown",function(t){t.preventDefault()}),e.on("click",function(t){t.preventDefault(),e.disabled()||e.checked(!e.checked())}),e.checked(e.settings.checked)},checked:function(t){return arguments.length?(this.state.set("checked",t),this):this.state.get("checked")},value:function(t){return arguments.length?this.checked(t):this.checked()},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+e+"ico "+e+'i-checkbox"></i><span id="'+t+'-al" class="'+e+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var t=this;function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];n?(o&&o===i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=n):o&&i.removeChild(o)}),t.state.get("checked")&&e(!0),t._super()}}),Ge=tinymce.util.Tools.resolve("tinymce.util.VK"),Ze=De.extend({init:function(t){var e=this;e._super(t),t=e.settings,e.classes.add("combobox"),e.subinput=!0,e.ariaTarget="inp",t.menu=t.menu||t.values,t.menu&&(t.icon="caret"),e.on("click",function(n){var r=n.target,i=e.getEl();if(bt.contains(i,r)||r===i)for(;r&&r!==i;)r.id&&-1!==r.id.indexOf("-open")&&(e.fire("action"),t.menu&&(e.showMenu(),n.aria&&e.menu.items()[0].focus())),r=r.parentNode}),e.on("keydown",function(t){var n;13===t.keyCode&&"INPUT"===t.target.nodeName&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){if("INPUT"===t.target.nodeName){var n=e.state.get("value"),r=t.target.value;r!==n&&(e.state.set("value",r),e.fire("autocomplete",t))}}),e.on("mouseover",function(t){var n=e.tooltip().moveTo(-65535);if(e.statusLevel()&&-1!==t.target.className.indexOf(e.classPrefix+"status")){var r=e.statusMessage()||"Ok",i=n.text(r).show().testMoveRel(t.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===i),n.classes.toggle("tooltip-nw","bc-tl"===i),n.classes.toggle("tooltip-ne","bc-tr"===i),n.moveRel(t.target,i)}})},statusLevel:function(t){return arguments.length>0&&this.state.set("statusLevel",t),this.state.get("statusLevel")},statusMessage:function(t){return arguments.length>0&&this.state.set("statusMessage",t),this.state.get("statusMessage")},showMenu:function(){var t,e=this,n=e.settings;e.menu||((t=n.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",e.menu=g.create(t).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var t,e,n=this.getEl(),r=this.getEl("open"),i=this.layoutRect(),o=0,a=n.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(o=parseInt(wt.getRuntimeStyle(a,"padding-right"),10)-parseInt(wt.getRuntimeStyle(a,"padding-left"),10)),t=r?i.w-wt.getSize(r).width-10:i.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(e=this.layoutRect().h-2+"px"),bt(a).css({width:t-o,lineHeight:e}),this._super(),this},postRender:function(){var t=this;return bt(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var t,e,n,r=this._id,i=this.settings,o=this.classPrefix,a=this.state.get("value")||"",s="",u="";return"spellcheck"in i&&(u+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(u+=' maxlength="'+i.maxLength+'"'),i.size&&(u+=' size="'+i.size+'"'),i.subtype&&(u+=' type="'+i.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(u+=' disabled="disabled"'),(t=i.icon)&&"caret"!==t&&(t=o+"ico "+o+"i-"+i.icon),e=this.state.get("text"),(t||e)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==t?'<i class="'+t+'"></i>':'<i class="'+o+'caret"></i>')+(e?(t?" ":"")+e:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+r+'" class="'+this.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+this.encode(a,!1)+'" hidefocus="1"'+u+' placeholder="'+this.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,e){var n=this;if(0!==t.length){n.menu?n.menu.items().remove():n.menu=g.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),s.each(t,function(t){var r,i;n.menu.add({text:t.title,url:t.previewUrl,match:e,classes:"menu-item-ellipsis",onclick:(r=t.value,i=t.title,function(){n.fire("selectitem",{title:i,value:r})})})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var r=n.layoutRect().w;n.menu.layoutRect({w:r,minW:0,maxW:r}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var t=this;t.state.on("change:value",function(e){t.getEl("inp").value!==e.value&&(t.getEl("inp").value=e.value)}),t.state.on("change:disabled",function(e){t.getEl("inp").disabled=e.value}),t.state.on("change:statusLevel",function(e){var n=t.getEl("status"),r=t.classPrefix,i=e.value;wt.css(n,"display","none"===i?"none":""),wt.toggleClass(n,r+"i-checkmark","ok"===i),wt.toggleClass(n,r+"i-warning","warn"===i),wt.toggleClass(n,r+"i-error","error"===i),t.classes.toggle("has-status","none"!==i),t.repaint()}),wt.on(t.getEl("status"),"mouseleave",function(){t.tooltip().hide()}),t.on("cancel",function(e){t.menu&&t.menu.visible()&&(e.stopPropagation(),t.hideMenu())});var e=function(t,e){e&&e.items().length>0&&e.items().eq(t)[0].focus()};return t.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===Ge.DOWN?(n.preventDefault(),t.fire("autocomplete"),e(0,t.menu)):r===Ge.UP&&(n.preventDefault(),e(-1,t.menu)))}),t._super()},remove:function(){bt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),Qe=Ze.extend({init:function(t){var e=this;t.spellcheck=!1,t.onaction&&(t.icon="none"),e._super(t),e.classes.add("colorbox"),e.on("change keyup postrender",function(){e.repaintColor(e.value())})},repaintColor:function(t){var e=this.getEl("open"),n=e?e.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=t}catch(t){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}}),tn=$e.extend({showPanel:function(){var t=this,e=t.settings;if(t.classes.add("opened"),t.panel)t.panel.show();else{var n=e.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,t.panel=new Re(n).on("hide",function(){t.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()}var r=t.panel.testMoveRel(t.getEl(),e.popoverAlign||(t.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));t.panel.classes.toggle("start","l"===r.substr(-1)),t.panel.classes.toggle("end","r"===r.substr(-1));var i="t"===r.substr(0,1);t.panel.classes.toggle("bottom",!i),t.panel.classes.toggle("top",i),t.panel.moveRel(t.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),en=m.DOM,nn=tn.extend({init:function(t){this._super(t),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(t){return t?(this._color=t,this.getEl("preview").style.backgroundColor=t,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var t=this._id,e=this.classPrefix,n=this.state.get("text"),r=this.settings.icon?e+"ico "+e+"i-"+this.settings.icon:"",i=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",o="";return n&&(this.classes.add("btn-has-text"),o='<span class="'+e+'txt">'+this.encode(n)+"</span>"),'<div id="'+t+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+e+'preview"></span>'+o+'</button><button type="button" class="'+e+'open" hidefocus="1" tabindex="-1"> <i class="'+e+'caret"></i></button></div>'},postRender:function(){var t=this,e=t.settings.onclick;return t.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==t||en.getParent(n.target,"."+t.classPrefix+"open")||(n.stopImmediatePropagation(),e.call(t,n))}),delete t.settings.onclick,t._super()}}),rn=tinymce.util.Tools.resolve("tinymce.util.Color"),on=De.extend({Defaults:{classes:"widget colorpicker"},init:function(t){this._super(t)},postRender:function(){var t,e,n,r,i,o=this,a=o.color();function s(t,e){var n,r,i=wt.getPos(t);return n=e.pageX-i.x,r=e.pageY-i.y,{x:n=Math.max(0,Math.min(n/t.clientWidth,1)),y:r=Math.max(0,Math.min(r/t.clientHeight,1))}}function u(t,e){var a=(360-t.h)/360;wt.css(n,{top:100*a+"%"}),e||wt.css(i,{left:t.s+"%",top:100-t.v+"%"}),r.style.background=rn({s:100,v:100,h:t.h}).toHex(),o.color().parse({s:t.s,v:t.v,h:t.h})}function l(e){var n;n=s(r,e),t.s=100*n.x,t.v=100*(1-n.y),u(t),o.fire("change")}function c(n){var r;r=s(e,n),(t=a.toHsv()).h=360*(1-r.y),u(t,!0),o.fire("change")}e=o.getEl("h"),n=o.getEl("hp"),r=o.getEl("sv"),i=o.getEl("svp"),o._repaint=function(){u(t=a.toHsv())},o._super(),o._svdraghelper=new le(o._id+"-sv",{start:l,drag:l}),o._hdraghelper=new le(o._id+"-h",{start:c,drag:c}),o._repaint()},rgb:function(){return this.color().toRgb()},value:function(t){if(!arguments.length)return this.color().toHex();this.color().parse(t),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=rn()),this._color},renderHtml:function(){var t,e=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return t='<div id="'+e+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var t,e,i,o,a="";for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,e=(o=r.split(",")).length-1;t<e;t++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/e+"%;"+i+o[t]+",endColorstr="+o[t+1]+");-ms-"+i+o[t]+",endColorstr="+o[t+1]+')"></div>';return a}()+'<div id="'+e+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}}),an=De.extend({init:function(t){t=s.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t),this._super(t),this.classes.add("dropzone"),t.multiple&&this.classes.add("multiple")},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},e=wt.create("div",t,"<span>"+this.translate(n.text)+"</span>"),n.height&&wt.css(e,"height",n.height+"px"),n.width&&wt.css(e,"width",n.width+"px"),e.className=this.classes,e.outerHTML},postRender:function(){var t=this,e=function(e){e.preventDefault(),t.classes.toggle("dragenter"),t.getEl().className=t.classes};t._super(),t.$el.on("dragover",function(t){t.preventDefault()}),t.$el.on("dragenter",e),t.$el.on("dragleave",e),t.$el.on("drop",function(e){if(e.preventDefault(),!t.state.get("disabled")){var n=function(e){var n=t.settings.accept;if("string"!=typeof n)return e;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return s.grep(e,function(t){return r.test(t.name)})}(e.dataTransfer.files);t.value=function(){return n.length?t.settings.multiple?n:n[0]:null},n.length&&t.fire("change",e)}})},remove:function(){this.$el.off(),this._super()}}),sn=De.extend({init:function(t){var e=this;t.delimiter||(t.delimiter="»"),e._super(t),e.classes.add("path"),e.canFocus=!0,e.on("click",function(t){var n;(n=t.target.getAttribute("data-index"))&&e.fire("select",{value:e.row()[n],index:n})}),e.row(e.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(t){return arguments.length?(this.state.set("row",t),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(t){var e,n,r=t||[],i="",o=this.classPrefix;for(e=0,n=r.length;e<n;e++)i+=(e>0?'<div class="'+o+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(e===n-1?" "+o+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+this._id+"-"+e+'" aria-level="'+(e+1)+'">'+r[e].name+"</div>";return i||(i='<div class="'+o+'path-item"> </div>'),i}}),un=sn.extend({postRender:function(){var t=this,e=t.settings.editor;function n(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}return!1!==e.settings.elementpath&&(t.on("select",function(t){e.focus(),e.selection.select(this.row()[t.index].element),e.nodeChanged()}),e.on("nodeChange",function(r){for(var i=[],o=r.parents,a=o.length;a--;)if(1===o[a].nodeType&&!n(o[a])){var s=e.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}t.row(i)})),t._super()}}),ln=se.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.classes.add("formitem"),t.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+e+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></div>"}}),cn=se.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,e=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var n,r=e.settings.label;r&&((n=new ln(s.extend({items:{type:"label",id:e._id+"-l",text:r,flex:0,forId:e._id,disabled:e.disabled()}},t.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),t.replace(e,n),n.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var t=this;function e(){var e,n,r=0,i=[];if(!1!==t.settings.labelGapCalc)for(("children"===t.settings.labelGapCalc?t.find("formitem"):t.items()).filter("formitem").each(function(t){var e=t.items()[0],n=e.getEl().clientWidth;r=n>r?n:r,i.push(e)}),n=t.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=r+n}t._super(),t.on("show",e),e()}}),fn=cn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var t=this._layout,e=this.classPrefix;return this.preRender(),t.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+e+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+t.renderHtml(this)+"</div></fieldset>"}}),dn=0,hn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:_(t)}},mn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return hn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return hn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return hn(n)},fromDom:hn,fromPoint:function(t,e,n){var r=t.dom();return O.from(r.elementFromPoint(e,n)).map(hn)}},gn=(Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE,Node.DOCUMENT_NODE),pn=(Node.DOCUMENT_TYPE_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE),vn=(Node.TEXT_NODE,Node.PROCESSING_INSTRUCTION_NODE,Node.ENTITY_REFERENCE_NODE,Node.ENTITY_NODE,Node.NOTATION_NODE,"undefined"!=typeof window?window:Function("return this;")(),function(){return bn(0,0)}),bn=function(t,e){return{major:t,minor:e}},yn={nu:bn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?vn():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}}(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return bn(r(1),r(2))}(t,n)},unknown:vn},wn=function(t,e){return function(){return e===t}},xn=function(t){var e=t.current;return{current:e,version:t.version,isEdge:wn("Edge",e),isChrome:wn("Chrome",e),isIE:wn("IE",e),isOpera:wn("Opera",e),isFirefox:wn("Firefox",e),isSafari:wn("Safari",e)}},Cn={unknown:function(){return xn({current:void 0,version:yn.unknown()})},nu:xn,edge:_("Edge"),chrome:_("Chrome"),ie:_("IE"),opera:_("Opera"),firefox:_("Firefox"),safari:_("Safari")},Rn=function(t,e){return function(){return e===t}},kn=function(t){var e=t.current;return{current:e,version:t.version,isWindows:Rn("Windows",e),isiOS:Rn("iOS",e),isAndroid:Rn("Android",e),isOSX:Rn("OSX",e),isLinux:Rn("Linux",e),isSolaris:Rn("Solaris",e),isFreeBSD:Rn("FreeBSD",e)}},_n={unknown:function(){return kn({current:void 0,version:yn.unknown()})},nu:kn,windows:_("Windows"),ios:_("iOS"),android:_("Android"),linux:_("Linux"),osx:_("OSX"),solaris:_("Solaris"),freebsd:_("FreeBSD")},Sn=function(t,e){var n=String(e).toLowerCase();return function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n,t))return O.some(i)}return O.none()}(t,function(t){return t.search(n)})},Tn=function(t,e){return Sn(t,e).map(function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}})},En=function(t,e){return Sn(t,e).map(function(t){var n=yn.detect(t.versionRegexes,e);return{current:t.name,version:n}})},Nn=function(t,e){return-1!==t.indexOf(e)},Dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,On=function(t){return function(e){return Nn(e,t)}},An=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return Nn(t,"edge/")&&Nn(t,"chrome")&&Nn(t,"safari")&&Nn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dn],search:function(t){return Nn(t,"chrome")&&!Nn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Nn(t,"msie")||Nn(t,"trident")}},{name:"Opera",versionRegexes:[Dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:On("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:On("firefox")},{name:"Safari",versionRegexes:[Dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(Nn(t,"safari")||Nn(t,"mobile/"))&&Nn(t,"applewebkit")}}],Pn=[{name:"Windows",search:On("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Nn(t,"iphone")||Nn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:On("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:On("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:On("linux"),versionRegexes:[]},{name:"Solaris",search:On("sunos"),versionRegexes:[]},{name:"FreeBSD",search:On("freebsd"),versionRegexes:[]}],Mn={browsers:_(An),oses:_(Pn)},Hn=function(t){var e=Mn.browsers(),n=Mn.oses(),r=Tn(e,t).fold(Cn.unknown,Cn.nu),i=En(n,t).fold(_n.unknown,_n.nu);return{browser:r,os:i,deviceType:function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,o=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=t.isiOS()||t.isAndroid(),l=u&&!s,c=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:_(r),isiPhone:_(i),isTablet:_(s),isPhone:_(l),isTouch:_(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:_(c)}}(i,r,t)}},Bn=pn,In=gn,Wn=function(t){return t.nodeType!==Bn&&t.nodeType!==In||0===t.childElementCount},Ln=((ze=function(){var t=navigator.userAgent;return Hn(t)},Ue=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ue||(Ue=!0,Fe=ze.apply(null,t)),Fe})().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),s.trim),zn=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},Fn=zn("true"),Un=zn("false"),jn=function(t,e,n,r,i){return{type:t,title:e,url:n,level:r,attach:i}},Vn=function(t){return t.innerText||t.textContent},qn=function(t){return t.id?t.id:(e="h",n=(new Date).getTime(),e+"_"+Math.floor(1e9*Math.random())+ ++dn+String(n));var e,n},Yn=function(t){return function(t){return t&&"A"===t.nodeName&&(t.id||t.name)}(t)&&Xn(t)},$n=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},Xn=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return Fn(t)}return!1}(t)&&!Un(t)},Jn=function(t){return $n(t)&&Xn(t)},Kn=function(t){var e=qn(t);return jn("header",Vn(t),"#"+e,function(t){return $n(t)?parseInt(t.nodeName.substr(1),10):0}(t),function(){t.id=e})},Gn=function(t){var e=t.id||t.name,n=Vn(t);return jn("anchor",n||"#"+e,"#"+e,0,k)},Zn=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,$(((ze=function(){var t=navigator.userAgent;return Hn(t)},Ue=!1,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ue||(Ue=!0,Fe=ze.apply(null,t)),Fe})().browser.isIE(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}("element","offset"),function(t,e){return function(t,e){var n=void 0===e?document:e.dom();return Wn(n)?[]:$(n.querySelectorAll(t),mn.fromDom)}(e,t)})(mn.fromDom(n),e),function(t){return t.dom()})},Qn=function(t){return Ln(t.title).length>0},tr=function(t){var e=Zn(t);return J(function(t){return $(J(t,Jn),Kn)}(e).concat(function(t){return $(J(t,Yn),Gn)}(e)),Qn)},er={},nr=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}}},rr=function(t,e){return{title:t,value:{title:t,url:e,attach:k}}},ir=function(t,e,n){var r=e in t?t[e]:n;return!1===r?null:r},or=function(t,e,n,r){var i,o,a,u={title:"-"},l=function(t){var r=t.hasOwnProperty(n)?t[n]:[],i=J(r,function(t){return function(t,e){return!Y(e,function(e){return e.url===t})}(t,e)});return s.map(i,function(t){return{title:t,value:{title:t,url:t,attach:k}}})},c=function(t){return function(t){return s.map(t,nr)}(J(e,function(e){return e.type===t}))};return!1===r.typeahead_urls?[]:"file"===n?(i=[sr(t,l(er)),sr(t,c("header")),sr(t,function(){var t=c("anchor"),e=ir(r,"anchor_top","#top"),n=ir(r,"anchor_bottom","#bottom");return null!==e&&t.unshift(rr("<top>",e)),null!==n&&t.push(rr("<bottom>",n)),t}())],o=function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(u,e)},a=[],X(i,function(t){a=o(a,t)}),a):sr(t,l(er))},ar=function(t,e){var n,r,i,o=er[e];/^https?/.test(t)&&(o?(n=o,r=t,i=q(n,r),-1===i?O.none():O.some(i)).isNone()&&(er[e]=o.slice(0,5).concat(t)):er[e]=[t])},sr=function(t,e){var n=t.toLowerCase(),r=s.grep(e,function(t){return-1!==t.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===t?[]:r},ur=function(t,e,n){var r=e.filepicker_validator_handler;r&&t.state.on("change:value",function(e){var i;0!==(i=e.value).length?r({url:i,type:n},function(e){var n=function(t){var e=t.status,n=t.message;return"valid"===e?{status:"ok",message:n}:"unknown"===e?{status:"warn",message:n}:"invalid"===e?{status:"warn",message:n}:{status:"none",message:""}}(e);t.statusMessage(n.message),t.statusLevel(n.status)}):t.statusLevel("none")})},lr=Ze.extend({Statics:{clearHistory:function(){er={}}},init:function(t){var e,n,r,i=this,o=window.tinymce?window.tinymce.activeEditor:a.activeEditor,u=o.settings,l=t.filetype;t.spellcheck=!1,(r=u.file_picker_types||u.file_browser_callback_types)&&(r=s.makeMap(r,/[, ]/)),r&&!r[l]||(!(n=u.file_picker_callback)||r&&!r[l]?!(n=u.file_browser_callback)||r&&!r[l]||(e=function(){n(i.getEl("inp").id,i.value(),l,window)}):e=function(){var t=i.fire("beforecall").meta;t=s.extend({filetype:l},t),n.call(o,function(t,e){i.value(t).fire("change",{meta:e})},i.value(),t)}),e&&(t.icon="browse",t.onaction=e),i._super(t),i.classes.add("filepicker"),function(t,e,n,r){var i=function(i){var o=tr(n),a=or(i,o,r,e);t.showAutoComplete(a,i)};t.on("autocomplete",function(){i(t.value())}),t.on("selectitem",function(e){var n=e.value;t.value(n.url);var i=function(t){var e=t.title;return e.raw?e.raw:e}(n);"image"===r?t.fire("change",{meta:{alt:i,attach:n.attach}}):t.fire("change",{meta:{text:i,attach:n.attach}}),t.focus()}),t.on("click",function(e){0===t.value().length&&"INPUT"===e.target.nodeName&&i("")}),t.on("PostRender",function(){t.getRoot().on("submit",function(e){e.isDefaultPrevented()||ar(t.value(),r)})})}(i,u,o.getBody(),l),ur(i,u,l)}}),cr=Ye.extend({recalc:function(t){var e=t.layoutRect(),n=t.paddingBox;t.items().filter(":visible").each(function(t){t.layoutRect({x:n.left,y:n.top,w:e.innerW-n.right-n.left,h:e.innerH-n.top-n.bottom}),t.recalc&&t.recalc()})}}),fr=Ye.extend({recalc:function(t){var e,n,r,i,o,a,s,u,l,c,f,d,h,m,g,p,v,b,y,w,x,C,R,k,_,S,T,E,N,D,O,A,P,M,H,B,I,W=[],L=Math.max,z=Math.min;for(r=t.items().filter(":visible"),i=t.layoutRect(),o=t.paddingBox,a=t.settings,d=t.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,u=t.isRtl()?a.pack||"end":a.pack,l=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(k="y",C="h",R="minH",_="maxH",T="innerH",S="top",E="deltaH",N="contentH",M="left",A="w",D="x",O="innerW",P="minW",H="right",B="deltaW",I="contentW"):(k="x",C="w",R="minW",_="maxW",T="innerW",S="left",E="deltaW",N="contentW",M="top",A="h",D="y",O="innerH",P="minH",H="bottom",B="deltaH",I="contentH"),f=i[T]-o[S]-o[S],x=c=0,e=0,n=r.length;e<n;e++)m=(h=r[e]).layoutRect(),g=h.settings.flex,f-=e<n-1?l:0,g>0&&(c+=g,m[_]&&W.push(h),m.flex=g),f-=m[R],(p=o[M]+m[P]+o[H])>x&&(x=p);if((y={})[R]=f<0?i[R]-f+i[E]:i[T]-f+i[E],y[P]=x+i[B],y[N]=i[T]-f,y[I]=x,y.minW=z(y.minW,i.maxW),y.minH=z(y.minH,i.maxH),y.minW=L(y.minW,i.startMinWidth),y.minH=L(y.minH,i.startMinHeight),!i.autoResize||y.minW===i.minW&&y.minH===i.minH){for(b=f/c,e=0,n=W.length;e<n;e++)v=(m=(h=W[e]).layoutRect())[_],(p=m[R]+m.flex*b)>v?(f-=m[_]-m[R],c-=m.flex,m.flex=0,m.maxFlexSize=v):m.maxFlexSize=0;for(b=f/c,w=o[S],y={},0===c&&("end"===u?w=f+o[S]:"center"===u?(w=Math.round(i[T]/2-(i[T]-f)/2)+o[S])<0&&(w=o[S]):"justify"===u&&(w=o[S],l=Math.floor(f/(r.length-1)))),y[D]=o[M],e=0,n=r.length;e<n;e++)p=(m=(h=r[e]).layoutRect()).maxFlexSize||m[R],"center"===s?y[D]=Math.round(i[O]/2-m[A]/2):"stretch"===s?(y[A]=L(m[P]||0,i[O]-o[M]-o[H]),y[D]=o[M]):"end"===s&&(y[D]=i[O]-m[A]-o.top),m.flex>0&&(p+=m.flex*b),y[C]=p,y[k]=w,h.layoutRect(y),h.recalc&&h.recalc(),w+=p+l}else if(y.w=y.minW,y.h=y.minH,t.layoutRect(y),this.recalc(t),null===t._lastRect){var F=t.parent();F&&(F._lastRect=null,F.recalc())}}}),dr=qe.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(t){t.items().filter(":visible").each(function(t){t.recalc&&t.recalc()})},isNative:function(){return!0}}),hr=function(t,e){return function(t,e){var n=void 0===e?document:e.dom();return Wn(n)?O.none():O.from(n.querySelector(t)).map(mn.fromDom)}(e,t)},mr=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},gr=function(t,e,n){var r=function(t){n(t,e)};t.formatter?t.formatter.formatChanged(e,r):t.on("init",function(){t.formatter.formatChanged(e,r)})},pr=function(t,e){return function(n){gr(t,e,function(t){n.control.active(t)})}},vr=function(t){var e=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:mr(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:mr(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:mr(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:mr(t,"alignjustify")}];t.addMenuItem("align",{text:"Align",menu:n}),t.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var r=n.control.menu;s.each(e,function(e,n){r.items().eq(n).each(function(n){return n.active(t.formatter.match(e))})})},onPostRender:function(n){var r=n.control;s.each(e,function(e,n){gr(t,e,function(t){r.icon("alignleft"),t&&r.icon(e)})})}}),s.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:pr(t,n)})})},br=function(t){return t?t.split(",")[0]:""},yr=function(t,e){return function(){var n=this;n.state.set("value",null),t.on("init nodeChange",function(r){var i=t.queryCommandValue("FontName"),o=function(t,e){var n,r=e?e.toLowerCase():"";return s.each(t,function(t){t.value.toLowerCase()===r&&(n=t.value)}),s.each(t,function(t){n||br(t.value).toLowerCase()!==br(r).toLowerCase()||(n=t.value)}),n}(e,i);n.value(o||null),!o&&i&&n.text(br(i))})}},wr=function(t){t.addButton("fontselect",function(){var e=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return s.map(e,function(t){return{text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""}})}(t);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:e,fixedWidth:!0,onPostRender:yr(t,e),onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})},xr=function(t){wr(t)},Cr=function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":t},Rr=function(t,e,n){var r;return s.each(t,function(t){t.value===n?r=n:t.value===e&&(r=e)}),r},kr=function(t){t.addButton("fontsizeselect",function(){var e=function(t){var e=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return s.map(e.split(" "),function(t){var e=t,n=t,r=t.split("=");return r.length>1&&(e=r[0],n=r[1]),{text:e,value:n}})}(t);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(t,e){return function(){var n=this;t.on("init nodeChange",function(r){var i,o,a,s;if(i=t.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)o=Cr(i,a),s=Rr(e,o,i);n.value(s||null),s||n.text(o)})}}(t,e),onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}})},_r=function(t){kr(t)},Sr=function(t,e){var n=e.length;return s.each(e,function(e){e.menu&&(e.hidden=0===Sr(t,e.menu));var r=e.format;r&&(e.hidden=!t.formatter.canApply(r)),e.hidden&&n--}),n},Tr=function(t,e){var n=e.items().length;return e.items().each(function(e){e.menu&&e.visible(Tr(t,e.menu)>0),!e.menu&&e.settings.menu&&e.visible(Sr(t,e.settings.menu)>0);var r=e.settings.format;r&&e.visible(t.formatter.canApply(r)),e.visible()||n--}),n},Er=function(t){var e=function(t){var e=0,n=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],i=function(t){var r=[];if(t)return s.each(t,function(t){var o={text:t.title,icon:t.icon};if(t.items)o.menu=i(t.items);else{var a=t.format||"custom"+e++;t.format||(t.name=a,n.push(t)),o.format=a,o.cmd=t.cmd}r.push(o)}),r};return t.on("init",function(){s.each(n,function(e){t.formatter.register(e.name,e)})}),{type:"menu",items:t.settings.style_formats_merge?t.settings.style_formats?i(r.concat(t.settings.style_formats)):i(r):i(t.settings.style_formats||r),onPostRender:function(e){t.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return t.formatter.getCssText(this.settings.format)},onPostRender:function(){var e=this;e.parent().on("show",function(){var n,r;(n=e.settings.format)&&(e.disabled(!t.formatter.canApply(n)),e.active(t.formatter.match(n))),(r=e.settings.cmd)&&e.active(t.queryCommandState(r))})},onclick:function(){this.settings.format&&mr(t,this.settings.format)(),this.settings.cmd&&t.execCommand(this.settings.cmd)}}}}(t);!function(t,e){t.addMenuItem("formats",{text:"Formats",menu:e})}(t,e),function(t,e){t.addButton("styleselect",{type:"menubutton",text:"Formats",menu:e,onShowMenu:function(){t.settings.style_formats_autohide&&Tr(t,this.menu)}})}(t,e)},Nr=function(t,e){return function(){var n=[];return s.each(e,function(e){n.push({text:e[0],value:e[1],textStyle:function(){return t.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:n,fixedWidth:!0,onselect:function(e){if(e.control){var n=e.control.value();mr(t,n)()}},onPostRender:function(t,e,n){return function(){var r=this;t.on("nodeChange",function(i){var o=t.formatter,a=null;s.each(i.parents,function(t){if(s.each(e,function(e){if(n?o.matchNode(t,n,{value:e.value})&&(a=e.value):o.matchNode(t,e.value)&&(a=e.value),a)return!1}),a)return!1}),r.value(a)})}}(t,n)}}},Dr=function(t){var e=function(t){for(var e=(t=t.replace(/;$/,"").split(";")).length;e--;)t[e]=t[e].split("=");return t}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:function(t,e){return s.map(e,function(e){return{text:e[0],onclick:mr(t,e[1]),textStyle:function(){return t.formatter.getCssText(e[1])}}})}(t,e)}),t.addButton("formatselect",Nr(t,e))},Or=function(t,e){var n,r;if("string"==typeof e)r=e.split(" ");else if(s.isArray(e))return function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Z.apply(e,t[n])}return e}(s.map(e,function(e){return Or(t,e)}));return n=s.grep(r,function(e){return"|"===e||e in t.menuItems}),s.map(n,function(e){return"|"===e?{text:"-"}:t.menuItems[e]})},Ar=function(t){return t&&"-"===t.text},Pr=function(t){var e=J(t,function(t,e,n){return!Ar(t)||!Ar(n[e-1])});return J(e,function(t,e,n){return!Ar(t)||e>0&&e<n.length-1})},Mr=function(t){var e=t.settings.insert_button_items;return Pr(e?Or(t,e):function(t,e){var n=[{text:"-"}],r=s.grep(t.menuItems,function(t){return t.context===e});return s.each(r,function(t){"before"===t.separator&&n.push({text:"|"}),t.prependToContext?n.unshift(t):n.push(t),"after"===t.separator&&n.push({text:"|"})}),n}(t,"insert"))},Hr=function(t){!function(t){t.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(Mr(t)),this.menu.renderNew()}})}(t)},Br=function(t){!function(t){s.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,n){t.addButton(n,{active:!1,tooltip:e,onPostRender:pr(t,n),onclick:mr(t,n)})})}(t),function(t){s.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(e,n){t.addButton(n,{tooltip:e[0],cmd:e[1]})})}(t),function(t){s.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(e,n){t.addButton(n,{active:!1,tooltip:e[0],cmd:e[1],onPostRender:pr(t,n)})})}(t)},Ir=function(t){Br(t),function(t){s.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(e,n){t.addMenuItem(n,{text:e[0],icon:n,shortcut:e[2],cmd:e[1]})}),t.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:mr(t,"code")})}(t)},Wr=function(t,e){return function(){var n=this,r=function(){var n="redo"===e?"hasRedo":"hasUndo";return!!t.undoManager&&t.undoManager[n]()};n.disabled(!r()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(t.readonly||!r())})}},Lr=function(t){!function(t){t.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Wr(t,"undo"),cmd:"undo"}),t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Wr(t,"redo"),cmd:"redo"})}(t),function(t){t.addButton("undo",{tooltip:"Undo",onPostRender:Wr(t,"undo"),cmd:"undo"}),t.addButton("redo",{tooltip:"Redo",onPostRender:Wr(t,"redo"),cmd:"redo"})}(t)},zr=function(t){!function(t){t.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(t){return function(){var e=this;t.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(t.hasVisual)}}(t),cmd:"mceToggleVisualAid"})}(t)},Fr={setup:function(t){!function(t){t.rtl&&(re.rtl=!0)}(t),function(t){t.on("mousedown",function(){Re.hideAll()})}(t),function(t){t.settings.ui_container&&(lt.container=hr(mn.fromDom(document.body),t.settings.ui_container).fold(_(null),function(t){return t.dom()}))}(t),De.tooltips=!lt.iOS,re.translate=function(t){return a.translate(t)},Dr(t),vr(t),Ir(t),Lr(t),_r(t),xr(t),Er(t),zr(t),Hr(t)}},Ur=Ye.extend({recalc:function(t){var e,n,r,i,o,a,s,u,l,c,f,d,h,m,g,p,v,b,y,w,x,C,R,k,_,S,T,E,N=[],D=[];e=t.settings,i=t.items().filter(":visible"),o=t.layoutRect(),r=e.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),b=e.spacingH||e.spacing||0,y=e.spacingV||e.spacing||0,w=e.alignH||e.align,x=e.alignV||e.align,p=t.paddingBox,E="reverseRows"in e?e.reverseRows:t.isRtl(),w&&"string"==typeof w&&(w=[w]),x&&"string"==typeof x&&(x=[x]);for(f=0;f<r;f++)N.push(0);for(d=0;d<n;d++)D.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(c=i[d*r+f]);f++)k=(l=c.layoutRect()).minW,_=l.minH,N[f]=k>N[f]?k:N[f],D[d]=_>D[d]?_:D[d];for(S=o.innerW-p.left-p.right,C=0,f=0;f<r;f++)C+=N[f]+(f>0?b:0),S-=(f>0?b:0)+N[f];for(T=o.innerH-p.top-p.bottom,R=0,d=0;d<n;d++)R+=D[d]+(d>0?y:0),T-=(d>0?y:0)+D[d];if(C+=p.left+p.right,R+=p.top+p.bottom,(u={}).minW=C+(o.w-o.innerW),u.minH=R+(o.h-o.innerH),u.contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH,u.minW=Math.min(u.minW,o.maxW),u.minH=Math.min(u.minH,o.maxH),u.minW=Math.max(u.minW,o.startMinWidth),u.minH=Math.max(u.minH,o.startMinHeight),!o.autoResize||u.minW===o.minW&&u.minH===o.minH){var O;o.autoResize&&((u=t.layoutRect(u)).contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH),O="start"===e.packV?0:T>0?Math.floor(T/n):0;var A=0,P=e.flexWidths;if(P)for(f=0;f<P.length;f++)A+=P[f];else A=r;var M=S/A;for(f=0;f<r;f++)N[f]+=P?P[f]*M:M;for(m=p.top,d=0;d<n;d++){for(h=p.left,s=D[d]+O,f=0;f<r&&(c=i[E?d*r+r-1-f:d*r+f]);f++)g=c.settings,l=c.layoutRect(),a=Math.max(N[f],l.startMinWidth),l.x=h,l.y=m,"center"===(v=g.alignH||(w?w[f]||w[0]:null))?l.x=h+a/2-l.w/2:"right"===v?l.x=h+a-l.w:"stretch"===v&&(l.w=a),"center"===(v=g.alignV||(x?x[f]||x[0]:null))?l.y=m+s/2-l.h/2:"bottom"===v?l.y=m+s-l.h:"stretch"===v&&(l.h=s),c.layoutRect(l),h+=a+b,c.recalc&&c.recalc();m+=s+y}}else if(u.w=u.minW,u.h=u.minH,t.layoutRect(u),this.recalc(t),null===t._lastRect){var H=t.parent();H&&(H._lastRect=null,H.recalc())}}}),jr=De.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(t){this.getEl().src=t},html:function(t,e){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=t,e&&e()):R.setTimeout(function(){n.html(t)}),this}}),Vr=De.extend({init:function(t){this._super(t),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},help:function(t){this.state.set("help",t)},renderHtml:function(){var t=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),qr=De.extend({init:function(t){this._super(t),this.classes.add("widget").add("label"),this.canFocus=!1,t.multiline&&this.classes.add("autoscroll"),t.strong&&this.classes.add("strong")},initLayoutRect:function(){var t=this._super();return this.settings.multiline&&(wt.getSize(this.getEl()).width>t.maxW&&(t.minW=t.maxW,this.classes.add("multiline")),this.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,wt.getSize(this.getEl()).height)),t},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(t){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(t)},renderHtml:function(){var t,e,n=this.settings.forId,r=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(e=this.settings.forName)&&(t=this.getRoot().find("#"+e)[0])&&(n=t._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+r+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}}),Yr=se.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(t){this._super(t),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(t){t.classes.add("toolbar-item")}),this._super()}}),$r=Yr.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Xr=$e.extend({init:function(t){this._renderOpen=!0,this._super(t),t=this.settings,this.classes.add("menubtn"),t.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",t.menu||this.render())},showMenu:function(t){var e,n=this;if(n.menu&&n.menu.visible()&&!1!==t)return n.hideMenu();n.menu||(e=n.state.get("menu")||[],n.classes.add("opened"),e.length?e={type:"menu",animate:!0,items:e}:(e.type=e.type||"menu",e.animate=!0),e.renderTo?n.menu=e.parent(n).show().renderTo():n.menu=g.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control.parent()===n.menu&&(t.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(t){"hide"===t.type&&t.control.parent()===n&&n.classes.remove("opened-under"),t.control===n.menu&&(n.activeMenu("show"===t.type),n.classes.toggle("opened","show"===t.type)),n.aria("expanded","show"===t.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);var r=n.menu.layoutRect(),i=n.$el.offset().top+n.layoutRect().h;i>r.y&&i<r.y+r.h&&n.classes.add("opened-under"),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide())},activeMenu:function(t){this.classes.toggle("active",t)},renderHtml:function(){var t,e=this._id,n=this.classPrefix,r=this.settings.icon,i=this.state.get("text"),o="";return(t=this.settings.image)?(r="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i&&(this.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+this.encode(i)+"</span>"),r=this.settings.icon?n+"ico "+n+"i-"+r:"",this.aria("role",this.parent()instanceof $r?"menuitem":"button"),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+e+'"><button id="'+e+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+t+"></i>":"")+o+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this;return t.on("click",function(e){e.control===t&&function(t,e){for(;t;){if(e===t)return!0;t=t.parentNode}return!1}(e.target,t.getEl())&&(t.focus(),t.showMenu(!e.aria),e.aria&&t.menu.items().filter(":visible")[0].focus())}),t.on("mouseenter",function(e){var n,r=e.control,i=t.parent();r&&i&&r instanceof Xr&&r.parent()===i&&(i.items().filter("MenuButton").each(function(t){t.hideMenu&&t!==r&&(t.menu&&t.menu.visible()&&(n=!0),t.hideMenu())}),n&&(r.focus(),r.showMenu()))}),t._super()},bindStates:function(){var t=this;return t.state.on("change:menu",function(){t.menu&&t.menu.remove(),t.menu=null}),t._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Jr=Re.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var e=t.items,n=e.length;n--;)e[n]=s.extend({},t.itemDefaults,e[n]);this._super(t),this.classes.add("menu"),t.animate&&11!==lt.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var t,e=this;function n(){e.throbber&&(e.throbber.hide(),e.throbber=null)}e.settings.itemsFactory&&(e.throbber||(e.throbber=new Se(e.getEl("body"),!0),0===e.items().length?(e.throbber.show(),e.fire("loading")):e.throbber.show(100,function(){e.items().remove(),e.fire("loading")}),e.on("hide close",n)),e.requestTime=t=(new Date).getTime(),e.settings.itemsFactory(function(r){0!==r.length?e.requestTime===t&&(e.getEl().style.width="",e.getEl("body").style.width="",n(),e.items().remove(),e.getEl("body").innerHTML="",e.add(r),e.renderNew(),e.fire("loaded")):e.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){var n=e.settings;if(n.icon||n.image||n.selectable)return t._hasIcons=!0,!1}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t.on("show hide",function(e){e.control===t&&("show"===e.type?R.setTimeout(function(){t.classes.add("in")},0):t.classes.remove("in"))}),t._super()}}),Kr=Xr.extend({init:function(t){var e,n,r,i,o=this;o._super(t),t=o.settings,o._values=e=t.values,e&&(void 0!==t.value&&function e(i){for(var a=0;a<i.length;a++){if(n=i[a].selected||t.value===i[a].value)return r=r||i[a].text,o.state.set("value",i[a].value),!0;if(i[a].menu&&e(i[a].menu))return!0}}(e),!n&&e.length>0&&(r=e[0].text,o.state.set("value",e[0].value)),o.state.set("menu",e)),o.state.set("text",t.text||r),o.classes.add("listbox"),o.on("select",function(e){var n=e.control;i&&(e.lastControl=i),t.multiple?n.active(!n.active()):o.value(e.control.value()),i=n})},value:function(t){return 0===arguments.length?this.state.get("value"):void 0===t?this:(this.settings.values&&!function e(n){return Y(n,function(n){return n.menu?e(n.menu):n.value===t})}(this.settings.values)?null===t&&this.state.set("value",null):this.state.set("value",t),this)},bindStates:function(){var t=this;return t.on("show",function(e){var n,r;n=e.control,r=t.value(),n instanceof Jr&&n.items().each(function(t){t.hasMenus()||t.active(t.value()===r)})}),t.state.on("change:value",function(e){var n=function t(e,n){var r;if(e)for(var i=0;i<e.length;i++){if(e[i].value===n)return e[i];if(e[i].menu&&(r=t(e[i].menu,n)))return r}}(t.state.get("menu"),e.value);n?t.text(n.text):t.text(t.settings.text)}),t._super()}}),Gr=De.extend({Defaults:{border:0,role:"menuitem"},init:function(t){var e;this._super(t),t=this.settings,this.classes.add("menu-item"),t.menu&&this.classes.add("menu-item-expand"),t.preview&&this.classes.add("menu-item-preview"),"-"!==(e=this.state.get("text"))&&"|"!==e||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),t.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),t.icon="selected"),t.preview||t.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(t){t.preventDefault()}),t.menu&&!t.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,e=this,n=e.settings,r=e.parent();if(r.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){(t=e.menu)?t.show():((t=n.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=e.menu=g.create(t).parent(e).renderTo()).reflow(),t.on("cancel",function(n){n.stopPropagation(),e.focus(),t.hide()}),t.on("show hide",function(t){t.control.items&&t.control.items().each(function(t){t.active(t.settings.selected)})}).fire("show"),t.on("hide",function(n){n.control===t&&e.classes.remove("selected")}),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub");var i=t.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);t.moveRel(e.getEl(),i),t.rel=i,i="menu-sub-"+i,t.classes.remove(t._lastRel).add(i),t._lastRel=i,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(t){t.hideMenu&&t.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var t,e=this._id,n=this.settings,r=this.classPrefix,i=this.state.get("text"),o=this.settings.icon,a="",s=n.shortcut,u=this.encode(n.url);function l(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(t){var e=n.match||"";return e?t.replace(new RegExp(l(e),"gi"),function(t){return"!mce~match["+t+"]mce~match!"}):t}function f(t){return t.replace(new RegExp(l("!mce~match["),"g"),"<b>").replace(new RegExp(l("]mce~match!"),"g"),"</b>")}return o&&this.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s&&(s=function(t){var e,n,r={};for(r=lt.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=t.split("+"),e=0;e<t.length;e++)(n=r[t[e].toLowerCase()])&&(t[e]=n);return t.join("+")}(s)),o=r+"ico "+r+"i-"+(this.settings.icon||"none"),t="-"!==i?'<i class="'+o+'"'+a+"></i> ":"",i=f(this.encode(c(i))),u=f(this.encode(c(u))),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1">'+t+("-"!==i?'<span id="'+e+'-text" class="'+r+'text">'+i+"</span>":"")+(s?'<div id="'+e+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var t=this,e=t.settings,n=e.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=t.getEl("text");r&&(r.setAttribute("style",n),t._textStyle=n)}return t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.aria&&t.menu.focus(!0)):(t.fire("select"),R.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(t){t.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(t){return function(t,e){var n=t._textStyle;if(n){var r=t.getEl("text");r.setAttribute("style",n),e&&(r.style.color="",r.style.backgroundColor="")}}(this,t),void 0!==t&&this.aria("checked",t),this._super(t)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Zr=Ke.extend({Defaults:{classes:"radio",role:"radio"}}),Qr=De.extend({renderHtml:function(){var t=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new le(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!==t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function ti(t){var e="";if(t)for(var n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";return e}var ei=De.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(t){var e=this;e._super(t),e.settings.size&&(e.size=e.settings.size),e.settings.options&&(e._options=e.settings.options),e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))})},options:function(t){return arguments.length?(this.state.set("options",t),this):this.state.get("options")},renderHtml:function(){var t,e="";return t=ti(this._options),this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=ti(e.value)}),t._super()}});function ni(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function ri(t,e,n){t.setAttribute("aria-"+e,n)}function ii(t,e){var n,r,i,o,a;"v"===t.settings.orientation?(i="top",r="height",n="h"):(i="left",r="width",n="w"),a=t.getEl("handle"),o=((t.layoutRect()[n]||100)-wt.getSize(a)[r])*((e-t._minValue)/(t._maxValue-t._minValue))+"px",a.style[i]=o,a.style.height=t.layoutRect().h+"px",ri(a,"valuenow",e),ri(a,"valuetext",""+t.settings.previewFilter(e)),ri(a,"valuemin",t._minValue),ri(a,"valuemax",t._maxValue)}var oi=De.extend({init:function(t){t.previewFilter||(t.previewFilter=function(t){return Math.round(100*t)/100}),this._super(t),this.classes.add("slider"),"v"===t.orientation&&this.classes.add("vertical"),this._minValue=V(t.minValue)?t.minValue:0,this._maxValue=V(t.maxValue)?t.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var t=this._id,e=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-handle" class="'+e+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var t,e,n,r,i,o,a=this;t=a._minValue,e=a._maxValue,"v"===a.settings.orientation?(n="screenY",r="top",i="height",o="h"):(n="screenX",r="left",i="width",o="w"),a._super(),function(t,e){function n(n){var r,i;r=a.value(),r=ni(r=function(t,e,n){return n*(e-t)-t}(t,e,(r+(i=t))/(e-i)+.05*n),t,e),a.value(r),a.fire("dragstart",{value:r}),a.fire("drag",{value:r}),a.fire("dragend",{value:r})}a.on("keydown",function(t){switch(t.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(t,e),function(t,e,s){var u,l,c,f,d;a._dragHelper=new le(a._id,{handle:a._id+"-handle",start:function(t){u=t[n],l=parseInt(a.getEl("handle").style[r],10),c=(a.layoutRect()[o]||100)-wt.getSize(s)[i],a.fire("dragstart",{value:d})},drag:function(i){var o=i[n]-u;f=ni(l+o,0,c),s.style[r]=f+"px",d=t+f/c*(e-t),a.value(d),a.tooltip().text(""+a.settings.previewFilter(d)).show().moveRel(s,"bc tc"),a.fire("drag",{value:d})},stop:function(){a.tooltip().hide(),a.fire("dragend",{value:d})}})}(t,e,a.getEl("handle"))},repaint:function(){this._super(),ii(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){ii(t,e.value)}),t._super()}}),ai=De.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),si=Xr.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var t,e,n=this.getEl(),r=this.layoutRect();return this._super(),t=n.firstChild,e=n.lastChild,bt(t).css({width:r.w-wt.getSize(e).width,height:r.h-2}),bt(e).css({height:r.h-2}),this},activeMenu:function(t){bt(this.getEl().lastChild).toggleClass(this.classPrefix+"active",t)},renderHtml:function(){var t,e,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a=this.settings,s="";return(t=a.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i=a.icon?r+"ico "+r+"i-"+i:"",o&&(this.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+this.encode(o)+"</span>"),e="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" role="button"'+e+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"></i>":"")+s+'</button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(i?" ":"")+this._menuBtnText:"")+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var t=this.settings.onclick;return this.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete this.settings.onclick,this._super()}}),ui=dr.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),li=ge.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(t){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),bt(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+t,(e=this.getEl("t"+t)).setAttribute("aria-selected","true"),bt(e).addClass(this.classPrefix+"active"),this.items()[t].show().fire("showtab"),this.reflow(),this.items().each(function(e,n){t!==n&&e.hide()})},renderHtml:function(){var t=this,e=t._layout,n="",r=t.classPrefix;return t.preRender(),e.preRender(t),t.items().each(function(e,i){var o=t._id+"-t"+i;e.aria("role","tabpanel"),e.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+t.encode(e.settings.title)+"</div>"}),'<div id="'+t._id+'" class="'+t.classes+'" hidefocus="1" tabindex="-1"><div id="'+t._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+t._id+'-body" class="'+t.bodyClasses+'">'+e.renderHtml(t)+"</div></div>"},postRender:function(){var t=this;t._super(),t.settings.activeTab=t.settings.activeTab||0,t.activateTab(t.settings.activeTab),this.on("click",function(e){var n=e.target.parentNode;if(n&&n.id===t._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===e.target&&t.activateTab(r)})},initLayoutRect:function(){var t,e,n;e=(e=wt.getSize(this.getEl("head")).width)<0?0:e,n=0,this.items().each(function(t){e=Math.max(e,t.layoutRect().minW),n=Math.max(n,t.layoutRect().minH)}),this.items().each(function(t){t.settings.x=0,t.settings.y=0,t.settings.w=e,t.settings.h=n,t.layoutRect({x:0,y:0,w:e,h:n})});var r=wt.getSize(this.getEl("head")).height;return this.settings.minWidth=e,this.settings.minHeight=n+r,(t=this._super()).deltaH+=r,t.innerH=t.h-t.deltaH,t}}),ci=De.extend({init:function(t){var e=this;e._super(t),e.classes.add("textbox"),t.multiline?e.classes.add("multiline"):(e.on("keydown",function(t){var n;13===t.keyCode&&(t.preventDefault(),e.parents().reverse().each(function(t){if(t.toJSON)return n=t,!1}),e.fire("submit",{data:n.toJSON()}))}),e.on("keyup",function(t){e.state.set("value",t.target.value)}))},repaint:function(){var t,e,n,r,i,o=0;t=this.getEl().style,e=this._layoutRect,i=this._lastRepaintRect||{};var a=document;return!this.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(t.lineHeight=e.h-o+"px"),r=(n=this.borderBox).left+n.right+8,o=n.top+n.bottom+(this.settings.multiline?8:0),e.x!==i.x&&(t.left=e.x+"px",i.x=e.x),e.y!==i.y&&(t.top=e.y+"px",i.y=e.y),e.w!==i.w&&(t.width=e.w-r+"px",i.w=e.w),e.h!==i.h&&(t.height=e.h-o+"px",i.h=e.h),this._lastRepaintRect=i,this.fire("repaint",{},!1),this},renderHtml:function(){var t,e,n=this.settings;return t={id:this._id,hidefocus:"1"},s.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){t[e]=n[e]}),this.disabled()&&(t.disabled="disabled"),n.subtype&&(t.type=n.subtype),(e=wt.create(n.multiline?"textarea":"input",t)).value=this.state.get("value"),e.className=this.classes.toString(),e.outerHTML},value:function(t){return arguments.length?(this.state.set("value",t),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!==e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}}),fi=function(){return{Selector:Lt,Collection:Ut,ReflowQueue:Kt,Control:re,Factory:g,KeyboardNavigation:oe,Container:se,DragHelper:le,Scrollable:me,Panel:ge,Movable:St,Resizable:pe,FloatPanel:Re,Window:Le,MessageBox:je,Tooltip:Ne,Widget:De,Progress:Oe,Notification:Pe,Layout:qe,AbsoluteLayout:Ye,Button:$e,ButtonGroup:Je,Checkbox:Ke,ComboBox:Ze,ColorBox:Qe,PanelButton:tn,ColorButton:nn,ColorPicker:on,Path:sn,ElementPath:un,FormItem:ln,Form:cn,FieldSet:fn,FilePicker:lr,FitLayout:cr,FlexLayout:fr,FlowLayout:dr,FormatControls:Fr,GridLayout:Ur,Iframe:jr,InfoBox:Vr,Label:qr,Toolbar:Yr,MenuBar:$r,MenuButton:Xr,MenuItem:Gr,Throbber:Se,Menu:Jr,ListBox:Kr,Radio:Zr,ResizeHandle:Qr,SelectBox:ei,Slider:oi,Spacer:ai,SplitButton:si,StackLayout:ui,TabPanel:li,TextBox:ci,DropZone:an,BrowseButton:Xe}},di=function(t){t.ui?s.each(fi(),function(e,n){t.ui[n]=e}):t.ui=fi()};s.each(fi(),function(t,e){g.add(e,t)}),di(window.tinymce?window.tinymce:{}),o.add("modern",function(t){return Fr.setup(t),Ve(t)})}()}).call(window)}});